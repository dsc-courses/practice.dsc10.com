<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Fall 2021 Final Exam</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../assets/theme.css" />
  <script defer=""
  src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Fall 2021 Final Exam</h1>
</header>
<p><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<!-- add after bootstrap.min.css -->
<link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css"/>
<!-- add after bootstrap.min.js or bootstrap.bundle.min.js -->
<script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script></p>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B947E6J6H4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B947E6J6H4');
</script>
<p><a href="../index.html">← return to practice.dsc10.com</a></p>
<hr />
<p><strong>Instructor(s):</strong> Janine Tiefenbruck, Suraj Rampure</p>
<p>This exam was administered remotely via Gradescope. The exam was
open-internet, and students were able to use Jupyter Notebooks. They had
<strong>3 hours</strong> to work on it.</p>
<hr />
<p>Welcome to the Final Exam! In honor of the (at the time) brand-new
Comic-Con Museum that just opened at Balboa Park here in San Diego, this
exam will contain questions about various museums and zoos around the
world.</p>
<p>In this question, we’ll work with the DataFrame
<code>art_museums</code>, which contains the name, city, number of
visitors in 2019, and rank (based on number of visitors) for the 100
most visited art museums in 2019. The first few rows of
<code>art_museums</code> are shown below.</p>
<center><img src='../assets/images/fa21-final/art_museums.png' width=40%></center>
<p><strong>Tip:</strong> Open this page in another tab, so that it is
easy to refer to this data description as you work through the exam.</p>
<hr />
<h2 id="problem-1">Problem 1</h2>
<p><br></p>
<h3 id="problem-1.1">Problem 1.1</h3>
<p>Which of the following blocks of code correctly assigns
<code>random_art_museums</code> to an array of the names of 10 art
museums, randomly selected without replacement from those in
<code>art_museums</code>? Select all that apply.</p>
<p>Option 1:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_10(df):</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.array(df.sample(<span class="dv">10</span>).get(<span class="st">&#39;Name&#39;</span>))</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>random_art_museums <span class="op">=</span> get_10(art_museums)</span></code></pre></div>
<p>Option 2:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_10(art_museums):</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.array(art_museums.sample(<span class="dv">10</span>).get(<span class="st">&#39;Name&#39;</span>))</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>random_art_museums <span class="op">=</span> get_10(art_museums)</span></code></pre></div>
<p>Option 3:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_10(art_museums):</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    random_art_museums <span class="op">=</span> np.array(art_museums.sample(<span class="dv">10</span>).get(<span class="st">&#39;Name&#39;</span>))</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>random_art_museums <span class="op">=</span> get_10(art_museums)</span></code></pre></div>
<p>Option 4:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_10():</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.array(art_museums.sample(<span class="dv">10</span>).get(<span class="st">&#39;Name&#39;</span>))</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>random_art_museums <span class="op">=</span> get_10()</span></code></pre></div>
<p>Option 5:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>random_art_museums <span class="op">=</span> np.array([])</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_10():</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    random_art_museums <span class="op">=</span> np.array(art_museums.sample(<span class="dv">10</span>).get(<span class="st">&#39;Name&#39;</span>))</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> random_art_museums</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>get_10()</span></code></pre></div>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> Option 1</p></li>
<li><p><input type="checkbox" disabled="" /> Option 2</p></li>
<li><p><input type="checkbox" disabled="" /> Option 3</p></li>
<li><p><input type="checkbox" disabled="" /> Option 4</p></li>
<li><p><input type="checkbox" disabled="" /> Option 5</p></li>
<li><p><input type="checkbox" disabled="" /> None of the above</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_1" aria-expanded="true" aria-controls="collapse1_1">
Click to view the solution.
</button>
</h2>
<div id="collapse1_1" class="accordion-collapse collapse collapse"
aria-labelledby="heading1_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answers:</strong> Option 1, Option 2, and Option 4</p>
<p>Note that if <code>df</code> is a DataFrame, then
<code>df.sample(10)</code> is a DataFrame containing 10 randomly
selected rows in <code>df</code>. With that in mind, let’s look at all
of our options.</p>
<ul>
<li><strong>Option 1:</strong> This implementation of
<code>get_10</code> takes in a DataFrame <code>df</code> and returns an
array containing 10 randomly selected values in <code>df</code>’s
<code>'Name'</code> column. After defining <code>get_10</code>, we
assign <code>random_art_museums</code> to the result of calling
<code>get_10(art_museums)</code>. This assigns
<code>random_art_museums</code> as intended, so Option 1 is
correct.</li>
<li><strong>Option 2:</strong> This option is functionally the same as
Option 1, so it is also correct. The only difference between Option 2
and Option 1 is that Option 2 uses the parameter name
<code>art_museums</code> and Option 1 uses the parameter name
<code>df</code> (both in the <code>def</code> line and in the function
body); this does not change the behavior of <code>get_10</code> or the
lines afterward.</li>
<li><strong>Option 3:</strong> <code>get_10</code> here does not return
anything! So, <code>get_10(art_museums)</code> evaluates to
<code>None</code> (which means “nothing” in Python), and
<code>random_art_museums</code> is also <code>None</code>, meaning
Option 3 is incorrect.</li>
<li><strong>Option 4:</strong> At first, it may appear that this option
is wrong, as <code>get_10</code> does not take in any inputs. However,
the body of <code>get_10</code> contains a reference to the DataFrame
<code>art_museums</code>, which is ultimately where we want to sample
from. As a result, <code>get_10</code> does indeed return an array
containing 10 randomly selected museum names, and
<code>random_art_museums = get_10()</code> correctly assigns
<code>random_art_museums</code> to this array, so Option 4 is
correct.</li>
<li><strong>Option 5:</strong> Here, <code>get_10</code> returns the
correct array. However, outside of the function,
<code>random_art_museums</code> is never assigned to the output of
<code>get_10</code>. (The variable name <code>random_art_museums</code>
inside the function has nothing to do with the array defined before and
outside the function.) As a result, after running the line
<code>get_10()</code> at the bottom of the code block,
<code>random_art_museums</code> is still an empty array, and as such,
Option 5 is incorrect.</li>
</ul>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.2">Problem 1.2</h3>
<p>London has the most art museums in the top 100 of any city in the
world. The most visited art museum in London is
<code>'Tate Modern'</code>.</p>
<p>Which of the following blocks of code correctly assigns
<code>best_in_london</code> to <code>'Tate Modern'</code>? Select all
that apply.</p>
<p>Option 1:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> most_common(df, col):</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df.groupby(col).count().sort_values(by<span class="op">=</span><span class="st">&#39;Rank&#39;</span>, ascending<span class="op">=</span><span class="va">False</span>).index[<span class="dv">0</span>]</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> most_visited(df, col, value):</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df[df.get(col)<span class="op">==</span>value].sort_values(by<span class="op">=</span><span class="st">&#39;Visitors&#39;</span>, ascending<span class="op">=</span><span class="va">False</span>).get(<span class="st">&#39;Name&#39;</span>).iloc[<span class="dv">0</span>]</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>best_in_london <span class="op">=</span> most_visited(art_museums, <span class="st">&#39;City&#39;</span>, most_common(art_museums, <span class="st">&#39;City&#39;</span>))</span></code></pre></div>
<p>Option 2:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> most_common(df, col):</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(df.groupby(col).count().sort_values(by<span class="op">=</span><span class="st">&#39;Rank&#39;</span>, ascending<span class="op">=</span><span class="va">False</span>).index[<span class="dv">0</span>])</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> most_visited(df, col, value):</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(df[df.get(col)<span class="op">==</span>value].sort_values(by<span class="op">=</span><span class="st">&#39;Visitors&#39;</span>, ascending<span class="op">=</span><span class="va">False</span>).get(<span class="st">&#39;Name&#39;</span>).iloc[<span class="dv">0</span>])</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>best_in_london <span class="op">=</span> most_visited(art_museums, <span class="st">&#39;City&#39;</span>, most_common(art_museums, <span class="st">&#39;City&#39;</span>))</span></code></pre></div>
<p>Option 3:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> most_common(df, col):</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df.groupby(col).count().sort_values(by<span class="op">=</span><span class="st">&#39;Rank&#39;</span>, ascending<span class="op">=</span><span class="va">False</span>).index[<span class="dv">0</span>]</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> most_visited(df, col, value):</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(df[df.get(col)<span class="op">==</span>value].sort_values(by<span class="op">=</span><span class="st">&#39;Visitors&#39;</span>, ascending<span class="op">=</span><span class="va">False</span>).get(<span class="st">&#39;Name&#39;</span>).iloc[<span class="dv">0</span>])</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>best_in_london <span class="op">=</span> most_visited(art_museums, <span class="st">&#39;City&#39;</span>, most_common(art_museums, <span class="st">&#39;City&#39;</span>))</span></code></pre></div>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> Option 1</p></li>
<li><p><input type="checkbox" disabled="" /> Option 2</p></li>
<li><p><input type="checkbox" disabled="" /> Option 3</p></li>
<li><p><input type="checkbox" disabled="" /> None of the above</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_2" aria-expanded="true" aria-controls="collapse1_2">
Click to view the solution.
</button>
</h2>
<div id="collapse1_2" class="accordion-collapse collapse collapse"
aria-labelledby="heading1_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Option 1 only</p>
<p>At a glance, it may seem like there’s a lot of reading to do to
answer the question. However, it turns out that all 3 options follow
similar logic; the difference is in their use of <code>print</code> and
<code>return</code> statements. Whenever we want to “save” the output of
a function to a variable name or use it in another function, we need to
<code>return</code> somewhere within our function. Only Option 1
contains a <code>return</code> statement in both
<code>most_common</code> and <code>most_visited</code>, so it is the
only correct option.</p>
<p>Let’s walk through the logic of Option 1 (which we don’t necessarily
need to do to answer the problem, but we should in order to enhance our
understanding):</p>
<ul>
<li>First, we use <code>most_common</code> to find the city with the
most art museums. <code>most_common</code> does this by grouping the
input DataFrame <code>df</code> (<code>art_museums</code>, in this case)
by <code>'City'</code> and using the <code>.count()</code> method to
find the number of rows per <code>'City'</code>. Note that when using
<code>.count()</code>, all columns in the aggregated DataFrame will
contain the same information, so it doesn’t matter which column you use
to extract the counts per group. After sorting by one of these columns
(<code>'Rank'</code>, in this case) in decreasing order,
<code>most_common</code> takes the first value in the
<code>index</code>, which will be the name of the <code>'City'</code>
with the most art museums. <strong>This is London</strong>,
i.e. <code>most_common(art_museums, 'City')</code> evaluates to
<code>'London'</code> in Option 1 (in Option 2, it evaluates to
<code>None</code>, since <code>most_common</code> there doesn’t
<code>return</code> anything).</li>
<li>Then, we use <code>most_visited</code> to find the museum with the
most visitors in the city with the most museums. This is achieved by
keeping only the rows of the input DataFrame <code>df</code> (again,
<code>art_museums</code> in this case) where the value in the
<code>col</code> (<code>'City'</code>) column is <code>value</code>
(<code>most_common(art_museums, 'City')</code>, or
<code>'London'</code>). Now that we only have information for museums in
London, we can sort by <code>'Visitors'</code> to find the most visited
such museum, and take the first value from the resulting
<code>'Name'</code> column. While all 3 options follow this logic, only
Option 1 <strong>returns</strong> the desired value, and so only Option
1 assigns <code>best_in_london</code> correctly. (Even if Option 2’s
<code>most_visited</code> used <code>return</code> instead of
<code>print</code>, it still wouldn’t work, since Option 2’s
<code>most_common</code> also uses <code>print</code> instead of
<code>return</code>).</li>
</ul>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-2">Problem 2</h2>
<p>(Remember to keep the data description from the top of the exam open
in another tab!)</p>
<p><code>'Tate Modern'</code> is the most popular art museum in London.
But what’s the most popular art museum in each city?</p>
<p>It turns out that there’s no way to answer this easily using the
tools that you know about so far. To help, we’ve created a new Series
method, <code>.last()</code>. If <code>s</code> is a Series,
<code>s.last()</code> returns the last element of <code>s</code>
(i.e. the element at the very end of <code>s</code>).
<code>.last()</code> works with <code>.groupby</code>, too (just like
<code>.mean()</code> and <code>.count()</code>).</p>
<p>Fill in the blanks so that the code below correctly assigns
<code>best_per_city</code> to a DataFrame with one row per city, that
describes the name, number of visitors, and rank of the most visited art
museum in each city. <code>best_per_city</code> should be sorted in
decreasing order of number of visitors. The first few rows of
<code>best_per_city</code> are shown below.</p>
<center><img src='../assets/images/fa21-final/best_per_city.png' width=40%></center>
<div class="sourceCode" id="cb9"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>best_per_city <span class="op">=</span> __(a)__.groupby(__(b)__).last().__(c)__</span></code></pre></div>
<ol type="1">
<li>What goes in blank (a)?</li>
<li>What goes in blank (b)?</li>
<li>What goes in blank (c)?</li>
</ol>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2" aria-expanded="true" aria-controls="collapse2">
Click to view the solution.
</button>
</h2>
<div id="collapse2" class="accordion-collapse collapse collapse"
aria-labelledby="heading2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answers:</strong></p>
<ol type="1">
<li><code>art_museums.sort_values('Visitors', ascending=True)</code></li>
<li><code>'City'</code></li>
<li><code>sort_values('Visitors', ascending=False)</code></li>
</ol>
<p>Let’s take a look at the completed implementation.</p>
<div id="cb1" class="sourceCode">
<pre class="sourceCode py"><code class="sourceCode python"><span id="cb1-1"><a aria-hidden="true" href="#cb1-1" tabindex="-1"></a>best_per_city <span class="op">=</span> art_museums.sort_values(<span class="st">'Visitors'</span>, ascending<span class="op">=</span><span class="va">True</span>).groupby(<span class="st">'City'</span>).last().sort_values(<span class="st">'Visitors'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-3">Problem 3</h2>
<p>The table below shows the average amount of revenue from different
sources for art museums in 2003 and 2013.</p>
<center><img src='../assets/images/fa21-final/average_revenue.png' width=40%></center>
<p><br></p>
<h3 id="problem-3.1">Problem 3.1</h3>
<p>What is the total variation distance between the distribution of
revenue sources in 2003 and the distribution of revenue sources in 2013?
Give your answer as a proportion (i.e. a decimal between 0 and 1),
<strong>not</strong> a percentage. Round your answer to three decimal
places.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3_1" aria-expanded="true" aria-controls="collapse3_1">
Click to view the solution.
</button>
</h2>
<div id="collapse3_1" class="accordion-collapse collapse collapse"
aria-labelledby="heading3_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> 0.19</p>
<p>Recall, the total variation distance (TVD) is the sum of the absolute
differences in proportions, divided by 2. The absolute differences in
proportions for each source are as follows:</p>
<ul>
<li>Admissions: <span class="math inline">|0.15 - 0.24| =
0.09</span></li>
<li>Restaurants and Catering: <span class="math inline">|0.09 - 0.12| =
0.03</span></li>
<li>Store: <span class="math inline">|0.52 - 0.33| = 0.19</span></li>
<li>Other: <span class="math inline">|0.24 - 0.31| = 0.07</span></li>
</ul>
<p>Then, we have</p>
<p><span class="math display">\text{TVD} = \frac{1}{2} (0.09 + 0.03 +
0.19 + 0.07) = 0.19</span></p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-3.2">Problem 3.2</h3>
<p>Which type of visualization would be best suited for comparing the
two distributions in the table?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>Scatter plot</code></p></li>
<li><p><input type="radio" disabled="" /> <code>Line plot</code></p></li>
<li><p><input type="radio" disabled="" /> <code>Overlaid histogram</code></p></li>
<li><p><input type="radio" disabled="" /> <code>Overlaid bar chart</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3_2" aria-expanded="true" aria-controls="collapse3_2">
Click to view the solution.
</button>
</h2>
<div id="collapse3_2" class="accordion-collapse collapse collapse"
aria-labelledby="heading3_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Overlaid bar chart</p>
<p>A <strong>scatter plot</strong> visualizes the relationship between
two numerical variables. In this problem, we only have categorical
variables.</p>
<p>A <strong>line plot</strong> shows trends in numerical variables over
time. In this problem, we only have categorical variables. Moreover,
when it says over time, it is suitable for plotting change in multiple
years (e.g. 2001, 2002, 2003, … , 2013), or even with data of days. In
this question, we only want to compare the distribution of 2003 and
2013, this makes the line plot not useful. In addition, if you try to
draw a line plot for this question, you will find the line plot fails to
visualize distribution (e.g. the idea of 15%, 9%, 52%, and 24% add up to
100%).</p>
<p>An <strong>overlaid</strong> graph is useful in this question since
this visualizes comparison between the two distributions.</p>
<p>However, an <strong>overlaid histogram</strong> is not useful in this
problem. The key reason is the differences between a histogram and a bar
chart.</p>
<p>Bar Chart: Space between the bars; <strong>categories</strong> on
axis; categorical variables; order does not matter<br/>
Histogram: No space between the bars; intervals on axis; numerical
variables; order matters</p>
<p>In the question, we are plotting 2003 and 2013 distributions of four
<strong>categories</strong> (Admissions, Restaurants and Catering,
Store, and Other). Thus, an <strong>overlaid bar chart</strong> is more
appropriate.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-3.3">Problem 3.3</h3>
<p>Notably, there was an economic recession in 2008-2009. Which of the
following can we conclude was an effect of the recession?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>The increase in revenue from admissions, as more people were visiting museums.</code></p></li>
<li><p><input type="radio" disabled="" /> <code>The decline in revenue from museum stores, as people had less money to spend.</code></p></li>
<li><p><input type="radio" disabled="" /> <code>The decline in total revenue, as fewer people were visiting museums.</code></p></li>
<li><p><input type="radio" disabled="" /> <code>None of the above</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3_3" aria-expanded="true" aria-controls="collapse3_3">
Click to view the solution.
</button>
</h2>
<div id="collapse3_3" class="accordion-collapse collapse collapse"
aria-labelledby="heading3_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> None of the above</p>
<p>Since we are only given the distribution of the revenue, and have no
information about the amount of revenue in 2003 and 2013, we cannot
conclude how the revenue has changed from 2003 to 2013 after the
recession.</p>
<p>For instance, if the total revenue in 2003 was 100 billion USD and
the total revenue in 2013 was 50 billion USD, revenue from admissions in
2003 was 100 * 15% = 15 billion USD, and revenue from admissions in 2003
was 50 * 24% = 12 billion USD. In this case, we will have 15 &gt; 12,
the revenue from admissions has declined rather than increased (As
stated by
<code>The increase in revenue from admissions, as more people were visiting museums.</code>).
Similarly, since we don’t know the total revenue in 2003 and 2013, we
cannot conclude
<code>The decline in revenue from museum stores, as people had less money to spend.</code>
or
<code>The decline in total revenue, as fewer people were visiting museums.</code></p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="section"><span class="math display"> </span></h2>
<h4
id="feedback-find-an-error-still-confused-have-a-suggestion-let-us-know-here.">👋
Feedback: Find an error? Still confused? Have a suggestion?
<a href="https://forms.gle/WZ71FchnXU1K154d7">Let us know
here</u></a>.</h4>
<hr />
</body>
</html>
