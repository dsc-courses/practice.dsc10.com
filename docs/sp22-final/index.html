<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Spring 2022 Final Exam</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="..\assets\theme.css" />
  <script defer=""
  src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">Spring 2022 Final Exam</h1>
</header>
<p><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<!-- add after bootstrap.min.css -->
<link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css"/>
<!-- add after bootstrap.min.js or bootstrap.bundle.min.js -->
<script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script></p>
<!-- for difficulty gauges-->
<script src="https://cdn.plot.ly/plotly-2.16.1.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B947E6J6H4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B947E6J6H4');
</script>
<p><a href="../index.html">← return to practice.dsc10.com</a></p>
<hr />
<p><strong>Instructor(s):</strong> Janine Tiefenbruck</p>
<p>This exam was administered in-person. The exam was closed-notes,
except students were provided a copy of the
<a href='https://drive.google.com/file/d/1ky0Np67HS2O4LO913P-ing97SJG0j27n/view'>DSC
10 Reference Sheet<a>. No calculators were allowed. Students had
<strong>3 hours</strong> to take this exam.</p>
<hr />
<p>Welcome to
<img src='../assets/images/sp22-final/ikea_logo.png' height=15> !</p>
<p>IKEA is a Swedish furniture company that designs and sells
ready-to-assemble furniture and other home furnishings. IKEA has
locations worldwide, including one in San Diego. IKEA is known for its
cheap prices, modern designs, huge showrooms, and wordless instruction
manuals. They also sell really good Swedish meatballs in their cafe!</p>
<center><img src='../assets/images/sp22-final/wordless_instructions.png' width=40%></center>
<p><br></p>
<p>This exam is all about IKEA. Here are the DataFrames you’ll be
working with:</p>
<ol type="1">
<li><code>ikea</code></li>
</ol>
<p>The <code>ikea</code> DataFrame has a row for each ready-to-assemble
IKEA furniture product. The columns are:</p>
<ul>
<li><code>'product'</code> (<code>str</code>): the name of the product,
which includes the product line as the first word, followed by a
description of the product</li>
<li><code>'category'</code> (<code>str</code>): a categorical
description of the type of product</li>
<li><code>'price'</code> (<code>int</code>): the current price of the
product, in dollars</li>
<li><code>'assembly_cost'</code> (<code>int</code>): the additional cost
to have the product assembled, in dollars</li>
<li><code>'packages'</code> (<code>int</code>): the number of packages
in which the product is boxed</li>
</ul>
<p>The first few rows of <code>ikea</code> are shown below, though
<code>ikea</code> has many more rows than pictured.</p>
<center><img src='../assets/images/sp22-final/ikeadf.png' height=250></center>
<p><br></p>
<ol start="2" type="1">
<li><code>offers</code></li>
</ol>
<p>IKEA sometimes runs certain special offers, including coupons, sales,
and promotions. For each offer currently available, the DataFrame
<code>offers</code> has a separate row for each category of products to
which the offer can be applied. The columns are:</p>
<ul>
<li><code>'offer'</code> (<code>str</code>): the name of the offer</li>
<li><code>'category'</code> (<code>str</code>): the category to which
the offer applies</li>
<li><code>'percent_off'</code> (<code>int</code>): the percent discount
when applying this offer to this category</li>
</ul>
<p>The full <code>offers</code> DataFrame is shown below. All rows are
pictured.</p>
<center><img src='../assets/images/sp22-final/offersdf.png' height=270></center>
<p><br></p>
<ol start="3" type="1">
<li><code>app_data</code></li>
</ol>
<p>An IKEA fan created an app where people can log the amount of time it
took them to assemble their IKEA furniture. The DataFrame
<code>app_data</code> has a row for each product build that was logged
on the app. The columns are:</p>
<ul>
<li><code>'product'</code> (<code>str</code>): the name of the product,
which includes the product line as the first word, followed by a
description of the product</li>
<li><code>'category'</code> (<code>str</code>): a categorical
description of the type of product</li>
<li><code>'assembly_time'</code> (<code>str</code>): the amount of time
to assemble the product, formatted as <code>'x hr, y min'</code> where
<code>x</code> and <code>y</code> represent integers, possibly zero</li>
<li><code>'minutes'</code> (<code>int</code>): integer values
representing the number of minutes it took to assemble each product</li>
</ul>
<p>The first few rows of <code>app_data</code> are shown below, though
<code>app_data</code> has many more rows than pictured (5000 rows
total).</p>
<center><img src='../assets/images/sp22-final/appdatadf.png' height=180></center>
<p><br></p>
<p>Assume that we have already run <code>import babypandas as bpd</code>
and <code>import numpy as np</code>.</p>
<p><strong>Tip:</strong> Open this page in another tab, so that it is
easy to refer to this data description as you work through the exam.</p>
<hr />
<h2 id="problem-1">Problem 1</h2>
<p>Complete the expression below so that it evaluates to the name of the
product for which the average assembly cost per package is lowest.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(ikea.assign(assembly_per_package <span class="op">=</span> ___(a)___)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>     .sort_values(by<span class="op">=</span><span class="st">&#39;assembly_per_package&#39;</span>).___(b)___)</span></code></pre></div>
<p><br></p>
<h3 id="problem-1.1">Problem 1.1</h3>
<p>What goes in blank (a)?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_1" aria-expanded="true" aria-controls="collapse1_1">
Click to view the solution.
</button>
</h2>
<div id="collapse1_1" class="accordion-collapse collapse"
aria-labelledby="heading1_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong>
<code>ikea.get('assembly_cost')/ikea.get('packages')</code></p>
<p>This column, as its name suggests, contains the average assembly cost
per package, obtained by dividing the total cost of each product by the
number of packages that product comes in. This code uses the fact that
arithmetic operations between two Series happens element-wise.</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 91%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.2">Problem 1.2</h3>
<p>What goes in blank (b)?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_2" aria-expanded="true" aria-controls="collapse1_2">
Click to view the solution.
</button>
</h2>
<div id="collapse1_2" class="accordion-collapse collapse"
aria-labelledby="heading1_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> <code>get('product').iloc[0]</code></p>
<p>After adding the <code>'assembly_per_package'</code> column and
sorting by that column in the default ascending order, the product with
the lowest <code>'assembly_per_package'</code> will be in the very first
row. To access the name of that product, we need to <code>get</code> the
column containing product names and use <code>iloc</code> to access an
element of that Series by integer position.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 66%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-2">Problem 2</h2>
<p>Complete the expression below so that it evaluates to a DataFrame
indexed by <code>'category'</code> with one column called
<code>'price'</code> containing the median cost of the products in each
category.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ikea.___(a)___.get(___(b)___)</span></code></pre></div>
<p><br></p>
<h3 id="problem-2.1">Problem 2.1</h3>
<p>What goes in blank (a)?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_1" aria-expanded="true" aria-controls="collapse2_1">
Click to view the solution.
</button>
</h2>
<div id="collapse2_1" class="accordion-collapse collapse"
aria-labelledby="heading2_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong>
<code>groupby('category').median()</code></p>
<p>The question prompt says that the resulting DataFrame should be
indexed by <code>'category'</code>, so this is a hint that we may want
to group by <code>'category'</code>. When using <code>groupby</code>, we
need to specify an aggregation function, and since we’re looking for the
median cost of all products in a category, we use the
<code>.median()</code> aggregation function.</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 90%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-2.2">Problem 2.2</h3>
<p>What goes in blank (b)?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_2" aria-expanded="true" aria-controls="collapse2_2">
Click to view the solution.
</button>
</h2>
<div id="collapse2_2" class="accordion-collapse collapse"
aria-labelledby="heading2_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> <code>['price']</code></p>
<p>The question prompt also says that the resulting DataFrame should
have just one column, the <code>'price'</code> column. To keep only
certain columns in a DataFrame, we use <code>.get</code>, passing in a
list of columns to keep. Remember to include the square brackets,
otherwise <code>.get</code> will return a Series instead of a
DataFrame.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 76%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-3">Problem 3</h2>
<p>In the <code>ikea</code> DataFrame, the first word of each string in
the <code>'product'</code> column represents the product line. For
example the HEMNES line of products includes several different products,
such as beds, dressers, and bedside tables.</p>
<p>The code below assigns a new column to the <code>ikea</code>
DataFrame containing the product line associated with each product.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>(ikea.assign(product_line <span class="op">=</span> ikea.get(<span class="st">&#39;product&#39;</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                                .<span class="bu">apply</span>(extract_product_line)))</span></code></pre></div>
<p><br></p>
<h3 id="problem-3.1">Problem 3.1</h3>
<p>What are the input and output types of the
<code>extract_product_line</code> function?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> takes a string as input, returns a string</p></li>
<li><p><input type="radio" disabled="" /> takes a string as input, returns a Series</p></li>
<li><p><input type="radio" disabled="" /> takes a Series as input, returns a string</p></li>
<li><p><input type="radio" disabled="" /> takes a Series as input, returns a Series</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3_1" aria-expanded="true" aria-controls="collapse3_1">
Click to view the solution.
</button>
</h2>
<div id="collapse3_1" class="accordion-collapse collapse"
aria-labelledby="heading3_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> takes a string as input, returns a
string</p>
<p>To use the Series method <code>.apply</code>, we first need a Series,
containing values of any type. We pass in the name of a function to
<code>.apply</code> and essentially, <code>.apply</code> calls the given
function on each value of the Series, producing a Series with the
resulting outputs of those function calls. In this case,
<code>.apply(extract_product_line)</code> is called on the Series
<code>ikea.get('product')</code>, which contains string values. This
means the function <code>extract_product_line</code> must take strings
as inputs. We’re told that the code assigns a new column to the
<code>ikea</code> DataFrame containing the product line associated with
each product, and we know that the product line is a string, as it’s the
first word of the product name. This means the function
<code>extract_product_line</code> must output a string.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 72%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-3.2">Problem 3.2</h3>
<p>Complete the return statement in the
<code>extract_product_line</code> function below.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> extract_product_line(x):</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> _________</span></code></pre></div>
<p>What goes in the blank?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3_2" aria-expanded="true" aria-controls="collapse3_2">
Click to view the solution.
</button>
</h2>
<div id="collapse3_2" class="accordion-collapse collapse"
aria-labelledby="heading3_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> <code>x.split(' ')[0]</code></p>
<p>This function should take as input a string <code>x</code>,
representing a product name, and return the first word of that string,
representing the product line. Since words are separated by spaces, we
want to split the string on the space character <code>' '</code>.</p>
<p>It’s also correct to answer <code>x.split()[0]</code> without
specifying to split on spaces, because the default behavior of the
string <code>.split</code> method is to split on any whitespace, which
includes any number of spaces, tabs, newlines, etc. Since we’re only
extracting the first word, which will be separated from the rest of the
product name by a single space, it’s equivalent to split using single
spaces and using the default of any whitespace. </p>
<hr/>
<h5>Difficulty:
⭐️⭐️</h5>
<p>The average score on this problem was 84%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-4">Problem 4</h2>
<p>Recall that we have the complete set of currently available discounts
in the DataFrame <code>offers</code>.</p>
<p>The DataFrame <code>with_offers</code> is created as follows.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>    (with_offers <span class="op">=</span> ikea.take(np.arange(<span class="dv">6</span>))</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                       .merge(offers, left_on<span class="op">=</span><span class="st">&#39;category&#39;</span>,  </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                                      right_on<span class="op">=</span><span class="st">&#39;eligible_category&#39;</span>))</span></code></pre></div>
<p><br></p>
<h3 id="problem-4.1">Problem 4.1</h3>
<p>How many rows does <code>with_offers</code> have?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4_1" aria-expanded="true" aria-controls="collapse4_1">
Click to view the solution.
</button>
</h2>
<div id="collapse4_1" class="accordion-collapse collapse"
aria-labelledby="heading4_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> 11</p>
<p>First, consider the DataFrame <code>ikea.take(np.arange(6))</code>,
which contains the first six rows of <code>ikea</code>. We know the
contents of these first six rows from the preview of the DataFrame at
the start of this exam. To merge with <code>offers</code>, we need to
look at the <code>'category'</code> of each of these six rows and see
how many rows of <code>offers</code> have the same value in the
<code>'eligible_category'</code> column.</p>
<p>The first row of <code>ikea.take(np.arange(6))</code> is a
<code>'bed'</code>. There are two <code>'bed'</code> offers, so that
will create two rows in the output DataFrame. Similarly, the second row
of <code>ikea.take(np.arange(6))</code> creates two rows in the output
DataFrame because there are two <code>'outdoor'</code> offers. The third
row creates just one row in the output, since there is only one
<code>'dresser'</code> offer. Continuing row-by-row in this way, we can
sum the number of rows created to get: <span class="math display">2+2+1+2+2+2 = 11.</span></p>
<p>Pandas Tutor is a really helpful tool to visualize the merge process.
Below is a color-coded visualization of this merge, generated by the
<a href="https://pandastutor.com/vis.html#code=import%20pandas%20as%20pd%0Aimport%20numpy%20as%20np%0Aimport%20io%0A%0Aikea%20%3D%20pd.DataFrame%28%29.assign%28product%3D%5B%22%C3%84PPLAR%C3%96%20Table%2B6%20armchairs,%20outdoor,%20brown%20stained%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22SUNDS%C3%96%20Table%2B2%20chairs,%20outdoor,%20gray/gray%22,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22GLADSTAD%20Upholstered%20bed,%202%20storage%20boxes,%20Kabusa%20light%20gray,%20Twin%22,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22HEMNES%20Daybed%20frame%20with%203%20drawers,%20white,%20Twin%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22HEMNES%206-drawer%20chest,%20white%20stain,%2042%201/2x51%205/8%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22LAPPLAND%20TV%20storage%20unit,%20white,%2072x15%203/8x57%207/8%22%5D,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20category%3D%5B%22outdoor%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22outdoor%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22bed%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22bed%22,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22dresser%22,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22storage%22%5D,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20price%3D%5B629,%20149,%20254,%20399,%20299,%20179%5D,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20assembly_cost%3D%5B62,%2035,%2098,%2075,%2065,%2056%5D,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20packages%3D%5B7,%203,%201,%201,%201,%201%5D%29.take%28%5B2,%200,%204,%205,%201,%203%5D%29.reset_index%28%29.drop%28columns%3D%22index%22%29%0Aoffers%20%3D%20pd.DataFrame%28%29.assign%28offer%3D%5B%22summer%20sale%22,%20%22summer%20sale%22,%20%22get%20organized%20promo%22,%20%22get%20organized%20promo%22,%20%22snooze%20sale%22,%20%22birthday%20coupon%22,%20%22birthday%20coupon%22,%20%22birthday%20coupon%22%5D,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20eligible_category%20%3D%20%5B%22outdoor%22,%20%22grill%22,%20%22storage%22,%20%22dresser%22,%20%22bed%22,%20%22outdoor%22,%20%22storage%22,%20%22bed%22%5D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20percent_off%3D%5B15,%2015,%2010,%2010,%2020,%2015,%2015,%2015%5D%29%0Aikea.take%28np.arange%286%29%29.merge%28offers,%20left_on%3D'category',%20right_on%3D'eligible_category'%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%0A&amp;d=2022-07-27&amp;lang=py&amp;v=v1">code
here</a>.</p>
<center><img src="../assets/images/sp22-final/mergetutor.jpg" width="80%"/></center>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 41%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-4.2">Problem 4.2</h3>
<p>How many rows of <code>with_offers</code> have a value of 20 in the
<code>'percent_off'</code> column?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4_2" aria-expanded="true" aria-controls="collapse4_2">
Click to view the solution.
</button>
</h2>
<div id="collapse4_2" class="accordion-collapse collapse"
aria-labelledby="heading4_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> 2</p>
<p>There is just one offer with a value of 20 in the
<code>'percent_off'</code> column, and this corresponds to an offer on a
<code>'bed'</code>. Since there are two rows of
<code>ikea.take(np.arange(6))</code> with a <code>'category'</code> of
<code>'bed'</code>, each of these will match with the 20 percent-off
offer, creating two rows of <code>with_offers</code> with a value of 20
in the <code>'percent_off'</code> column.</p>
<p>The
<a href="https://pandastutor.com/vis.html#code=import%20pandas%20as%20pd%0Aimport%20numpy%20as%20np%0Aimport%20io%0A%0Aikea%20%3D%20pd.DataFrame%28%29.assign%28product%3D%5B%22%C3%84PPLAR%C3%96%20Table%2B6%20armchairs,%20outdoor,%20brown%20stained%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22SUNDS%C3%96%20Table%2B2%20chairs,%20outdoor,%20gray/gray%22,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22GLADSTAD%20Upholstered%20bed,%202%20storage%20boxes,%20Kabusa%20light%20gray,%20Twin%22,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22HEMNES%20Daybed%20frame%20with%203%20drawers,%20white,%20Twin%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22HEMNES%206-drawer%20chest,%20white%20stain,%2042%201/2x51%205/8%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22LAPPLAND%20TV%20storage%20unit,%20white,%2072x15%203/8x57%207/8%22%5D,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20category%3D%5B%22outdoor%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22outdoor%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22bed%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22bed%22,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22dresser%22,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22storage%22%5D,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20price%3D%5B629,%20149,%20254,%20399,%20299,%20179%5D,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20assembly_cost%3D%5B62,%2035,%2098,%2075,%2065,%2056%5D,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20packages%3D%5B7,%203,%201,%201,%201,%201%5D%29.take%28%5B2,%200,%204,%205,%201,%203%5D%29.reset_index%28%29.drop%28columns%3D%22index%22%29%0Aoffers%20%3D%20pd.DataFrame%28%29.assign%28offer%3D%5B%22summer%20sale%22,%20%22summer%20sale%22,%20%22get%20organized%20promo%22,%20%22get%20organized%20promo%22,%20%22snooze%20sale%22,%20%22birthday%20coupon%22,%20%22birthday%20coupon%22,%20%22birthday%20coupon%22%5D,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20eligible_category%20%3D%20%5B%22outdoor%22,%20%22grill%22,%20%22storage%22,%20%22dresser%22,%20%22bed%22,%20%22outdoor%22,%20%22storage%22,%20%22bed%22%5D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20percent_off%3D%5B15,%2015,%2010,%2010,%2020,%2015,%2015,%2015%5D%29%0Aikea.take%28np.arange%286%29%29.merge%28offers,%20left_on%3D'category',%20right_on%3D'eligible_category'%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%0A&amp;d=2022-07-27&amp;lang=py&amp;v=v1">visualization
from Pandas Tutor</a> below confirms our answer. The two rows with a
value of 20 in the <code>'percent_off'</code> column are both shown in
rows 0 and 2 of the output DataFrame.</p>
<center><img src="../assets/images/sp22-final/mergetutor.jpg" width="80%"/></center>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 70%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-4.3">Problem 4.3</h3>
<p>If you can use just one offer per product, you’d want to use the one
that saves you the most money, which we’ll call the best offer.</p>
<p><strong>True or False</strong>: The expression below evaluates to a
Series indexed by <code>'product'</code> with the name of the best offer
for each product that appears in the <code>with_offers</code>
DataFrame.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>with_offers.groupby(<span class="st">&#39;product&#39;</span>).<span class="bu">max</span>().get(<span class="st">&#39;offer&#39;</span>)</span></code></pre></div>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> True</p></li>
<li><p><input type="radio" disabled="" /> False</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4_3" aria-expanded="true" aria-controls="collapse4_3">
Click to view the solution.
</button>
</h2>
<div id="collapse4_3" class="accordion-collapse collapse"
aria-labelledby="heading4_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> False</p>
<p>Recall that <code>groupby</code> applies the aggregation function
separately to each column. Applying the <code>.max()</code> aggregate on
the <code>'offer'</code> column for each group gives the name that is
latest in alphabetical order because it contains strings, whereas
applying the <code>.max()</code> aggregate on the
<code>'percent_off'</code> column gives the largest numerical value.
These don’t necessarily go together in <code>with_offers</code>.</p>
<p>In particular, the element of
<code>with_offers.groupby('product').max().get('offer')</code>
corresponding to the LAPPLAND TV storage unit will be
<code>'get_organized_promo'</code>. This happens because the two rows of
<code>with_offers</code> corresponding to the LAPPLAND TV storage unit
have values of <code>'get_organized_promo'</code> and
<code>'birthday coupon'</code>, but <code>'get_organized_promo'</code>
is alphabetically later, so it’s considered the max by
<code>.groupby</code>. However, the <code>'birthday coupon'</code> is
actually a better offer, since it’s 15 percent off, while the
<code>'get_organized_promo'</code> is only 10 percent off. The
expression does not actually find the best offer for each product, but
instead finds the latest alphabetical offer for each product.</p>
<p>We can see this directly by looking at the output of Pandas Tutor
below, generated by
<a href="https://pandastutor.com/vis.html#code=import%20pandas%20as%20pd%0Aimport%20numpy%20as%20np%0Aimport%20io%0A%0Aikea%20%3D%20pd.DataFrame%28%29.assign%28product%3D%5B%22%C3%84PPLAR%C3%96%20Table%2B6%20armchairs,%20outdoor,%20brown%20stained%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22SUNDS%C3%96%20Table%2B2%20chairs,%20outdoor,%20gray/gray%22,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22GLADSTAD%20Upholstered%20bed,%202%20storage%20boxes,%20Kabusa%20light%20gray,%20Twin%22,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22HEMNES%20Daybed%20frame%20with%203%20drawers,%20white,%20Twin%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22HEMNES%206-drawer%20chest,%20white%20stain,%2042%201/2x51%205/8%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22LAPPLAND%20TV%20storage%20unit,%20white,%2072x15%203/8x57%207/8%22%5D,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20category%3D%5B%22outdoor%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22outdoor%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22bed%22,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22bed%22,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22dresser%22,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22storage%22%5D,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20price%3D%5B629,%20149,%20254,%20399,%20299,%20179%5D,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20assembly_cost%3D%5B62,%2035,%2098,%2075,%2065,%2056%5D,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20packages%3D%5B7,%203,%201,%201,%201,%201%5D%29.take%28%5B2,%200,%204,%205,%201,%203%5D%29.reset_index%28%29.drop%28columns%3D%22index%22%29%0Aoffers%20%3D%20pd.DataFrame%28%29.assign%28offer%3D%5B%22summer%20sale%22,%20%22summer%20sale%22,%20%22get%20organized%20promo%22,%20%22get%20organized%20promo%22,%20%22snooze%20sale%22,%20%22birthday%20coupon%22,%20%22birthday%20coupon%22,%20%22birthday%20coupon%22%5D,%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20eligible_category%20%3D%20%5B%22outdoor%22,%20%22grill%22,%20%22storage%22,%20%22dresser%22,%20%22bed%22,%20%22outdoor%22,%20%22storage%22,%20%22bed%22%5D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20percent_off%3D%5B15,%2015,%2010,%2010,%2020,%2015,%2015,%2015%5D%29%0Awith_offers%20%3D%20ikea.take%28np.arange%286%29%29.merge%28offers,%20left_on%3D'category',%20right_on%3D'eligible_category'%29%0Awith_offers.groupby%28'product'%29.max%28%29.get%28'offer'%29%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%0A&amp;d=2022-07-27&amp;lang=py&amp;v=v1">this
code</a>.</p>
<center><img src="../assets/images/sp22-final/maxtutor.jpg" width="80%"/></center>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 69%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-4.4">Problem 4.4</h3>
<p>You want to add a column to <code>with_offers</code> containing the
price after the offer discount is applied.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>with_offers <span class="op">=</span> with_offers.assign(after_price <span class="op">=</span> _________)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>with_offers</span></code></pre></div>
<p>Which of the following could go in the blank? Select all that
apply.</p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> <code>with_offers.get('price') - with_offers.get('percent_off')/100</code></p></li>
<li><p><input type="checkbox" disabled="" /> <code>with_offers.get('price')*(100 - with_offers.get('percent_off'))/100</code></p></li>
<li><p><input type="checkbox" disabled="" /> <code>with_offers.get('price') - with_offers.get('price')*with_offers.get('percent_off')/100</code></p></li>
<li><p><input type="checkbox" disabled="" /> <code>with_offers.get('price')*(100 - with_offers.get('percent_off')/100)</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4_4" aria-expanded="true" aria-controls="collapse4_4">
Click to view the solution.
</button>
</h2>
<div id="collapse4_4" class="accordion-collapse collapse"
aria-labelledby="heading4_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong>
<code>with_offers.get('price')*(100 - with_offers.get('percent_off'))/100</code>,
<code>(with_offers.get('price') - with_offers.get('price')*with_offers.get('percent_off')/100)</code></p>
<p>Notice that all the answer choices use
<code>with_offers.get('price')</code>, which is a Series of prices, and
<code>with_offers.get('percent_off')</code>, which is a Series of
associated percentages off. Using Series arithmetic, which works
element-wise, the goal is to create a Series of prices after the
discount is applied.</p>
<p>For example, the first row of <code>with_offers</code> corresponds to
an item with a price of 254 dollars, and a discount of 20 percent off,
coming from the snooze sale. This means its price after the discount
should be 80 percent of the original value, which is <span class="math inline">254*0.8 = 203.2</span> dollars.</p>
<p>Let’s go through each answer in order, working with this example.</p>
<p>The first answer choice takes the price and subtracts the percent off
divided by 100. For our example, this would compute the discounted price
as <span class="math inline">254 - 20/100 = 253.8</span> dollars, which
is incorrect.</p>
<p>The second answer choice multiplies the price by the quantity 100
minus the percent off, then divides by 100. This works because when we
subtract the percent off from 100 and divide by 100, the result
represents the proportion or fraction of the cost we must pay, and so
multiplying by the price gives the price after the discount. For our
example, this comes out to <span class="math inline">254*(100-20)/100=
203.2</span> dollars, which is correct.</p>
<p>The third answer choice is also correct. This corresponds to taking
the original price and subtracting from it the dollar amount off, which
comes from multiplying the price by the percent off and dividing by 100.
For our example, this would be computed as <span class="math inline">254
- 254*20/100 = 203.2</span> dollars, which is correct.</p>
<p>The fourth answer multiplies the price by the quantity 100 minus the
percent off divided by 100. For our example, this would compute the
discounted price as <span class="math inline">254*(100 - 20/100) =
25349.2</span> dollars, a number that’s nearly one hundred times the
original price!</p>
<p>Therefore, only the second and third answer choices are correct.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 79%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-5">Problem 5</h2>
<p>Recall that an IKEA fan created an app for people to log the amount
of time it takes them to assemble an IKEA product. We have this data in
<code>app_data</code>.</p>
<p><br></p>
<h3 id="problem-5.1">Problem 5.1</h3>
<p>Suppose that when someone downloads the app, the app requires them to
choose a username, which must be different from all other registered
usernames.</p>
<p><strong>True or False</strong>: If <code>app_data</code> had included
a column with the username of the person who reported each product
build, it would make sense to index <code>app_data</code> by
username.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> True</p></li>
<li><p><input type="radio" disabled="" /> False</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_1" aria-expanded="true" aria-controls="collapse5_1">
Click to view the solution.
</button>
</h2>
<div id="collapse5_1" class="accordion-collapse collapse"
aria-labelledby="heading5_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> False</p>
<p>Even though people must have distinct usernames, one person can build
multiple different IKEA products and log their time for each build. So
we don’t expect every row of <code>app_data</code> to have a distinct
username associated with it, and therefore username would not be
suitable as an index, since the index should have distinct values.
</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>The average score on this problem was
52%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-5.2">Problem 5.2</h3>
<p>What does the code below evaluate to?</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>(app_data.take(np.arange(<span class="dv">4</span>))</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>         .sort_values(by<span class="op">=</span><span class="st">&#39;assembly_time&#39;</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>         .get(<span class="st">&#39;assembly_time&#39;</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>         .iloc[<span class="dv">0</span>])</span></code></pre></div>
<p><em>Hint:</em> The <code>'assembly_time'</code> column contains
strings.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_2" aria-expanded="true" aria-controls="collapse5_2">
Click to view the solution.
</button>
</h2>
<div id="collapse5_2" class="accordion-collapse collapse"
aria-labelledby="heading5_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> <code>'1 hr, 45 min'</code></p>
<p>The code says that we should take the first four rows of
<code>app_data</code> (which we can see in the preview at the start of
this exam), sort the rows in ascending order of
<code>'assembly_time'</code>, and extract the very first entry of the
<code>'assembly_time'</code> column. In other words, we have to find the
<code>'assembly_time'</code> value that would be first when sorted in
ascending order. As given in the hint, the <code>'assembly_time'</code>
column contains strings, and strings get sorted alphabetically, so we
are looking for the assembly time, among the first four, that would come
first alphabetically. This is <code>'1 hr, 45 min'</code>.</p>
<p>Note that first alphabetically does not correspond to the least
amount of time. <code>'1 hr, 5 min'</code> represents less time than
<code>'1 hr, 45 min'</code>, but in alphabetical order
<code>'1 hr, 45 min'</code> comes before <code>'1 hr, 5 min'</code>
because both start with the same characters <code>'1 hr, '</code> and
comparing the next character, <code>'4'</code> comes before
<code>'5'</code>. </p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>The average score
on this problem was 46%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-5.3">Problem 5.3</h3>
<p>Complete the implementation of the <code>to_minutes</code> function
below. This function takes as input a string formatted as
<code>'x hr, y min'</code> where <code>x</code> and <code>y</code>
represent integers, and returns the corresponding number of minutes,
<strong>as an integer</strong> (type <code>int</code> in Python).</p>
<p>For example, <code>to_minutes('3 hr, 5 min')</code> should return
185.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> to_minutes(time):</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    first_split <span class="op">=</span> time.split(<span class="st">&#39; hr, &#39;</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    second_split <span class="op">=</span> first_split[<span class="dv">1</span>].split(<span class="st">&#39; min&#39;</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> _________</span></code></pre></div>
<p>What goes in the blank?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_3" aria-expanded="true" aria-controls="collapse5_3">
Click to view the solution.
</button>
</h2>
<div id="collapse5_3" class="accordion-collapse collapse"
aria-labelledby="heading5_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong>
<code>int(first_split[0])*60+int(second_split[0])</code></p>
<p>As the last subpart demonstrated, if we want to compare times, it
doesn’t make sense to do so when times are represented as strings. In
the <code>to_minutes</code> function, we convert a time string into an
integer number of minutes.</p>
<p>The first step is to understand the logic. Every hour contains 60
minutes, so for a time string formatted like <code>x hr, y min'</code>
the total number of minutes comes from multiplying the value of
<code>x</code> by 60 and adding <code>y</code>.</p>
<p>The second step is to understand how to extract the <code>x</code>
and <code>y</code> values from the time string using the string methods
<code>.split</code>. The string method <code>.split</code> takes as
input some separator string and breaks the string into pieces at each
instance of the separator string. It then returns a list of all those
pieces. The first line of code, therefore, creates a list called
<code>first_split</code> containing two elements. The first element,
accessed by <code>first_split[0]</code> contains the part of the time
string that comes before <code>' hr, '</code>. That is,
<code>first_split[0]</code> evaluates to the string <code>x</code>.</p>
<p>Similarly, <code>first_split[1]</code> contains the part of the time
string that comes after <code>' hr, '</code>. So it is formatted like
<code>'y min'</code>. If we split this string again using the separator
of <code>' min'</code>, the result will be a list whose first element is
the string <code>'y'</code>. This list is saved as
<code>second_split</code> so <code>second_split[0]</code> evaluates to
the string <code>y</code>.</p>
<p>Now we have the pieces we need to compute the number of minutes,
using the idea of multiplying the value of <code>x</code> by 60 and
adding <code>y</code>. We have to be careful with data types here, as
the bolded instructions warn us that the function must return an
integer. Right now, <code>first_split[0]</code> evaluates to the string
<code>x</code> and <code>second_split[0]</code> evaluates to the string
<code>y</code>. We need to convert these strings to integers before we
can multiply and add. Once we convert using the <code>int</code>
function, then we can multiply the number of hours by 60 and add the
number of minutes. Therefore, the solution is
<code>int(first_split[0])*60+int(second_split[0])</code>.</p>
<p>Note that failure to convert strings to integers using the
<code>int</code> function would lead to very different behavior. Let’s
take the example time string of <code>'3 hr, 5 min'</code> as input to
our function. With the return statement as
<code>int(first_split[0])*60+int(second_split[0])</code>, the function
would return 185 on this input, as desired. With the return statement as
<code>first_split[0]*60+second_split[0]</code>, the function would
return a string of length 61, looking something like this
<code>'3333...33335'</code>. That’s because the <code>*</code> and
<code>+</code> symbols do have meaning for strings, they’re just
different meanings than when used with integers.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 71%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-5.4">Problem 5.4</h3>
<p>You want to add to <code>app_data</code> a column called
<code>'minutes'</code> with integer values representing the number of
minutes it took to assemble each product.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>app_data <span class="op">=</span> app_data.assign(minutes <span class="op">=</span> _________)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>app_data</span></code></pre></div>
<p>Which of the following should go in the blank?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>to_minutes('assembly_time')</code></p></li>
<li><p><input type="radio" disabled="" /> <code>to_minutes(app_data.get('assembly_time'))</code></p></li>
<li><p><input type="radio" disabled="" /> <code>app_data.get('assembly_time').apply(to_minutes)</code></p></li>
<li><p><input type="radio" disabled="" /> <code>app_data.get('assembly_time').apply(to_minutes(time))</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_4" aria-expanded="true" aria-controls="collapse5_4">
Click to view the solution.
</button>
</h2>
<div id="collapse5_4" class="accordion-collapse collapse"
aria-labelledby="heading5_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong>
<code>app_data.get('assembly_time').apply(to_minutes)</code></p>
<p>We want to create a Series of times in minutes, since it’s to be
added to the <code>app_data</code> DataFrame using <code>.assign</code>.
The correct way to do that is to use <code>.apply</code> so that our
function, which works for one input time string, can be applied
separately to every time string in the <code>'assembly_time'</code>
column of <code>app_data</code>. Remember that <code>.apply</code> takes
as input one parameter, the name of the function to apply, with no
arguments. The correct syntax is
<code>app_data.get('assembly_time').apply(to_minutes)</code>.</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 98%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-6">Problem 6</h2>
<p>We want to use <code>app_data</code> to estimate the average amount
of time it takes to build an IKEA bed (any product in the
<code>'bed'</code> category). Which of the following strategies would be
an appropriate way to estimate this quantity? Select all that apply.</p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> Query to keep only the beds. Then resample with replacement many
times. For each resample, take the mean of the <code>'minutes'</code>
column. Compute a 95% confidence interval based on those means.</p></li>
<li><p><input type="checkbox" disabled="" /> Query to keep only the beds. Group by <code>'product'</code> using
the mean aggregation function. Then resample with replacement many
times. For each resample, take the mean of the <code>'minutes'</code>
column. Compute a 95% confidence interval based on those means.</p></li>
<li><p><input type="checkbox" disabled="" /> Resample with replacement many times. For each resample, first query
to keep only the beds and then take the mean of the
<code>'minutes'</code> column. Compute a 95% confidence interval based
on those means.</p></li>
<li><p><input type="checkbox" disabled="" /> Resample with replacement many times. For each resample, first query
to keep only the beds. Then group by <code>'product'</code> using the
mean aggregation function, and finally take the mean of the
<code>'minutes'</code> column. Compute a 95% confidence interval based
on those means.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading6">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6" aria-expanded="true" aria-controls="collapse6">
Click to view the solution.
</button>
</h2>
<div id="collapse6" class="accordion-collapse collapse"
aria-labelledby="heading6" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Option 1</p>
<p>Only the first answer is correct. This is a question of parameter
estimation, so our approach is to use bootstrapping to create many
resamples of our original sample, computing the average of each
resample. Each resample should always be the same size as the original
sample. The first answer choice accomplishes this by querying first to
keep only the beds, then resampling from the DataFrame of beds only.
This means resamples will have the same size as the original sample.
Each resample’s mean will be computed, so we will have many resample
means from which to construct our 95% confidence interval.</p>
<p>In the second answer choice, we are actually taking the mean twice.
We first average the build times for all builds of the same product when
grouping by product. This produces a DataFrame of different products
with the average build time for each. We then resample from this
DataFrame, computing the average of each resample. But this is a
resample of products, not of product builds. The size of the resample is
the number of unique products in <code>app_data</code>, not the number
of reported product builds in <code>app_data</code>. Further, we get
incorrect results by averaging numbers that are already averages. For
example, if 5 people build bed A and it takes them each 1 hour, and 1
person builds bed B and it takes them 10 hours, the average amount of
time to build a bed is <span class="math inline">\frac{5*1+10}{6} =
2.5</span>. But if we average the times for bed A (1 hour) and average
the times for bed B (5 hours), then average those, we get <span class="math inline">\frac{1+5}{2} = 3</span>, which is not the same.
More generally, grouping is not a part of the bootstrapping process
because we want each data value to be weighted equally.</p>
<p>The last two answer choices are incorrect because they involve
resampling from the full <code>app_data</code> DataFrame before querying
to keep only the beds. This is incorrect because it does not preserve
the sample size. For example, if <code>app_data</code> contains 1000
reported bed builds and 4000 other product builds, then the only
relevant data is the 1000 bed build times, so when we resample, we want
to consider another set of 1000 beds. If we resample from the full
<code>app_data</code> DataFrame, our resample will contain 5000 rows,
but the number of beds will be random, not necessarily 1000. If we query
first to keep only the beds, then resample, our resample will contain
exactly 1000 beds every time. As an added bonus, since we only care
about beds, it’s much faster to resample from a smaller DataFrame of
beds only than it is to resample from all <code>app_data</code> with
plenty of rows we don’t care about.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 71%.</p>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-7">Problem 7</h2>
<p>Laura built the LAPPLAND TV storage unit in 2 hours and 30 minutes,
and she thinks she worked at an average speed. If you want to see
whether the average time to build the TV storage unit is indeed 2 hours
and 30 minutes using the sample of assembly times in
<code>app_data</code>, which of the following tools
<strong>could</strong> you use to help you? Select all that apply.</p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> hypothesis testing</p></li>
<li><p><input type="checkbox" disabled="" /> permutation testing</p></li>
<li><p><input type="checkbox" disabled="" /> bootstrapping</p></li>
<li><p><input type="checkbox" disabled="" /> Central Limit Theorem</p></li>
<li><p><input type="checkbox" disabled="" /> confidence interval</p></li>
<li><p><input type="checkbox" disabled="" /> regression</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading7">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse7" aria-expanded="true" aria-controls="collapse7">
Click to view the solution.
</button>
</h2>
<div id="collapse7" class="accordion-collapse collapse"
aria-labelledby="heading7" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> hypothesis testing, bootstrapping, Central
Limit Theorem, confidence interval</p>
<p>The average time to build the LAPPLAND TV storage unit is an unknown
population parameter. We’re trying to figure out if this parameter could
be equal to the specific value of 2 hours and 30 minutes. We can use the
framework we learned in class to set this up as a hypothesis test via
confidence interval. When we have a null hypothesis of the form “the
parameter equals the specific value” and an alternative hypothesis of
“it does not,” this framework applies, and conducting the hypothesis
test is equivalent to constructing a confidence interval for the
parameter and seeing if the specific value falls in the interval.</p>
<p>There are two ways in which we could construct the confidence
interval. One is through bootstrapping, and the other is through the
Central Limit Theorem, which applies in this case because our statistic
is the mean.</p>
<p>The only listed tools that could not be used here are permutation
testing and regression. Permutation testing is used to determine whether
two samples could have come from the same population, but here we only
have one sample. Permutation testing would be helpful to answer a
question like, “Does it take the same amount of time to assemble the
LAPPLAND TV storage as it does to assemble the HAUGA TV storage
unit?”</p>
<p>Regression is used to predict one numerical quantity based on
another, not to estimate a parameter as we are doing here. Regression
would be appropriate to answer a question like, “How does the assembly
time for the LAPPLAND TV storage unit change with the assembler’s
age?”</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 78%.</p>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-8">Problem 8</h2>
<p>For this question, let’s think of the data in <code>app_data</code>
as a random sample of all IKEA purchases and use it to test the
following hypotheses.</p>
<p><strong>Null Hypothesis</strong>: IKEA sells an equal amount of beds
(category <code>'bed'</code>) and outdoor furniture (category
<code>'outdoor'</code>).</p>
<p><strong>Alternative Hypothesis</strong>: IKEA sells more beds than
outdoor furniture.</p>
<p>The DataFrame <code>app_data</code> contains 5000 rows, which form
our sample. Of these 5000 products,</p>
<ul>
<li>1000 are beds,</li>
<li>1500 are outdoor furniture, and</li>
<li>2500 are in another category.</li>
</ul>
<p><br></p>
<h3 id="problem-8.1">Problem 8.1</h3>
<p>Which of the following <strong>could</strong> be used as the test
statistic for this hypothesis test? Select all that apply.</p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> Among 2500 beds and outdoor furniture items, the absolute difference
between the proportion of beds and the proportion of outdoor
furniture.</p></li>
<li><p><input type="checkbox" disabled="" /> Among 2500 beds and outdoor furniture items, the proportion of
beds.</p></li>
<li><p><input type="checkbox" disabled="" /> Among 2500 beds and outdoor furniture items, the number of beds.</p></li>
<li><p><input type="checkbox" disabled="" /> Among 2500 beds and outdoor furniture items, the number of beds plus
the number of outdoor furniture items.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_1" aria-expanded="true" aria-controls="collapse8_1">
Click to view the solution.
</button>
</h2>
<div id="collapse8_1" class="accordion-collapse collapse"
aria-labelledby="heading8_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Among 2500 beds and outdoor furniture
items, the proportion of beds. <br/> Among 2500 beds and outdoor
furniture items, the number of beds.</p>
<p>Our test statistic needs to be able to distinguish between the two
hypotheses. The first option does not do this, because it includes an
absolute value. If the absolute difference between the proportion of
beds and the proportion of outdoor furniture were large, it could be
because IKEA sells more beds than outdoor furniture, but it could also
be because IKEA sells more outdoor furniture than beds.</p>
<p>The second option is a valid test statistic, because if the
proportion of beds is large, that suggests that the alternative
hypothesis may be true.</p>
<p>Similarly, the third option works because if the number of beds (out
of 2500) is large, that suggests that the alternative hypothesis may be
true.</p>
<p>The fourth option is invalid because out of 2500 beds and outdoor
furniture items, the number of beds plus the number of outdoor furniture
items is always 2500. So the value of this statistic is constant
regardless of whether the alternative hypothesis is true, which means it
does not help you distinguish between the two hypotheses.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 78%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-8.2">Problem 8.2</h3>
<p>Let’s do a hypothesis test with the following test statistic: among
2500 beds and outdoor furniture items, the proportion of outdoor
furniture minus the proportion of beds.</p>
<p>Complete the code below to calculate the observed value of the test
statistic and save the result as <code>obs_diff</code>.</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>    outdoor <span class="op">=</span> (app_data.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;outdoor&#39;</span>) </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    bed <span class="op">=</span> (app_data.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;bed&#39;</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    obs_diff <span class="op">=</span> ( ___(a)___ <span class="op">-</span> ___(b)___ ) <span class="op">/</span> ___(c)___</span></code></pre></div>
<p>The table below contains several Python expressions. Choose the
correct expression to fill in each of the three blanks. Three
expressions will be used, and two will be unused.</p>
<center><img src='../assets/images/sp22-final/q8-table.jpg' width=50%></center>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_2" aria-expanded="true" aria-controls="collapse8_2">
Click to view the solution.
</button>
</h2>
<div id="collapse8_2" class="accordion-collapse collapse"
aria-labelledby="heading8_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Reading the table from top to bottom, the
five expressions should be used in the following blanks: None, (b), (a),
(c), None.</p>
<p>The correct way to define <code>obs_diff</code> is</p>
<div id="cb1" class="sourceCode">
<pre class="sourceCode py"><code class="sourceCode python"><span id="cb1-1"><a aria-hidden="true" href="#cb1-1" tabindex="-1"></a>    outdoor <span class="op">=</span> (app_data.get(<span class="st">'category'</span>)<span class="op">==</span><span class="st">'outdoor'</span>) </span>
<span id="cb1-2"><a aria-hidden="true" href="#cb1-2" tabindex="-1"></a>    bed <span class="op">=</span> (app_data.get(<span class="st">'category'</span>)<span class="op">==</span><span class="st">'bed'</span>)</span>
<span id="cb1-3"><a aria-hidden="true" href="#cb1-3" tabindex="-1"></a>    obs_diff <span class="op">=</span> (app_data[outdoor].shape[<span class="dv">0</span>] <span class="op">-</span> app_data[bed].shape[<span class="dv">0</span>]) <span class="op">/</span> app_data[outdoor <span class="op">|</span> bed].shape[<span class="dv">0</span>]</span></code></pre>
</div>
<p>The first provided line of code defines a boolean Series called
<code>outdoor</code> with a value of <code>True</code> corresponding to
each outdoor furniture item in <code>app_data</code>. Using this as the
condition in a query results in a DataFrame of outdoor furniture items,
and using <code>.shape[0]</code> on this DataFrame gives the number of
outdoor furniture items. So <code>app_data[outdoor].shape[0]</code>
represents the number of outdoor furniture items in
<code>app_data</code>. Similarly, <code>app_data[bed].shape[0]</code>
represents the number of beds in <code>app_data</code>. Likewise,
<code>app_data[outdoor | bed].shape[0]</code> represents the total
number of outdoor furniture items and beds in <code>app_data</code>.
Notice that we need to use an <em>or</em> condition (<code>|</code>) to
get a DataFrame that contains both outdoor furniture and beds.</p>
<p>We are told that the test statistic should be the proportion of
outdoor furniture minus the proportion of beds. Translating this
directly into code, this means the test statistic should be calculated
as</p>
<div id="cb2" class="sourceCode">
<pre class="sourceCode py"><code class="sourceCode python"><span id="cb2-1"><a aria-hidden="true" href="#cb2-1" tabindex="-1"></a>    obs_diff <span class="op">=</span> app_data[outdoor].shape[<span class="dv">0</span>]<span class="op">/</span>app_data[outdoor <span class="op">|</span> bed].shape[<span class="dv">0</span>] <span class="op">-</span> app_data[bed].shape[<span class="dv">0</span>]) <span class="op">/</span> app_data[outdoor <span class="op">|</span> bed].shape[<span class="dv">0</span>]</span></code></pre>
</div>
<p>Since this is a difference of two fractions with the same
denominator, we can equivalently subtract the numerators first, then
divide by the common denominator, using the mathematical fact <span class="math display">\frac{a}{c} - \frac{b}{c} =
\frac{a-b}{c}.</span></p>
<p>This yields the answer</p>
<div id="cb3" class="sourceCode">
<pre class="sourceCode py"><code class="sourceCode python"><span id="cb3-1"><a aria-hidden="true" href="#cb3-1" tabindex="-1"></a>    obs_diff <span class="op">=</span> (app_data[outdoor].shape[<span class="dv">0</span>] <span class="op">-</span> app_data[bed].shape[<span class="dv">0</span>]) <span class="op">/</span> app_data[outdoor <span class="op">|</span> bed].shape[<span class="dv">0</span>]</span></code></pre>
</div>
<p>Notice that this is the <em>observed</em> value of the test statistic
because it’s based on the real-life data in the <code>app_data</code>
DataFrame, not simulated data.</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 90%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-8.3">Problem 8.3</h3>
<p>Which of the following is a valid way to generate one value of the
test statistic according to the null model? Select all that apply.</p>
<p>Way 1:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>multi <span class="op">=</span> np.random.multinomial(<span class="dv">2500</span>, [<span class="fl">0.5</span>,<span class="fl">0.5</span>]) </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>(multi[<span class="dv">0</span>] <span class="op">-</span> multi[<span class="dv">1</span>])<span class="op">/</span><span class="dv">2500</span></span></code></pre></div>
<p>Way 2:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>outdoor <span class="op">=</span> np.random.multinomial(<span class="dv">2500</span>, [<span class="fl">0.5</span>,<span class="fl">0.5</span>])[<span class="dv">0</span>]<span class="op">/</span><span class="dv">2500</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>bed <span class="op">=</span> np.random.multinomial(<span class="dv">2500</span>, [<span class="fl">0.5</span>,<span class="fl">0.5</span>])[<span class="dv">1</span>]<span class="op">/</span><span class="dv">2500</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>outdoor <span class="op">-</span> bed </span></code></pre></div>
<p>Way 3:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>choice <span class="op">=</span> np.random.choice([<span class="dv">0</span>, <span class="dv">1</span>], <span class="dv">2500</span>, replace<span class="op">=</span><span class="va">True</span>) </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>choice_sum <span class="op">=</span> choice.<span class="bu">sum</span>( ) </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>(choice_sum <span class="op">-</span> (<span class="dv">2500</span> <span class="op">-</span> choice_sum))<span class="op">/</span><span class="dv">2500</span></span></code></pre></div>
<p>Way 4:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>choice <span class="op">=</span> np.random.choice([<span class="st">&#39;bed&#39;</span>, <span class="st">&#39;outdoor&#39;</span>], <span class="dv">2500</span>, replace<span class="op">=</span><span class="va">True</span>) </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>bed <span class="op">=</span> np.count_nonzero(choice<span class="op">==</span><span class="st">&#39;bed&#39;</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>outdoor <span class="op">=</span> np.count_nonzero(choice<span class="op">==</span><span class="st">&#39;outdoor&#39;</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>outdoor<span class="op">/</span><span class="dv">2500</span> <span class="op">-</span> bed<span class="op">/</span><span class="dv">2500</span></span></code></pre></div>
<p>Way 5:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>outdoor <span class="op">=</span> (app_data.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;outdoor&#39;</span>) </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>bed <span class="op">=</span> (app_data.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;bed&#39;</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>samp <span class="op">=</span> app_data[outdoor<span class="op">|</span>bed].sample(<span class="dv">2500</span>, replace<span class="op">=</span><span class="va">True</span>) </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>samp[samp.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;outdoor&#39;</span>].shape[<span class="dv">0</span>]<span class="op">/</span><span class="dv">2500</span> <span class="op">-</span>  samp[samp.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;bed&#39;</span>].shape[<span class="dv">0</span>]<span class="op">/</span><span class="dv">2500</span>)</span></code></pre></div>
<p>Way 6:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>outdoor <span class="op">=</span> (app_data.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;outdoor&#39;</span>) </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>bed <span class="op">=</span> (app_data.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;bed&#39;</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>samp <span class="op">=</span> (app_data[outdoor<span class="op">|</span>bed].groupby(<span class="st">&#39;category&#39;</span>).count( ).reset_index( ).sample(<span class="dv">2500</span>, replace<span class="op">=</span><span class="va">True</span>))    </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>samp[samp.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;outdoor&#39;</span>].shape[<span class="dv">0</span>]<span class="op">/</span><span class="dv">2500</span> <span class="op">-</span> samp[samp.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;bed&#39;</span>].shape[<span class="dv">0</span>]<span class="op">/</span><span class="dv">2500</span></span></code></pre></div>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> Way 1</p></li>
<li><p><input type="checkbox" disabled="" /> Way 2</p></li>
<li><p><input type="checkbox" disabled="" /> Way 3</p></li>
<li><p><input type="checkbox" disabled="" /> Way 4</p></li>
<li><p><input type="checkbox" disabled="" /> Way 5</p></li>
<li><p><input type="checkbox" disabled="" /> Way 6</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_3" aria-expanded="true" aria-controls="collapse8_3">
Click to view the solution.
</button>
</h2>
<div id="collapse8_3" class="accordion-collapse collapse"
aria-labelledby="heading8_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Way 1, Way 3, Way 4, Way 6</p>
<p>Let’s consider each way in order.</p>
<p>Way 1 is a correct solution. This code begins by defining a variable
<code>multi</code> which will evaluate to an array with two elements
representing the number of items in each of the two categories, after
2500 items are drawn randomly from the two categories, with each
category being equally likely. In this case, our categories are beds and
outdoor furniture, and the null hypothesis says that each category is
equally likely, so this describes our scenario accurately. We can
interpret <code>multi[0]</code> as the number of outdoor furniture items
and <code>multi[1]</code> as the number of beds when we draw 2500 of
these items with equal probability. Using the same mathematical fact
from the solution to Problem 8.2, we can calculate the difference in
proportions as the difference in number divided by the total, so it is
correct to calculate the test statistic as
<code>(multi[0] - multi[1])/2500</code>.</p>
<p>Way 2 is an incorrect solution. Way 2 is based on a similar idea as
Way 1, except it calls <code>np.random.multinomial</code> twice, which
corresponds to two separate random processes of selecting 2500 items,
each of which is equally likely to be a bed or an outdoor furniture
item. However, is not guaranteed that the number of outdoor furniture
items in the first random selection plus the number of beds in the
second random selection totals 2500. Way 2 calculates the proportion of
outdoor furniture items in one random selection minus the proportion of
beds in another. What we want to do instead is calculate the difference
between the proportion of outdoor furniture and beds in a single random
draw.</p>
<p>Way 3 is a correct solution. Way 3 does the random selection of items
in a different way, using <code>np.random.choice</code>. Way 3 creates a
variable called <code>choice</code> which is an array of 2500 values.
Each value is chosen from the list <code>[0,1]</code> with each of the
two list elements being equally likely to be chosen. Of course, since we
are choosing 2500 items from a list of size 2, we must allow
replacements. We can interpret the elements of <code>choice</code> by
thinking of each 1 as an outdoor furniture item and each 0 as a bed. By
doing so, this random selection process matches up with the assumptions
of the null hypothesis. Then the sum of the elements of
<code>choice</code> represents the total number of outdoor furniture
items, which the code saves as the variable <code>choice_sum</code>.
Since there are 2500 beds and outdoor furniture items in total,
<code>2500 - choice_sum</code> represents the total number of beds.
Therefore, the test statistic here is correctly calculated as the number
of outdoor furniture items minus the number of beds, all divided by the
total number of items, which is 2500.</p>
<p>Way 4 is a correct solution. Way 4 is similar to Way 3, except
instead of using 0s and 1s, it uses the strings <code>'bed'</code> and
<code>'outdoor'</code> in the <code>choice</code> array, so the
interpretation is even more direct. Another difference is the way the
number of beds and number of outdoor furniture items is calculated. It
uses <code>np.count_nonzero</code> instead of sum, which wouldn’t make
sense with strings. This solution calculates the proportion of outdoor
furniture minus the proportion of beds directly.</p>
<p>Way 5 is an incorrect solution. As described in the solution to
Problem 8.2, <code>app_data[outdoor|bed]</code> is a DataFrame
containing just the outdoor furniture items and the beds from
<code>app_data</code>. Based on the given information, we know
<code>app_data[outdoor|bed]</code> has 2500 rows, 1000 of which
correspond to beds and 1500 of which correspond to furniture items. This
code defines a variable <code>samp</code> that comes from sampling this
DataFrame 2500 times with replacement. This means that each row of
<code>samp</code> is equally likely to be any of the 2500 rows of
<code>app_data[outdoor|bed]</code>. The fraction of these rows that are
beds is <span class="math inline">1000/2500 = 2/5</span> and the
fraction of these rows that are outdoor furniture items is <span class="math inline">1500/2500 = 3/5</span>. This means the random
process of selecting rows randomly such that each row is equally likely
does not make each item equally likely to be a bed or outdoor furniture
item. Therefore, this approach does not align with the assumptions of
the null hypothesis.</p>
<p>Way 6 is a correct solution. Way 6 essentially modifies Way 5 to make
beds and outdoor furniture items equally likely to be selected in the
random sample. As in Way 5, the code involves the DataFrame
<code>app_data[outdoor|bed]</code> which contains 1000 beds and 1500
outdoor furniture items. Then this DataFrame is grouped by
<code>'category'</code> which results in a DataFrame indexed by
<code>'category'</code>, which will have only two rows, since there are
only two values of <code>'category'</code>, either
<code>'outdoor'</code> or <code>'bed'</code>. The aggregation function
<code>.count()</code> is irrelevant here. When the index is reset,
<code>'category'</code> becomes a column. Now, randomly sampling from
this two-row grouped DataFrame such that each row is equally likely to
be selected <em>does</em> correspond to choosing items such that each
item is equally likely to be a bed or outdoor furniture item. The last
line simply calculates the proportion of outdoor furniture items minus
the proportion of beds in our random sample drawn according to the null
model.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 59%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-8.4">Problem 8.4</h3>
<p>Suppose we generate 10,000 simulated values of the test statistic
according to the null model and store them in an array called
<code>simulated_diffs</code>. Complete the code below to calculate the
p-value for the hypothesis test.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>    np.count_nonzero(simulated_diffs _________ obs_diff)<span class="op">/</span><span class="dv">10000</span></span></code></pre></div>
<p>What goes in the blank?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>&lt;</code></p></li>
<li><p><input type="radio" disabled="" /> <code>&lt;=</code></p></li>
<li><p><input type="radio" disabled="" /> <code>&gt;</code></p></li>
<li><p><input type="radio" disabled="" /> <code>&gt;=</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_4" aria-expanded="true" aria-controls="collapse8_4">
Click to view the solution.
</button>
</h2>
<div id="collapse8_4" class="accordion-collapse collapse"
aria-labelledby="heading8_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> <code>&lt;=</code></p>
<p>To answer this question, we need to know whether small values or
large values of the test statistic indicate the alternative hypothesis.
The alternative hypothesis is that IKEA sells more beds than outdoor
furniture. Since we’re calculating the proportion of outdoor furniture
minus the proportion of beds, this difference will be small (negative)
if the alternative hypothesis is true. Larger (positive) values of the
test statistic mean that IKEA sells more outdoor furniture than beds. A
value near 0 means they sell beds and outdoor furniture equally.</p>
<p>The p-value is defined as the proportion of simulated test statistics
that are equal to the observed value or more extreme, where extreme
means in the direction of the alternative. In this case, since small
values of the test statistic indicate the alternative hypothesis, the
correct answer is <code>&lt;=</code>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 43%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-9">Problem 9</h2>
<p>You are browsing the IKEA showroom, deciding whether to purchase the
BILLY bookcase or the LOMMARP bookcase. You are concerned about the
amount of time it will take to assemble your new bookcase, so you look
up the assembly times reported in <code>app_data</code>. Thinking of the
data in <code>app_data</code> as a random sample of all IKEA purchases,
you want to perform a permutation test to test the following
hypotheses.</p>
<p><strong>Null Hypothesis</strong>: The assembly time for the BILLY
bookcase and the assembly time for the LOMMARP bookcase come from the
same distribution.</p>
<p><strong>Alternative Hypothesis</strong>: The assembly time for the
BILLY bookcase and the assembly time for the LOMMARP bookcase come from
different distributions.</p>
<p><br></p>
<h3 id="problem-9.1">Problem 9.1</h3>
<p>Suppose we query <code>app_data</code> to keep only the BILLY
bookcases, then average the <code>'minutes'</code> column. In addition,
we separately query <code>app_data</code> to keep only the LOMMARP
bookcases, then average the <code>'minutes'</code> column. If the null
hypothesis is true, which of the following statements about these two
averages is correct?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> These two averages are the same.</p></li>
<li><p><input type="radio" disabled="" /> Any difference between these two averages is due to random
chance.</p></li>
<li><p><input type="radio" disabled="" /> Any difference between these two averages cannot be ascribed to
random chance alone.</p></li>
<li><p><input type="radio" disabled="" /> The difference between these averages is statistically
significant.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading9_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse9_1" aria-expanded="true" aria-controls="collapse9_1">
Click to view the solution.
</button>
</h2>
<div id="collapse9_1" class="accordion-collapse collapse"
aria-labelledby="heading9_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Any difference between these two averages
is due to random chance.</p>
<p>If the null hypothesis is true, this means that the time recorded in
<code>app_data</code> for each BILLY bookcase is a random number that
comes from some distribution, and the time recorded in
<code>app_data</code> for each LOMMARP bookcase is a random number that
comes from <em>the same</em> distribution. Each assembly time is a
random number, so even if the null hypothesis is true, if we take one
person who assembles a BILLY bookcase and one person who assembles a
LOMMARP bookcase, there is no guarantee that their assembly times will
match. Their assembly times might match, or they might be different,
because assembly time is random. Randomness is the only reason that
their assembly times might be different, as the null hypothesis says
there is no systematic difference in assembly times between the two
bookcases. Specifically, it’s not the case that one typically takes
longer to assemble than the other.</p>
<p>With those points in mind, let’s go through the answer choices.</p>
<p>The first answer choice is incorrect. Just because two sets of
numbers are drawn from the same distribution, the numbers themselves
might be different due to randomness, and the averages might also be
different. Maybe just by chance, the people who assembled the BILLY
bookcases and recorded their times in <code>app_data</code> were slower
on average than the people who assembled LOMMARP bookcases. If the null
hypothesis is true, this difference in average assembly time should be
small, but it very likely exists to some degree.</p>
<p>The second answer choice is correct. If the null hypothesis is true,
the only reason for the difference is random chance alone.</p>
<p>The third answer choice is incorrect for the same reason that the
second answer choice is correct. If the null hypothesis is true, any
difference must be explained by random chance.</p>
<p>The fourth answer choice is incorrect. If there is a difference
between the averages, it should be very small and not statistically
significant. In other words, if we did a hypothesis test and the null
hypothesis was true, we should fail to reject the null.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 77%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-9.2">Problem 9.2</h3>
<p>For the permutation test, we’ll use as our test statistic the average
assembly time for BILLY bookcases minus the average assembly time for
LOMMARP bookcases, in minutes.</p>
<p>Complete the code below to generate one simulated value of the test
statistic in a new way, without using
<code>np.random.permutation</code>.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>billy <span class="op">=</span> (app_data.get(<span class="st">&#39;product&#39;</span>) <span class="op">==</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;BILLY Bookcase, white, 31 1/2x11x79 1/2&#39;</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>lommarp <span class="op">=</span> (app_data.get(<span class="st">&#39;product&#39;</span>) <span class="op">==</span> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>          <span class="st">&#39;LOMMARP Bookcase, dark blue-green, 25 5/8x78 3/8&#39;</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>billy_lommarp <span class="op">=</span> app_data[billy<span class="op">|</span>lommarp]</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>billy_mean <span class="op">=</span> np.random.choice(billy_lommarp.get(<span class="st">&#39;minutes&#39;</span>), billy.<span class="bu">sum</span>(), replace<span class="op">=</span><span class="va">False</span>).mean()</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>lommarp_mean <span class="op">=</span> _________</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>billy_mean <span class="op">-</span> lommarp_mean</span></code></pre></div>
<p>What goes in the blank?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>billy_lommarp[lommarp].get('minutes').mean()</code></p></li>
<li><p><input type="radio" disabled="" /> <code>np.random.choice(billy_lommarp.get('minutes'), lommarp.sum(), replace=False).mean()</code></p></li>
<li><p><input type="radio" disabled="" /> <code>billy_lommarp.get('minutes').mean() - billy_mean</code></p></li>
<li><p><input type="radio" disabled="" /> <code>(billy_lommarp.get('minutes').sum() - billy_mean * billy.sum())/lommarp.sum()</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading9_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse9_2" aria-expanded="true" aria-controls="collapse9_2">
Click to view the solution.
</button>
</h2>
<div id="collapse9_2" class="accordion-collapse collapse"
aria-labelledby="heading9_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong>
<code>(billy_lommarp.get('minutes').sum() - billy_mean * billy.sum())/lommarp.sum()</code></p>
<p>The first line of code creates a boolean Series with a True value for
every BILLY bookcase, and the second line of code creates the analogous
Series for the LOMMARP bookcase. The third line queries to define a
DataFrame called <code>billy_lommarp</code> containing all products that
are BILLY or LOMMARP bookcases. In other words, this DataFrame contains
a mix of BILLY and LOMMARP bookcases.</p>
<p>From this point, the way we would normally proceed in a permutation
test would be to use <code>np.random.permutation</code> to shuffle one
of the two relevant columns (either <code>'product'</code> or
<code>'minutes'</code>) to create a random pairing of assembly times
with products. Then we would calculate the average of all assembly times
that were randomly assigned to the label BILLY. Similarly, we’d
calculate the average of all assembly times that were randomly assigned
to the label LOMMARP. Then we’d subtract these averages to get one
simulated value of the test statistic. To run the permutation test, we’d
have to repeat this process many times.</p>
<p>In this problem, we need to generate a simulated value of the test
statistic, without randomly shuffling one of the columns. The code
starts us off by defining a variable called <code>billy_mean</code> that
comes from using <code>np.random.choice</code>. There’s a lot going on
here, so let’s break it down. Remember that the first argument to
<code>np.random.choice</code> is a sequence of values to choose from,
and the second is the number of random choices to make. And we set
<code>replace=False</code>, so that no element that has already been
chosen can be chosen again. Here, we’re making our random choices from
the <code>'minutes'</code> column of <code>billy_lommarp</code>. The
number of choices to make from this collection of values is
<code>billy.sum()</code>, which is the sum of all values in the
<code>billy</code> Series defined in the first line of code. The
<code>billy</code> Series contains True/False values, but in Python,
True counts as 1 and False counts as 0, so <code>billy.sum()</code>
evaluates to the number of True entries in <code>billy</code>, which is
the number of BILLY bookcases recorded in <code>app_data</code>. It
helps to think of the random process like this:</p>
<ol type="1">
<li>Collect all the assembly times of any BILLY or LOMMARP bookcase in a
large bag.</li>
<li>Pull out a random assembly time from this bag.</li>
<li>Repeat step 2, drawing as many times as there are BILLY bookcases,
without replacement.</li>
</ol>
<p>If we think of the random times we draw as being labeled BILLY, then
the remaining assembly times still leftover in the bag represent the
assembly times randomly labeled LOMMARP. In other words, this is a
random association of assembly times to labels (BILLY or LOMMARP), which
is the same thing we usually accomplish by shuffling in a permutation
test.</p>
<p>From here, we can proceed the same way as usual. First, we need to
calculate the average of all assembly times that were randomly assigned
to the label BILLY. This is done for us and stored in
<code>billy_mean</code>. We also need to calculate the average of all
assembly times that were randomly assigned the label LOMMARP. We’ll call
that <code>lommarp_mean</code>. Thinking of picking times out of a large
bag, this is the average of all the assembly times left in the bag. The
problem is there is no easy way to access the assembly times that were
not picked. We can take advantage of the fact that we can easily
calculate the total assembly time of all BILLY and LOMMARP bookcases
together with <code>billy_lommarp.get('minutes').sum()</code>. Then if
we subtract the total assembly time of all bookcases randomly labeled
BILLY, we’ll be left with the total assembly time of all bookcases
randomly labeled LOMMARP. That is,
<code>billy_lommarp.get('minutes').sum() - billy_mean * billy.sum()</code>
represents the total assembly time of all bookcases randomly labeled
LOMMARP. The count of the number of LOMMARP bookcases is given by
<code>lommarp.sum()</code> so the average is
<code>(billy_lommarp.get('minutes').sum() - billy_mean * billy.sum())/lommarp.sum()</code>.</p>
<p>A common wrong answer for this question was the second answer choice,
<code>np.random.choice(billy_lommarp.get('minutes'), lommarp.sum(), replace=False).mean()</code>.
This mimics the structure of how <code>billy_mean</code> was defined so
it’s a natural guess. However, this corresponds to the following random
process, which doesn’t associate each assembly with a unique label
(BILLY or LOMMARP):</p>
<ol type="1">
<li>Collect all the assembly times of any BILLY or LOMMARP bookcase in a
large bag.</li>
<li>Pull out a random assembly time from this bag.</li>
<li>Repeat, drawing as many times as there are BILLY bookcases, without
replacement.</li>
<li>Collect all the assembly times of any BILLY or LOMMARP bookcase in a
large bag.</li>
<li>Pull out a random assembly time from this bag.</li>
<li>Repeat step 5, drawing as many times as there are LOMMARP bookcases,
without replacement.</li>
</ol>
<p>We could easily get the same assembly time once for BILLY and once
for LOMMARP, while other assembly times could get picked for neither.
This process doesn’t split the data into two random groups as
desired.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 12%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-10">Problem 10</h2>
<p>IKEA is piloting a new rewards program where customers can earn free
Swedish meatball plates from the in-store cafe when they purchase
expensive items. Meatball plates are awarded as follows. Assume the item
price is always an integer.</p>
<center>
<table class="table" style="width:30%">
  <thead>
    <tr>
      <th scope="col">Item price</th>
      <th scope="col">Number of meatball plates</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">less than 99 dollars</th>
      <td>0</td>
    </tr>
    <tr>
      <th scope="row">100 to 199 dollars</th>
      <td>1</td>
    </tr>
    <tr>
      <th scope="row">200 dollars or more</th>
      <td>2</td>
    </tr>
  </tbody>
</table>
</center>
<p>We want to implement a function called
<code>calculate_meatball_plates</code> that takes as input an array of
several item prices, corresponding to the individual items purchased in
one transaction, and returns the total number of meatball plates earned
in that transaction.</p>
<p>Select all correct ways of implementing this function from the
options below.</p>
<p>Way 1:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_meatball_plates(prices): </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    meatball_plates <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> price <span class="kw">in</span> prices:</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> price <span class="op">&gt;=</span> <span class="dv">100</span> <span class="kw">and</span> price <span class="op">&lt;=</span> <span class="dv">199</span>:</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>            meatball_plates <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> price <span class="op">&gt;=</span> <span class="dv">200</span>:</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>            meatball_plates <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> meatball_plates</span></code></pre></div>
<p>Way 2:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_meatball_plates(prices): </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    meatball_plates <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> price <span class="kw">in</span> prices:</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> price <span class="op">&gt;=</span> <span class="dv">200</span>:</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>            meatball_plates <span class="op">=</span> meatball_plates <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> price <span class="op">&gt;=</span> <span class="dv">100</span>:</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>            meatball_plates <span class="op">=</span> meatball_plates <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> meatball_plates</span></code></pre></div>
<p>Way 3:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_meatball_plates(prices): </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.count_nonzero(prices <span class="op">&gt;=</span> <span class="dv">100</span>) <span class="op">+</span> np.count_nonzero(prices <span class="op">&gt;=</span> <span class="dv">200</span>)</span></code></pre></div>
<p>Way 4:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_meatball_plates(prices): </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (prices <span class="op">&gt;=</span> <span class="dv">200</span>).<span class="bu">sum</span>()<span class="op">*</span><span class="dv">2</span> <span class="op">+</span> ((<span class="dv">100</span> <span class="op">&lt;=</span> prices) <span class="op">&amp;</span> (prices <span class="op">&lt;=</span> <span class="dv">199</span>)).<span class="bu">sum</span>()<span class="op">*</span><span class="dv">1</span></span></code></pre></div>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> Way 1</p></li>
<li><p><input type="checkbox" disabled="" /> Way 2</p></li>
<li><p><input type="checkbox" disabled="" /> Way 3</p></li>
<li><p><input type="checkbox" disabled="" /> Way 4</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading10">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10" aria-expanded="true" aria-controls="collapse10">
Click to view the solution.
</button>
</h2>
<div id="collapse10" class="accordion-collapse collapse"
aria-labelledby="heading10" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Way 2, Way 3, Way 4</p>
<p>Way 1 does not work because it resets the variable
<code>meatball_plates</code> with each iteration instead of adding to a
running total. At the end of the loop, <code>meatball_plates</code>
evaluates to the number of meatball plates earned by the last price in
<code>prices</code> instead of the total number of meatball plates
earned by all purchases. A quick way to see this is incorrect is to
notice that the only possible return values are 0, 1, and 2, but it’s
possible to earn more than 2 meatball plates with enough purchases.</p>
<p>Way 2 works. As in Way 1, it loops through each price in
<code>prices</code>. When evaluating each price, it checks if the price
is at least 200 dollars, and if so, increments the total number of
meatball plates by 1. Then it checks if the price is at least 100
dollars, and if so, increments the count of meatball plates again. This
works because for prices that are at least 200 dollars, both
<code>if</code> conditions are satisfied, so the meatball plate count
goes up by 2, and for prices that are between 100 and 199 dollars, only
one of the <code>if</code> conditions is satisfied, so the count
increases by 1. For prices less than 100 dollars, the count doesn’t
change.</p>
<p>Way 3 works without using any iteration at all. It uses
<code>np.count_nonzero</code> to count the number of prices that are at
least 100 dollars, then it similarly counts the number of prices that
are at least 200 dollars and adds these together. This works because
prices that are at least 200 dollars are also at least 100 dollars, so
they contribute 2 to the total. Prices that are between 100 and 199
contribute 1, and prices below 100 dollars don’t contribute at all.</p>
<p>Way 4 also works and calculates the number of meatball plates without
iteration. The expression <code>prices &gt;= 200</code> evaluates to a
boolean Series with True for each price that is at least 200 dollars.
Summing this Series gives a count of the number of prices that are at
least 200 dollars, since True counts as 1 and False counts as 0 in
Python. Each such purchase earns 2 meatball plates, so this count of
purchases 200 dollars and up gets multiplied by 2. Similarly,
<code>(100 &lt;= prices) &amp; (prices &lt;= 199)</code> is a Series
containing True for each price that is at least 100 dollars and at most
199 dollars, and the sum of that Series is the number of prices between
100 and 199 dollars. Each such purchase contributes one additional
meatball plate, so the number of such purchases gets multiplied by 1 and
added to the total.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 64%.</p>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-11">Problem 11</h2>
<p>The histogram below shows the distribution of the number of products
sold per day throughout the last 30 days, for two different IKEA
products: the KURA reversible bed, and the ANTILOP highchair.</p>
<center><img src='../assets/images/sp22-final/overlaidhist.png' width=40%></center>
<p><br></p>
<h3 id="problem-11.1">Problem 11.1</h3>
<p>For how many days did IKEA sell between 20 (inclusive) and 30
(exclusive) KURA reversible beds per? Give an <strong>integer</strong>
answer or write “not enough information”, but <strong>not
both</strong>.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading11_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse11_1" aria-expanded="true" aria-controls="collapse11_1">
Click to view the solution.
</button>
</h2>
<div id="collapse11_1" class="accordion-collapse collapse"
aria-labelledby="heading11_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> 15</p>
<p>Remember that for a density histogram, the proportion of data that
falls in a certain range is the area of the histogram between those
bounds. So to find the proportion of days for which IKEA sold between 20
and 30 KURA reversible beds, we need to find the total area of the bins
<span class="math inline">[20, 25)</span> and <span class="math inline">[25, 30)</span>. Note that the left endpoint of each
bin is included and the right bin is not, which works perfectly with
needing to include 20 and exclude 30.</p>
<p>The bin <span class="math inline">[20, 25)</span> has a width of 5
and a height of about 0.047. The bin <span class="math inline">[25,
30)</span> has a width of 5 and a height of about 0.053. The heights are
approximate by eye, but it appears that the <span class="math inline">[20, 25)</span> bin is below the horizontal line at
0.05 by the same amount which the <span class="math inline">[25,
30)</span> is above that line. Noticing this spares us some annoying
arithmetic and we can calculate the total area as</p>
<p><span class="math display">\begin{aligned}
        \text{total area} &amp;= 5*0.047 + 5*0.053 \\
                    &amp;= 5*(0.047 + 0.053) \\
                    &amp;= 5*(0.1) \\
                    &amp;= 0.5
\end{aligned}</span></p>
<p>Therefore, the proportion of days where IKEA sold between 20 and 30
KURA reversible beds is 0.5. Since there are 30 days represented in this
histogram, that corresponds to 15 days.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 54%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-11.2">Problem 11.2</h3>
<p>For how many days did IKEA sell more KURA reversible beds than
ANTILOP highchairs? Give an <strong>integer</strong> answer or write
“not enough information”, but <strong>not both</strong>.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading11_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse11_2" aria-expanded="true" aria-controls="collapse11_2">
Click to view the solution.
</button>
</h2>
<div id="collapse11_2" class="accordion-collapse collapse"
aria-labelledby="heading11_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> not enough information</p>
<p>We cannot compare the number of KURA reversible beds sold on a
certain day with the number of ANTILOP highchairs sold on the same day.
These are two separate histograms shown on the same axes, but we have no
way to associate data from one histogram with data from the other. For
example, it’s possible that on some days, IKEA sold the same number of
KURA reversible beds and ANTILOP highchairs. It’s also possible from
this histogram that this never happened on any day.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 54%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-11.3">Problem 11.3</h3>
<p>Determine the relative order of the three quantities below.</p>
<ol type="1">
<li>The number of days for which IKEA sold at least 35 ANTILOP
highchairs.</li>
<li>The number of days for which IKEA sold less than 25 ANTILOP
highchairs.</li>
<li>The number of days for which IKEA sold between 10 (inclusive) and 20
(exclusive) KURA reversible beds.</li>
</ol>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> (1)&lt;(2)&lt;(3)</p></li>
<li><p><input type="radio" disabled="" /> (1)&lt;(3)&lt;(2)</p></li>
<li><p><input type="radio" disabled="" /> (2)&lt;(1)&lt;(3)</p></li>
<li><p><input type="radio" disabled="" /> (2)&lt;(3)&lt;(1)</p></li>
<li><p><input type="radio" disabled="" /> (3)&lt;(1)&lt;(2)</p></li>
<li><p><input type="radio" disabled="" /> (3)&lt;(2)&lt;(1)</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading11_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse11_3" aria-expanded="true" aria-controls="collapse11_3">
Click to view the solution.
</button>
</h2>
<div id="collapse11_3" class="accordion-collapse collapse"
aria-labelledby="heading11_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> (2)&lt;(3)&lt;(1)</p>
<p>We can calculate the exact value of each of the quantities:</p>
<ol type="1">
<li><p>To find the number of days for which IKEA sold at least 35
ANTILOP highchairs, we need to find the total area of the rightmost
three bins of the ANTILOP distribution. Doing a similar calculation to
the one we did in Problem 11.1, <span class="math display">\begin{aligned}
     \text{total area} &amp;= 5*0.053 + 5*0.02 + 5*0.007 \\
                 &amp;= 5*(0.08) \\
                 &amp;= 0.4
\end{aligned}</span> This is a proportion of 0.4 out of 30 days total,
which corresponds to <strong>12 days</strong>.</p></li>
<li><p>To find the number of days for which IKEA sold less than 25
ANTILOP highchairs, we need to find the total area of the leftmost four
bins of the ANTILOP distribution. We can do this in the same way as
before, but to avoid the math, we can also use the information we’ve
already figured out to make this easier. In Problem 11.1, we learned
that the KURA distribution included 15 days total in the two bins <span class="math inline">[20, 25)</span> and <span class="math inline">[25,
30)</span>. Since the <span class="math inline">[25, 30)</span> bin is
just slightly taller than the <span class="math inline">[20, 25)</span>
bin, these 15 days must be split as 7 in the <span class="math inline">[20, 25)</span> bin and 8 in the <span class="math inline">[25, 30)</span> bin. Once we know the tallest bin
corresponds to 8 days, we can figure out the number of days
corresponding to every other bin just by eye. Anything that’s half as
tall as the tallest bin, for example, represents 4 days. The red lines
on the histogram below each represent 1 day, so we can easily count the
number of days in each bin.
</p><center><img src="../assets/images/sp22-final/overlaidhist-red.png" width="40%"/></center>
Therefore summing up the number of days from the 4 bins for which IKEA
sold less than 25 ANTILOP highchairs gives <span class="math inline">0 +
3 + 0 + 5 = 8</span>. Altogether, that’s <strong>8
days</strong>.</li>
<li><p>To find the number of days for which IKEA sold between 10 and 20
KURA reversible beds, we simply need to add the number of days in the
<span class="math inline">[10, 15)</span> and <span class="math inline">[15, 20)</span> bins of the KURA distribution. Using
the histogram with the red lines makes this easy to calculate as <span class="math inline">4+5</span>, or <strong>9 days</strong>.</p></li>
</ol>
<p>Therefore since 8&lt;9&lt;12, the correct answer is
(2)&lt;(3)&lt;(1).</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 81%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-12">Problem 12</h2>
<p>An IKEA chair designer is experimenting with some new ideas for
armchair designs. She has the idea of making the arm rests shaped like
bell curves, or normal distributions. A cross-section of the armchair
design is shown below.</p>
<center><img src='../assets/images/sp22-final/armchair.png' width=80%></center>
<p><br></p>
<p>This was created by taking the portion of the standard normal
distribution from <span class="math inline">z=-4</span> to <span
class="math inline">z=4</span> and adjoining two copies of it, one
centered at <span class="math inline">z=0</span> and the other centered
at <span class="math inline">z=8</span>. Let’s call this shape the
armchair curve.</p>
<p>Since the area under the standard normal curve from <span
class="math inline">z=-4</span> to <span class="math inline">z=4</span>
is approximately 1, the total area under the armchair curve is
approximately 2.</p>
<p>Complete the implementation of the two functions below:</p>
<ol type="1">
<li><code>area_left_of(z)</code> should return the area under the
armchair curve to the left of <code>z</code>, assuming
<code>-4 &lt;= z &lt;= 12</code>, and</li>
<li><code>area_between(x, y)</code> should return the area under the
armchair curve between <code>x</code> and <code>y</code>, assuming
<code>-4 &lt;= x &lt;= y &lt;= 12</code>.</li>
</ol>
<div class="sourceCode" id="cb24"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> scipy</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> area_left_of(z):</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">&#39;&#39;&#39;Returns the area under the armchair curve to the left of z.</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co">       Assume -4 &lt;= z &lt;= 12&#39;&#39;&#39;</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> ___(a)___: </span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> ___(b)___ </span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> scipy.stats.norm.cdf(z)</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> area_between(x, y):</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">&#39;&#39;&#39;Returns the area under the armchair curve between x and y. </span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co">    Assume -4 &lt;= x &lt;= y &lt;= 12.&#39;&#39;&#39;</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ___(c)___</span></code></pre></div>
<p><br></p>
<h3 id="problem-12.1">Problem 12.1</h3>
<p>What goes in blank (a)?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading12_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse12_1" aria-expanded="true" aria-controls="collapse12_1">
Click to view the solution.
</button>
</h2>
<div id="collapse12_1" class="accordion-collapse collapse"
aria-labelledby="heading12_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> <code>z&gt;4</code> or
<code>z&gt;=4</code></p>
<p>The body of the function contains an <code>if</code> statement
followed by a <code>return</code> statement, which executes only when
the <code>if</code> condition is false. In that case, the function
returns <code>scipy.stats.norm.cdf(z)</code>, which is the area under
the standard normal curve to the left of <code>z</code>. When
<code>z</code> is in the left half of the armchair curve, the area under
the armchair curve to the left of <code>z</code> is the area under the
standard normal curve to the left of <code>z</code> because the left
half of the armchair curve is a standard normal curve, centered at 0. So
we want to execute the <code>return</code> statement in that case, but
not if <code>z</code> is in the right half of the armchair curve, since
in that case the area to the left of <code>z</code> under the armchair
curve should be more than 1, and <code>scipy.stats.norm.cdf(z)</code>
can never exceed 1. This means the <code>if</code> condition needs to
correspond to <code>z</code> being in the right half of the armchair
curve, which corresponds to <code>z&gt;4</code> or <code>z&gt;=4</code>,
either of which is a correct solution.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 72%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-12.2">Problem 12.2</h3>
<p>What goes in blank (b)?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading12_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse12_2" aria-expanded="true" aria-controls="collapse12_2">
Click to view the solution.
</button>
</h2>
<div id="collapse12_2" class="accordion-collapse collapse"
aria-labelledby="heading12_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong>
<code>1+scipy.stats.norm.cdf(z-8)</code></p>
<p>This blank should contain the value we want to return when
<code>z</code> is in the right half of the armchair curve. In this case,
the area under the armchair curve to the left of <code>z</code> is the
sum of two areas:</p>
<ol type="1">
<li>the area under the entire left half of the armchair curve, which is
1, and</li>
<li>the area under the portion of the right half of the armchair curve
that falls to the left of <code>z</code>.</li>
</ol>
<p>Since the right half of the armchair curve is just a standard normal
curve that’s been shifted to the right by 8 units, the area under that
normal curve to the left of <code>z</code> is the same as the area to
the left of <code>z-8</code> on the standard normal curve that’s
centered at 0. Adding the portion from the left half and the right half
of the armchair curve gives
<code>1+scipy.stats.norm.cdf(z-8)</code>.</p>
<p>For example, if we want to find the area under the armchair curve to
the left of 9, we need to total the yellow and blue areas in the image
below.</p>
<center><img src="../assets/images/sp22-final/armchair-shaded.png" width="80%"/></center>
<p>The yellow area is 1 and the blue area is the same as the area under
the standard normal curve (or the left half of the armchair curve) to
the left of 1 because 1 is the point on the left half of the armchair
curve that corresponds to 9 on the right half. In general, we need to
subtract 8 from a value on the right half to get the corresponding value
on the left half.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 54%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-12.3">Problem 12.3</h3>
<p>What goes in blank (c)?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading12_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse12_3" aria-expanded="true" aria-controls="collapse12_3">
Click to view the solution.
</button>
</h2>
<div id="collapse12_3" class="accordion-collapse collapse"
aria-labelledby="heading12_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong>
<code>area_left_of(y) - area_left_of(x)</code></p>
<p>In general, we can find the area under <em>any</em> curve between
<code>x</code> and <code>y</code> by taking the area under the curve to
the left of <code>y</code> and subtracting the area under the curve to
the left of <code>x</code>. Since we have a function to find the area to
the left of any given point in the armchair curve, we just need to call
that function twice with the appropriate inputs and subtract the
result.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 60%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-13">Problem 13</h2>
<p>Suppose you have correctly implemented the function
<code>area_between(x, y)</code> so that it returns the area under the
armchair curve between <code>x</code> and <code>y</code>, assuming the
inputs satisfy <code>-4 &lt;= x &lt;= y &lt;= 12</code>.</p>
<p><strong>Note:</strong> You can still do this question, even if you
didn’t know how to do the previous one.</p>
<p><br></p>
<h3 id="problem-13.1">Problem 13.1</h3>
<p>What is the approximate value of
<code>area_between(-2, 10)</code>?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> 1.9</p></li>
<li><p><input type="radio" disabled="" /> 1.95</p></li>
<li><p><input type="radio" disabled="" /> 1.975</p></li>
<li><p><input type="radio" disabled="" /> 2</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading13_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse13_1" aria-expanded="true" aria-controls="collapse13_1">
Click to view the solution.
</button>
</h2>
<div id="collapse13_1" class="accordion-collapse collapse"
aria-labelledby="heading13_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> 1.95</p>
<p>The area we want to find is shown below in two colors. We can find
the area in each half of the armchair curve separately and add the
results.</p>
<center><img src="../assets/images/sp22-final/armchair-between-1.png" width="80%"/></center>
<p>For the yellow area, we know that the area within 2 standard
deviations of the mean on the standard normal curve is 0.95. The
remaining 0.05 is split equally on both sides, so the yellow area is
0.975.</p>
<p>The blue area is the same by symmetry so the total shaded area is
<span class="math inline">0.975*2 = 1.95</span>.</p>
<p>Equivalently, we can use the fact that the total area under the
armchair curve is 2, and the amount of unshaded area on either side is
0.025, so the total shaded area is <span class="math inline">2 -
(0.025*2) = 1.95.</span></p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 76%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-13.2">Problem 13.2</h3>
<p>What is the approximate value of
<code>area_between(0.37, 8.37)</code>?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> 0.68</p></li>
<li><p><input type="radio" disabled="" /> 0.95</p></li>
<li><p><input type="radio" disabled="" /> 1</p></li>
<li><p><input type="radio" disabled="" /> 1.5</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading13_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse13_2" aria-expanded="true" aria-controls="collapse13_2">
Click to view the solution.
</button>
</h2>
<div id="collapse13_2" class="accordion-collapse collapse"
aria-labelledby="heading13_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> 1</p>
<p>The area we want to find is shown below in two colors.</p>
<center><img src="../assets/images/sp22-final/armchair-between-2.png" width="80%"/></center>
<p>As we saw in Problem 12.2, the point on the left half of the armchair
curve that corresponds to 8.37 is 0.37. This means that if we move the
blue area from the right half of the armchair curve to the left half, it
will fit perfectly, as shown below.</p>
<center><img src="../assets/images/sp22-final/armchair-between-3.png" width="80%"/></center>
<p>Therefore the total of the blue and yellow areas is the same as the
area under one standard normal curve, which is 1.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 76%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-14">Problem 14</h2>
<p>An IKEA employee has access to a data set of the purchase amounts for
40,000 customer transactions. This data set is roughly normally
distributed with mean 150 dollars and standard deviation 25 dollars.</p>
<p><br></p>
<h3 id="problem-14.1">Problem 14.1</h3>
<p>Why is the distribution of purchase amounts roughly normal?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> because of the Central Limit Theorem</p></li>
<li><p><input type="radio" disabled="" /> for some other reason</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading14_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse14_1" aria-expanded="true" aria-controls="collapse14_1">
Click to view the solution.
</button>
</h2>
<div id="collapse14_1" class="accordion-collapse collapse"
aria-labelledby="heading14_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> for some other reason</p>
<p>The data that we have is a sample of purchase amounts. It is not a
sample mean or sample sum, so the Central Limit Theorem does not apply.
The data just naturally happens to be roughly normally distributed, like
human heights, for example.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 42%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-14.2">Problem 14.2</h3>
<p>Shiv spends 300 dollars at IKEA. How would we describe Shiv’s
purchase in standard units?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> 0 standard units</p></li>
<li><p><input type="radio" disabled="" /> 2 standard units</p></li>
<li><p><input type="radio" disabled="" /> 4 standard units</p></li>
<li><p><input type="radio" disabled="" /> 6 standard units</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading14_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse14_2" aria-expanded="true" aria-controls="collapse14_2">
Click to view the solution.
</button>
</h2>
<div id="collapse14_2" class="accordion-collapse collapse"
aria-labelledby="heading14_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> 6 standard units</p>
<p>To standardize a data value, we subtract the mean of the distribution
and divide by the standard deviation:</p>
<p><span class="math display">\begin{aligned}
        \text{standard units} &amp;= \frac{300 - 150}{25} \\
                    &amp;= \frac{150}{25} \\
                    &amp;= 6
\end{aligned}</span></p>
<p>A more intuitive way to think about standard units is the number of
standard deviations above the mean (where negative means below the
mean). Here, Shiv spent 150 dollars more than average. One standard
deviation is 25 dollars, so 150 dollars is six standard deviations.</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 97%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-14.3">Problem 14.3</h3>
<p>Give the endpoints of the CLT-based 95% confidence interval for the
mean IKEA purchase amount, based on this data.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading14_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse14_3" aria-expanded="true" aria-controls="collapse14_3">
Click to view the solution.
</button>
</h2>
<div id="collapse14_3" class="accordion-collapse collapse"
aria-labelledby="heading14_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> 149.75 and 150.25 dollars</p>
<p>The Central Limit Theorem tells us about the distribution of the
sample mean purchase amount. That’s not the distribution the employee
has, but rather a distribution that shows how the mean of a
<em>different</em> sample of 40,000 purchases might have turned out.
Specifically, we know the following information about the distribution
of the sample mean.</p>
<ol type="1">
<li>It is roughly normally distributed.</li>
<li>Its mean is about 150 dollars, the same as the mean of the
employee’s sample.</li>
<li>Its standard deviation is about <span class="math inline">\frac{\text{sample standard
deviation}}{\sqrt{\text{sample size}}}=\frac{25}{\sqrt{40000}} =
\frac{25}{200} = \frac{1}{8}</span>.</li>
</ol>
<p>Since the distribution of the sample mean is roughly normal, we can
find a 95% confidence interval for the sample mean by stepping out two
standard deviations from the center, using the fact that 95% of the area
of a normal distribution falls within 2 standard deviations of the mean.
Therefore the endpoints of the CLT-based 95% confidence interval for the
mean IKEA purchase amount are</p>
<ul>
<li><span class="math inline">150 - 2*\frac{1}{8} = 149.75</span>
dollars, and</li>
<li><span class="math inline">150 + 2*\frac{1}{8} = 150.25</span>
dollars.</li>
</ul>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 36%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-15">Problem 15</h2>
<p>There are 52 IKEA locations in the United States, and there are 50
states.</p>
<p>Which of the following describes how to calculate the total variation
distance between the distribution of IKEA locations by state and the
uniform distribution?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> For each IKEA location, take the absolute difference between 1/50 and
the number of IKEAs in the same state divided by the total number of
IKEA locations. Sum these values across all locations and divide by
two.</p></li>
<li><p><input type="radio" disabled="" /> For each IKEA location, take the absolute difference between the
number of IKEAs in the same state and the average number of IKEAs in
each state. Sum these values across all locations and divide by two.</p></li>
<li><p><input type="radio" disabled="" /> For each state, take the absolute difference between 1/50 and the
number of IKEAs in that state divided by the total number of IKEA
locations. Sum these values across all states and divide by two.</p></li>
<li><p><input type="radio" disabled="" /> For each state, take the absolute difference between the number of
IKEAs in that state and the average number of IKEAs in each state. Sum
these values across all states and divide by two.</p></li>
<li><p><input type="radio" disabled="" /> None of the above.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading15">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse15" aria-expanded="true" aria-controls="collapse15">
Click to view the solution.
</button>
</h2>
<div id="collapse15" class="accordion-collapse collapse"
aria-labelledby="heading15" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> For each state, take the absolute
difference between 1/50 and the number of IKEAs in that state divided by
the total number of IKEA locations. Sum these values across all states
and divide by two.</p>
<p>We’re looking at the distribution across states. Since there are 50
states, the uniform distribution would correspond to having a fraction
of 1/50 of the IKEA locations in each state. We can picture this as a
sequence with 50 entries that are all the same: <span class="math display">(1/50, 1/50, 1/50, 1/50, \dots)</span></p>
<p>We want to compare this to the actual distribution of IKEAs across
states, which we can think of as a sequence with 50 entries,
representing the 50 states, but where each entry is the proportion of
IKEA locations in a given state. For example, maybe the distribution
starts out like this: <span class="math display">(3/52, 1/52, 0/52,
1/52, \dots)</span> We can interpret each entry as the number of IKEAs
in a state divided by the total number of IKEA locations. Note that this
has nothing to do with the average number of IKEA locations in each
state, which is 52/50.</p>
<p>The way we take the TVD of two distributions is to subtract the
distributions, take the absolute value, sum up the values, and divide by
2. Since the entries represent states, this process aligns with the
given answer.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 30%.</p>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-16">Problem 16</h2>
<p>The HAUGA bedroom furniture set includes two items, a bed frame and a
bedside table. Suppose the amount of time it takes someone to assemble
the bed frame is a random quantity drawn from the probability
distribution below.</p>
<center>
<table class="table" style="width:30%">
  <thead>
    <tr>
      <th scope="col">Time to assemble bed frame</th>
      <th scope="col">Probability</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">10 minutes</th>
      <td>0.1</td>
    </tr>
    <tr>
      <th scope="row">20 minutes</th>
      <td>0.4</td>
    </tr>
    <tr>
      <th scope="row">30 minutes</th>
      <td>0.5</td>
    </tr>
  </tbody>
</table>
</center>
<p>Similarly, the time it takes someone to assemble the bedside table is
a random quantity, independent of the time it takes them to assemble the
bed frame, drawn from the probability distribution below.</p>
<center>
<table class="table" style="width:30%">
  <thead>
    <tr>
      <th scope="col">Time to assemble bedside table</th>
      <th scope="col">Probability</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">30 minutes</th>
      <td>0.3</td>
    </tr>
    <tr>
      <th scope="row">40 minutes</th>
      <td>0.4</td>
    </tr>
    <tr>
      <th scope="row">50 minutes</th>
      <td>0.3</td>
    </tr>
  </tbody>
</table>
</center>
<p><br></p>
<h3 id="problem-16.1">Problem 16.1</h3>
<p>What is the probability that Stella assembles the bed frame in 10
minutes if we know it took her less than 30 minutes to assemble? Give
your answer as a decimal between 0 and 1.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading16_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse16_1" aria-expanded="true" aria-controls="collapse16_1">
Click to view the solution.
</button>
</h2>
<div id="collapse16_1" class="accordion-collapse collapse"
aria-labelledby="heading16_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> 0.2</p>
<p>We want to find the probability that Stella assembles the bed frame
in 10 minutes, given that she assembles it in less than 30 minutes. The
multiplication rule can be rearranged to find the conditional
probability of one event given another.</p>
<p><span class="math display">\begin{aligned}
        P(A \text{ and } B) &amp;= P(A \text{ given } B)*P(B)\\
        P(A \text{ given } B) &amp;= \frac{P(A \text{ and } B)}{P(B)}
\end{aligned}</span></p>
<p>Let’s, therefore, define events <span class="math inline">A</span>
and <span class="math inline">B</span> as follows:</p>
<ul>
<li><span class="math inline">A</span> is the event that Stella
assembles the bed frame in 10 minutes.</li>
<li><span class="math inline">B</span> is the event that Stella
assembles the bed frame in less than 30 minutes.</li>
</ul>
<p>Since 10 minutes is less than 30 minutes, <span class="math inline">A
\text{ and } B</span> is the same as <span class="math inline">A</span>
in this case. Therefore, <span class="math inline">P(A \text{ and } B) =
P(A) = 0.1</span>.</p>
<p>Since there are only two ways to complete the bed frame in less than
30 minutes (10 minutes or 20 minutes), it is straightforward to find
<span class="math inline">P(B)</span> using the addition rule <span class="math inline">P(B) = 0.1 + 0.4</span>. The addition rule can be
used here because assembling the bed frame in 10 minutes and assembling
the bed frame in 20 minutes are mutually exclusive. We could
alternatively find <span class="math inline">P(B)</span> using the
complement rule, since the only way not to complete the bed frame in
less than 30 minutes is to complete it in exactly 30 minutes, which
happens with a probability of 0.5. We’d get the same answer, <span class="math inline">P(B) = 1 - 0.5 = 0.5</span>.</p>
<p>Plugging these numbers in gives our answer.</p>
<p><span class="math display">\begin{aligned}
        P(A \text{ given } B) &amp;= \frac{P(A \text{ and } B)}{P(B)}\\
                              &amp;= \frac{0.1}{0.5}\\
                              &amp;= 0.2
\end{aligned}</span></p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 72%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-16.2">Problem 16.2</h3>
<p>What is the probability that Ryland assembles the bedside table in 40
minutes if we know that it took him 30 minutes to assemble the bed
frame? Give your answer as a decimal between 0 and 1</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading16_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse16_2" aria-expanded="true" aria-controls="collapse16_2">
Click to view the solution.
</button>
</h2>
<div id="collapse16_2" class="accordion-collapse collapse"
aria-labelledby="heading16_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> 0.4</p>
<p>We are told that the time it takes someone to assemble the bedside
table is a random quantity, <em>independent</em> of the time it takes
them to assemble the bed frame. Therefore we can disregard the
information about the time it took him to assemble the bed frame and
read directly from the probability distribution that his probability of
assembling the bedside table in 40 minutes is 0.4. </p>
<hr/>
<h5>Difficulty:
⭐️⭐️</h5>
<p>The average score on this problem was 82%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-16.3">Problem 16.3</h3>
<p>What is the probability that Jin assembles the complete HAUGA set in
at most 60 minutes? Give your answer as a decimal between 0 and 1.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading16_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse16_3" aria-expanded="true" aria-controls="collapse16_3">
Click to view the solution.
</button>
</h2>
<div id="collapse16_3" class="accordion-collapse collapse"
aria-labelledby="heading16_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> 0.53</p>
<p>There are several different ways for the total assembly time to take
at most 60 minutes:</p>
<ol type="1">
<li>The bed frame takes 10 minutes and the bedside table takes any
amount of time.</li>
<li>The bed frame takes 20 minutes and the bedside table takes 30 or 40
minutes.</li>
<li>The bed frame takes 30 minutes and the bedside table takes 30
minutes.</li>
</ol>
<p>Using the multiplication rule, these probabilities are:</p>
<ol type="1">
<li><span class="math inline">0.1*1 = 0.1</span></li>
<li><span class="math inline">0.4*0.7 = 0.28</span></li>
<li><span class="math inline">0.5*0.3 = 0.15</span></li>
</ol>
<p>Finally, adding them up because they represent mutually exclusive
cases, we get <span class="math inline">0.1+0.28+0.15 = 0.53</span>.
</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>The average score on this problem was
58%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-17">Problem 17</h2>
<p>Suppose the price of an IKEA product and the cost to have it
assembled are linearly associated with a correlation of 0.8. Product
prices have a mean of 140 dollars and a standard deviation of 40
dollars. Assembly costs have a mean of 80 dollars and a standard
deviation of 10 dollars. We want to predict the assembly cost of a
product based on its price using linear regression.</p>
<p><br></p>
<h3 id="problem-17.1">Problem 17.1</h3>
<p>The NORDMELA 4-drawer dresser sells for 200 dollars. How much do we
predict its assembly cost to be?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading17_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse17_1" aria-expanded="true" aria-controls="collapse17_1">
Click to view the solution.
</button>
</h2>
<div id="collapse17_1" class="accordion-collapse collapse"
aria-labelledby="heading17_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> 92 dollars</p>
<p>We first use the formulas for the slope, <span class="math inline">m</span>, and intercept, <span class="math inline">b</span>, of the regression line to find the
equation. For our application, <span class="math inline">x</span> is the
price and <span class="math inline">y</span> is the assembly cost since
we want to predict the assembly cost based on price.</p>
<p><span class="math display">\begin{aligned}
        m &amp;= r*\frac{\text{SD of }y}{\text{SD of }x} \\
                     &amp;= 0.8*\frac{10}{40} \\
                     &amp;= 0.2\\
        b &amp;= \text{mean of }y - m*\text{mean of }x  \\
                     &amp;= 80 - 0.2*140 \\
                     &amp;= 80 - 28 \\
                     &amp;= 52
\end{aligned}</span></p>
<p>Now we know the formula of the regression line and we simply plug in
<span class="math inline">x=200</span> to find the associated <span class="math inline">y</span> value.</p>
<p><span class="math display">\begin{aligned}
        y &amp;= mx+b \\
        y &amp;= 0.2x+52 \\
         &amp;= 0.2*200+52 \\
         &amp;= 92
\end{aligned}</span></p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 76%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-17.2">Problem 17.2</h3>
<p>The IDANÄS wardrobe sells for 80 dollars more than the KLIPPAN
loveseat, so we expect the IDANÄS wardrobe will have a greater assembly
cost than the KLIPPAN loveseat. How much do we predict the difference in
assembly costs to be?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading17_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse17_2" aria-expanded="true" aria-controls="collapse17_2">
Click to view the solution.
</button>
</h2>
<div id="collapse17_2" class="accordion-collapse collapse"
aria-labelledby="heading17_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> 16 dollars</p>
<p>The slope of a line describes the change in <span class="math inline">y</span> for each change of 1 in <span class="math inline">x</span>. The difference in <span class="math inline">x</span> values for these two products is 80, so the
difference in <span class="math inline">y</span> values is <span class="math inline">m*80 = 0.2*80 = 16</span> dollars.</p>
<p>An equivalent way to state this is:</p>
<p><span class="math display">\begin{aligned}
        m &amp;= \frac{\text{ rise, or change in } y}{\text{ run, or
change in } x} \\
        0.2 &amp;= \frac{\text{ rise, or change in } y}{80} \\
        0.2*80 &amp;= \text{ rise, or change in } y \\
    16 &amp;= \text{ rise, or change in } y
\end{aligned}</span></p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 65%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-17.3">Problem 17.3</h3>
<p>If we create a 95% prediction interval for the assembly cost of a 100
dollar product and another 95% prediction interval for the assembly cost
of a 120 dollar product, which prediction interval will be wider?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> The one for the 100 dollar product.</p></li>
<li><p><input type="radio" disabled="" /> The one for the 120 dollar product.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading17_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse17_3" aria-expanded="true" aria-controls="collapse17_3">
Click to view the solution.
</button>
</h2>
<div id="collapse17_3" class="accordion-collapse collapse"
aria-labelledby="heading17_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> The one for the 100 dollar product.</p>
<p>Prediction intervals get wider the further we get from the point
<span class="math inline">(\text{mean of } x, \text{mean of } y)</span>
since all regression lines must go through this point. Since the average
product price is 140 dollars, the prediction interval will be wider for
the 100 dollar product, since it’s the further of 100 and 120 from 140.
</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>The average score on this problem
was 45%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-18">Problem 18</h2>
<p>For each IKEA desk, we know the cost of producing the desk, in
dollars, and the current sale price of the desk, in dollars. We want to
predict sale price based on production cost using linear regression.</p>
<p><br></p>
<h3 id="problem-18.1">Problem 18.1</h3>
<p>For this scenario, which of the following most likely describes the
slope of the regression line when both variables are measured in
dollars?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> less than 0</p></li>
<li><p><input type="radio" disabled="" /> between 0 and 1, exclusive</p></li>
<li><p><input type="radio" disabled="" /> more than 1</p></li>
<li><p><input type="radio" disabled="" /> none of the above (exactly equal to 0 or 1)</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading18_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse18_1" aria-expanded="true" aria-controls="collapse18_1">
Click to view the solution.
</button>
</h2>
<div id="collapse18_1" class="accordion-collapse collapse"
aria-labelledby="heading18_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> more than 1</p>
<p>The slope of a line represents the change in <span class="math inline">y</span> for each change of 1 in <span class="math inline">x</span>. Therefore, the slope of the regression
line is the amount we’d predict the sale price to increase when the
production cost of an item increases by one dollar. In other words, it’s
the sale price per dollar of production cost. This is almost certainly
more than 1, otherwise the company would not make a profit. We’d expect
that for any company, the sale price of an item should exceed the
production cost, meaning the slope of the regression line has a value
greater than one.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 72%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-18.2">Problem 18.2</h3>
<p>For this scenario, which of the following most likely describes the
slope of the regression line when both variables are measured in
standard units?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> less than 0</p></li>
<li><p><input type="radio" disabled="" /> between 0 and 1, exclusive</p></li>
<li><p><input type="radio" disabled="" /> more than 1</p></li>
<li><p><input type="radio" disabled="" /> none of the above (exactly equal to 0 or 1)</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading18_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse18_2" aria-expanded="true" aria-controls="collapse18_2">
Click to view the solution.
</button>
</h2>
<div id="collapse18_2" class="accordion-collapse collapse"
aria-labelledby="heading18_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> between 0 and 1, exclusive</p>
<p>When both variables are measured in standard units, the slope of the
regression line is the correlation coefficient. Recall that correlation
coefficients are always between -1 and 1, however, because it’s not
realistic for production cost and sale price to be negatively correlated
(as that would mean products sell for less if they cost more to produce)
we can limit our choice of answer to values between 0 and 1. Because a
coefficient of 0 would mean there is no correlation and 1 would mean
perfect correlation (that is, plotting the data would create a line),
these are unlikely occurrences leaving us with the answer being between
0 and 1, exclusive.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 86%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-18.3">Problem 18.3</h3>
<p>The residual plot for this regression is shown below.</p>
<center><img src='../assets/images/sp22-final/resid.png' width=40%></center>
<p>What is being represented on the horizontal axis of the residual
plot?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> actual production cost</p></li>
<li><p><input type="radio" disabled="" /> actual sale price</p></li>
<li><p><input type="radio" disabled="" /> predicted production cost</p></li>
<li><p><input type="radio" disabled="" /> predicted sale price</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading18_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse18_3" aria-expanded="true" aria-controls="collapse18_3">
Click to view the solution.
</button>
</h2>
<div id="collapse18_3" class="accordion-collapse collapse"
aria-labelledby="heading18_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> actual production cost</p>
<p>Residual plots show <span class="math inline">x</span> on the
horizontal axis and the residuals, or differences between actual <span class="math inline">y</span> values and predicted <span class="math inline">y</span> values, on the vertical axis. Therefore,
the horizontal axis here shows the production cost. Note that we are not
predicting production costs at all, so production cost means the
<em>actual</em> cost to produce a product.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 43%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-18.4">Problem 18.4</h3>
<p>Which of the following is a correct conclusion based on this residual
plot? Select all that apply.</p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> The correlation between production cost and sale price is weak.</p></li>
<li><p><input type="checkbox" disabled="" /> It would be better to fit a nonlinear curve.</p></li>
<li><p><input type="checkbox" disabled="" /> Our predictions will be more accurate for some inputs than
others.</p></li>
<li><p><input type="checkbox" disabled="" /> We don’t have enough data to do regression.</p></li>
<li><p><input type="checkbox" disabled="" /> The regression line is not the best-fitting line for this data
set.</p></li>
<li><p><input type="checkbox" disabled="" /> The data set is not representative of the population.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading18_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse18_4" aria-expanded="true" aria-controls="collapse18_4">
Click to view the solution.
</button>
</h2>
<div id="collapse18_4" class="accordion-collapse collapse"
aria-labelledby="heading18_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> It would be better to fit a nonlinear
curve.</p>
<p>Let’s go through each answer choice.</p>
<ul>
<li><p>The correlation between production cost and sale price could be
very strong. After all, we are able to predict the sale price within ten
dollars almost all the time, since residuals are almost all between -10
and 10.</p></li>
<li><p>It would be better to fit a nonlinear curve because the residuals
show a pattern. Reading from left to right, they go from mostly negative
to mostly positive to mostly negative again. This suggests that a
nonlinear curve might be a better fit for our data.</p></li>
<li><p>Our predictions are typically within ten dollars of the actual
sale price, and this is consistent throughout. We see this on the
residual plot by a fairly even vertical spread of dots as we scan from
left to right. This data is not heteroscedastic.</p></li>
<li><p>We can do regression on a dataset of any size, even a very small
data set. Further, this dataset is decently large, since there are a
good number of points in the residual plot.</p></li>
<li><p>The regression line is <strong>always</strong> the best-fitting
line for any dataset. There may be other curves that are better fits
than lines, but when we restrict to lines, the best of the bunch is the
regression line.</p></li>
<li><p>We have no way of knowing how representative our data set is of
the population. This is not something we can discern from a residual
plot because such a plot contains no information about the population
from which the data was drawn.</p></li>
</ul>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 61%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="section"><span class="math display"> </span></h2>
<h4
id="feedback-find-an-error-still-confused-have-a-suggestion-let-us-know-here.">👋
Feedback: Find an error? Still confused? Have a suggestion?
<a href="https://forms.gle/WZ71FchnXU1K154d7">Let us know
here</u></a>.</h4>
<hr />
</body>
</html>
