<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Lecture 22 — Practice</title>
  <style>
    /* Default styles provided by pandoc.
    ** See https://pandoc.org/MANUAL.html#variables-for-html for config info.
    */
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../assets/theme.css" />
  <script defer=""
  src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">Lecture 22 — Practice</h1>
</header>
<p><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<!-- add after bootstrap.min.css -->
<link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css"/>
<!-- add after bootstrap.min.js or bootstrap.bundle.min.js -->
<script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script></p>
<!-- for difficulty gauges-->
<script src="https://cdn.plot.ly/plotly-2.16.1.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B947E6J6H4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B947E6J6H4');
</script>
<p><a href="../../index.html">← return to practice.dsc10.com</a></p>
<hr />
<h1 id="lecture-22-collected-practice-questions">Lecture 22 — Collected
Practice Questions</h1>
<p>Below are practice problems tagged for Lecture <strong>22</strong>
(rendered directly from the original exam/quiz sources).</p>
<hr />
<h2 id="problem-1">Problem 1</h2>
<p>We’re now interested in investigating the differences between the
masses of Adelie penguins and Chinstrap penguins. Specifically, our null
hypothesis is that their masses are drawn from the same population
distribution, and any observed differences are due to chance only.</p>
<p>Below, we have a snippet of working code for this hypothesis test,
for a specific test statistic. Assume that <code>adelie_chinstrap</code>
is a DataFrame of only Adelie and Chinstrap penguins, with just two
columns – <code>'species'</code> and <code>'mass'</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> np.array([])</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>num_reps <span class="op">=</span> <span class="dv">500</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(num_reps):</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) starts ---</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    shuffled <span class="op">=</span> np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;species&#39;</span>))</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) ends ---</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) starts ---</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    with_shuffled <span class="op">=</span> adelie_chinstrap.assign(species<span class="op">=</span>shuffled)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) ends ---</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> with_shuffled.groupby(<span class="st">&#39;species&#39;</span>).mean()</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) starts ---</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">0</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">1</span>]</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) ends ---</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> np.append(stats, stat)</span></code></pre></div>
<p><br></p>
<h3 id="problem-1.1">Problem 1.1</h3>
<p>Which of the following statements best describe the procedure
above?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This is a standard hypothesis test, and our test statistic is the
total variation distance between the distribution of Adelie masses and
Chinstrap masses</p></li>
<li><p><input type="radio" disabled="" /> This is a standard hypothesis test, and our test statistic is the
difference between the expected proportion of Adelie penguins and the
proportion of Adelie penguins in our resample</p></li>
<li><p><input type="radio" disabled="" /> This is a permutation test, and our test statistic is the total
variation distance between the distribution of Adelie masses and
Chinstrap masses</p></li>
<li><p><input type="radio" disabled="" /> This is a permutation test, and our test statistic is the difference
in the mean Adelie mass and mean Chinstrap mass</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_1" aria-expanded="true" aria-controls="collapse1_1">
Click to view the solution.
</button>
</h2>
<div id="collapse1_1" class="accordion-collapse collapse"
aria-labelledby="heading1_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> This is a permutation test, and our test
statistic is the difference in the mean Adelie mass and mean Chinstrap
mass (Option 4)</p>
<p>Recall, a permutation test helps us decide whether two random samples
come from the same distribution. This test matches our goal of testing
whether the masses of Adelie penguins and Chinstrap penguins are drawn
from the same population distribution. The code above are also doing
steps of a permutation test. In part (a), it shuffles
<code>'species'</code> and stores the shuffled series to
<code>shuffled</code>. In part (b), it assign the shuffled series of
values to <code>'species'</code> column. Then, it uses
<code>grouped = with_shuffled.groupby('species').mean()</code> to
calculate the mean of each species. In part (c), it computes the
difference between mean mass of the two species by first getting the
<code>'mass'</code> column and then accessing mean mass of each group
(Adelie and Chinstrap) with positional index <code>0</code> and
<code>1</code>.</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 98%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.2">Problem 1.2</h3>
<p>Currently, line (c) (marked with a comment) uses .iloc. Which of the
following options compute the exact same statistic as line (c) currently
does?</p>
<p>Option 1:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).loc[<span class="st">&#39;Adelie&#39;</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).loc[<span class="st">&#39;Chinstrap&#39;</span>]</span></code></pre></div>
<p>Option 2:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).loc[<span class="st">&#39;Chinstrap&#39;</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).loc[<span class="st">&#39;Adelie&#39;</span>]</span></code></pre></div>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Option 1 only</p></li>
<li><p><input type="radio" disabled="" /> Option 2 only</p></li>
<li><p><input type="radio" disabled="" /> Both options</p></li>
<li><p><input type="radio" disabled="" /> Neither option</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_2" aria-expanded="true" aria-controls="collapse1_2">
Click to view the solution.
</button>
</h2>
<div id="collapse1_2" class="accordion-collapse collapse"
aria-labelledby="heading1_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Option 1 only</p>
<p>We use <code>df.get(column_name).iloc[positional_index]</code> to
access the value in a column with <code>positional_index</code>.
Similarly, we use <code>df.get(column_name).loc[index]</code> to access
value in a column with its <code>index</code>. Remember
<code>grouped</code> is a DataFrame that
<code>groupby('species')</code>, so we have species name
<code>'Adelie'</code> and <code>'Chinstrap'</code> as index for
<code>grouped</code>.</p>
<p>Option 2 is incorrect since it does subtraction in the reverse order
which results in a different <code>stat</code> compared to
<code>line(c)</code>. Its output will be <span class="math inline">-1
\cdot</span> <code>stat</code>. Recall, in
<code>grouped = with_shuffled.groupby('species').mean()</code>, we use
<code>groupby()</code> and since <code>'species'</code> is a column with
string values, our index will be sorted in alphabetical order. So,
<code>.iloc[0]</code> is <code>'Adelie'</code> and <code>.iloc[1]</code>
is <code>'Chinstrap'</code>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 81%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.3">Problem 1.3</h3>
<p>Is it possible to re-write <code>line (c)</code> in a way that uses
<code>.iloc[0]</code> twice, without any other uses of <code>.loc</code>
or <code>.iloc</code>?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Yes, it’s possible</p></li>
<li><p><input type="radio" disabled="" /> No, it’s not possible</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_3" aria-expanded="true" aria-controls="collapse1_3">
Click to view the solution.
</button>
</h2>
<div id="collapse1_3" class="accordion-collapse collapse"
aria-labelledby="heading1_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Yes, it’s possible</p>
<p>There are multiple ways to achieve this. For instance
<code>stat = grouped.get('mass').iloc[0] - grouped.sort_index(ascending = False).get('mass').iloc[0]</code>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 64%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.4">Problem 1.4</h3>
<p>What would happen if we removed <code>line (a)</code>, and replaced
<code>line (b)</code> with</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>with_shuffled <span class="op">=</span> adelie_chinstrap.sample(adelie_chinstrap.shape[<span class="dv">0</span>], replace<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<p>Select the best answer.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This would still run a valid hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as all values in the
<code>stats</code> array would be exactly the same</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, even though there would
be several different values in the <code>stats</code> array</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as it would incorporate
information about Gentoo penguins</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_4" aria-expanded="true" aria-controls="collapse1_4">
Click to view the solution.
</button>
</h2>
<div id="collapse1_4" class="accordion-collapse collapse"
aria-labelledby="heading1_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> This would not run a valid hypothesis test,
as all values in the <code>stats</code> array would be exactly the same
(Option 2)</p>
<p>Recall, <code>DataFrame.sample(n, replace = False)</code> (or
<code>DataFrame.sample(n)</code> since <code>replace = False</code> is
by default) returns a DataFrame by randomly sampling <code>n</code> rows
from the DataFrame, without replacement. Since our <code>n</code> is
<code>adelie_chinstrap.shape[0]</code>, and we are sampling without
replacement, we will get the exactly same Dataframe (though the order of
rows may be different but the <code>stats</code> array would be exactly
the same).</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 87%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.5">Problem 1.5</h3>
<p>What would happen if we removed <code>line (a)</code>, and replaced
<code>line (b)</code> with</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>with_shuffled <span class="op">=</span> adelie_chinstrap.sample(adelie_chinstrap.shape[<span class="dv">0</span>], replace<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<p>Select the best answer.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This would still run a valid hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as all values in the
<code>stats</code> array would be exactly the same</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, even though there would
be several different values in the <code>stats</code> array</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as it would incorporate
information about Gentoo penguins</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_5">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_5" aria-expanded="true" aria-controls="collapse1_5">
Click to view the solution.
</button>
</h2>
<div id="collapse1_5" class="accordion-collapse collapse"
aria-labelledby="heading1_5" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> This would not run a valid hypothesis test,
even though there would be several different values in the
<code>stats</code> array (Option 3)</p>
<p>Recall, <code>DataFrame.sample(n, replace = True)</code> returns a
new DataFrame by randomly sampling <code>n</code> rows from the
DataFrame, with replacement. Since we are sampling with replacement, we
will have a DataFrame which produces a <code>stats</code> array with
some different values. However, recall, the key idea behind a
permutation test is to shuffle the group labels. So, the above code does
not meet this key requirement since we only want to shuffle the
<code>"species"</code> column without changing the size of the two
species. However, the code may change the size of the two species.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 66%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.6">Problem 1.6</h3>
<p>What would happen if we replaced <code>line (a)</code> with</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>with_shuffled <span class="op">=</span> adelie_chinstrap.assign(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    species<span class="op">=</span>np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;species&#39;</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>and replaced line (b) with</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>with_shuffled <span class="op">=</span> with_shuffled.assign(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    mass<span class="op">=</span>np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;mass&#39;</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Select the best answer.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This would still run a valid hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as all values in the
<code>stats</code> array would be exactly the same</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, even though there would
be several different values in the <code>stats</code> array</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as it would incorporate
information about Gentoo penguins</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_6">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_6" aria-expanded="true" aria-controls="collapse1_6">
Click to view the solution.
</button>
</h2>
<div id="collapse1_6" class="accordion-collapse collapse"
aria-labelledby="heading1_6" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> This would still run a valid hypothesis test
(Option 1)</p>
<p>Our goal for the permutation test is to randomly assign birth weights
to groups, without changing group sizes. The above code shuffles
<code>'species'</code> and <code>'mass'</code> columns and assigns them
back to the DataFrame. This fulfills our goal.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 81%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.7">Problem 1.7</h3>
<p>Suppose we run the code for the hypothesis test and see the following
empirical distribution for the test statistic. In red is the observed
statistic.</p>
<center><img src='../../assets/images/fa21-final/measuring_up_his.png' width=40%></center>
<p><br></p>
<p>Suppose our alternative hypothesis is that Chinstrap penguins weigh
more on average than Adelie penguins. Which of the following is closest
to the p-value for our hypothesis test?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <span class="math inline">0</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{1}{4}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{1}{3}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{2}{3}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{3}{4}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">1</span></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_7">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_7" aria-expanded="true" aria-controls="collapse1_7">
Click to view the solution.
</button>
</h2>
<div id="collapse1_7" class="accordion-collapse collapse"
aria-labelledby="heading1_7" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> <span class="math inline">\frac{1}{3}</span></p>
<p>Recall, the p-value is the chance, under the null hypothesis, that
the test statistic is equal to the value that was observed in the data
or is even further in the direction of the alternative. Thus, we compute
the proportion of the test statistic that is equal or less than the
observed statistic. (It is less than because less than corresponds to
the alternative hypothesis “Chinstrap penguins weigh more on average
than Adelie penguins”. Recall, when computing the statistic, we use
Adelie’s mean mass minus Chinstrap’s mean mass. If Chinstrap’s mean mass
is larger, the statistic will be negative, the direction of less than
the observed statistic).</p>
<p>Thus, we look at the proportion of area less than or on the red line
(which represents observed statistic), it is around <span class="math inline">\frac{1}{3}</span>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 80%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-2">Problem 2</h2>
<p>Researchers from the San Diego Zoo, located within Balboa Park,
collected physical measurements of three species of penguins (Adelie,
Chinstrap, or Gentoo) in a region of Antarctica. One piece of
information they tracked for each of 330 penguins was its mass in grams.
The average penguin mass is 4200 grams, and the standard deviation is
840 grams.</p>
<p>We’re interested in investigating the differences between the masses
of Adelie penguins and Chinstrap penguins. Specifically, our null
hypothesis is that their masses are drawn from the same population
distribution, and any observed differences are due to chance only.</p>
<p>Below, we have a snippet of working code for this hypothesis test,
for a specific test statistic. Assume that <code>adelie_chinstrap</code>
is a DataFrame of only Adelie and Chinstrap penguins, with just two
columns – <code>'species'</code> and <code>'mass'</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> np.array([])</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>num_reps <span class="op">=</span> <span class="dv">500</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(num_reps):</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) starts ---</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    shuffled <span class="op">=</span> np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;species&#39;</span>))</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) ends ---</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) starts ---</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    with_shuffled <span class="op">=</span> adelie_chinstrap.assign(species<span class="op">=</span>shuffled)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) ends ---</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> with_shuffled.groupby(<span class="st">&#39;species&#39;</span>).mean()</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) starts ---</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">0</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">1</span>]</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) ends ---</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> np.append(stats, stat)</span></code></pre></div>
<p><br></p>
<h3 id="problem-2.1">Problem 2.1</h3>
<p>Which of the following statements best describe the procedure
above?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This is a standard hypothesis test, and our test statistic is the
total variation distance between the distribution of Adelie masses and
Chinstrap masses</p></li>
<li><p><input type="radio" disabled="" /> This is a standard hypothesis test, and our test statistic is the
difference between the expected proportion of Adelie penguins and the
proportion of Adelie penguins in our resample</p></li>
<li><p><input type="radio" disabled="" /> This is a permutation test, and our test statistic is the total
variation distance between the distribution of Adelie masses and
Chinstrap masses</p></li>
<li><p><input type="radio" disabled="" /> This is a permutation test, and our test statistic is the difference
in the mean Adelie mass and mean Chinstrap mass</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_1" aria-expanded="true" aria-controls="collapse2_1">
Click to view the solution.
</button>
</h2>
<div id="collapse2_1" class="accordion-collapse collapse"
aria-labelledby="heading2_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> This is a permutation test, and our test
statistic is the difference in the mean Adelie mass and mean Chinstrap
mass (Option 4)</p>
<p>Recall, a permutation test helps us decide whether two random samples
come from the same distribution. This test matches our goal of testing
whether the masses of Adelie penguins and Chinstrap penguins are drawn
from the same population distribution. The code above are also doing
steps of a permutation test. In part (a), it shuffles
<code>'species'</code> and stores the shuffled series to
<code>shuffled</code>. In part (b), it assign the shuffled series of
values to <code>'species'</code> column. Then, it uses
<code>grouped = with_shuffled.groupby('species').mean()</code> to
calculate the mean of each species. In part (c), it computes the
difference between mean mass of the two species by first getting the
<code>'mass'</code> column and then accessing mean mass of each group
(Adelie and Chinstrap) with positional index <code>0</code> and
<code>1</code>.</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 98%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-2.2">Problem 2.2</h3>
<p>Currently, line (c) (marked with a comment) uses .iloc. Which of the
following options compute the exact same statistic as line (c) currently
does?</p>
<p>Option 1:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).loc[<span class="st">&#39;Adelie&#39;</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).loc[<span class="st">&#39;Chinstrap&#39;</span>]</span></code></pre></div>
<p>Option 2:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).loc[<span class="st">&#39;Chinstrap&#39;</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).loc[<span class="st">&#39;Adelie&#39;</span>]</span></code></pre></div>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Option 1 only</p></li>
<li><p><input type="radio" disabled="" /> Option 2 only</p></li>
<li><p><input type="radio" disabled="" /> Both options</p></li>
<li><p><input type="radio" disabled="" /> Neither option</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_2" aria-expanded="true" aria-controls="collapse2_2">
Click to view the solution.
</button>
</h2>
<div id="collapse2_2" class="accordion-collapse collapse"
aria-labelledby="heading2_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Option 1 only</p>
<p>We use <code>df.get(column_name).iloc[positional_index]</code> to
access the value in a column with <code>positional_index</code>.
Similarly, we use <code>df.get(column_name).loc[index]</code> to access
value in a column with its <code>index</code>. Remember
<code>grouped</code> is a DataFrame that
<code>groupby('species')</code>, so we have species name
<code>'Adelie'</code> and <code>'Chinstrap'</code> as index for
<code>grouped</code>.</p>
<p>Option 2 is incorrect since it does subtraction in the reverse order
which results in a different <code>stat</code> compared to
<code>line(c)</code>. Its output will be <span class="math inline">-1
\cdot</span> <code>stat</code>. Recall, in
<code>grouped = with_shuffled.groupby('species').mean()</code>, we use
<code>groupby()</code> and since <code>'species'</code> is a column with
string values, our index will be sorted in alphabetical order. So,
<code>.iloc[0]</code> is <code>'Adelie'</code> and <code>.iloc[1]</code>
is <code>'Chinstrap'</code>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 81%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-2.3">Problem 2.3</h3>
<p>Is it possible to re-write <code>line (c)</code> in a way that uses
<code>.iloc[0]</code> twice, without any other uses of <code>.loc</code>
or <code>.iloc</code>?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Yes, it’s possible</p></li>
<li><p><input type="radio" disabled="" /> No, it’s not possible</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_3" aria-expanded="true" aria-controls="collapse2_3">
Click to view the solution.
</button>
</h2>
<div id="collapse2_3" class="accordion-collapse collapse"
aria-labelledby="heading2_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Yes, it’s possible</p>
<p>There are multiple ways to achieve this. For instance
<code>stat = grouped.get('mass').iloc[0] - grouped.sort_index(ascending = False).get('mass').iloc[0]</code>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 64%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-2.4">Problem 2.4</h3>
<p>For your convenience, we copy the code for the hypothesis test
below.</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> np.array([])</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>num_reps <span class="op">=</span> <span class="dv">500</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(num_reps):</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) starts ---</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    shuffled <span class="op">=</span> np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;species&#39;</span>))</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) ends ---</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) starts ---</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    with_shuffled <span class="op">=</span> adelie_chinstrap.assign(species<span class="op">=</span>shuffled)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) ends ---</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> with_shuffled.groupby(<span class="st">&#39;species&#39;</span>).mean()</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) starts ---</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">0</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">1</span>]</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) ends ---</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> np.append(stats, stat)</span></code></pre></div>
<p>What would happen if we removed <code>line (a)</code>, and replaced
<code>line (b)</code> with</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>with_shuffled <span class="op">=</span> adelie_chinstrap.sample(adelie_chinstrap.shape[<span class="dv">0</span>], replace<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<p>Select the best answer.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This would still run a valid hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as all values in the
<code>stats</code> array would be exactly the same</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, even though there would
be several different values in the <code>stats</code> array</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as it would incorporate
information about Gentoo penguins</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_4" aria-expanded="true" aria-controls="collapse2_4">
Click to view the solution.
</button>
</h2>
<div id="collapse2_4" class="accordion-collapse collapse"
aria-labelledby="heading2_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> This would not run a valid hypothesis test,
as all values in the <code>stats</code> array would be exactly the same
(Option 2)</p>
<p>Recall, <code>DataFrame.sample(n, replace = False)</code> (or
<code>DataFrame.sample(n)</code> since <code>replace = False</code> is
by default) returns a DataFrame by randomly sampling <code>n</code> rows
from the DataFrame, without replacement. Since our <code>n</code> is
<code>adelie_chinstrap.shape[0]</code>, and we are sampling without
replacement, we will get the exactly same Dataframe (though the order of
rows may be different but the <code>stats</code> array would be exactly
the same).</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 87%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-2.5">Problem 2.5</h3>
<p>For your convenience, we copy the code for the hypothesis test
below.</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> np.array([])</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>num_reps <span class="op">=</span> <span class="dv">500</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(num_reps):</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) starts ---</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    shuffled <span class="op">=</span> np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;species&#39;</span>))</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) ends ---</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) starts ---</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    with_shuffled <span class="op">=</span> adelie_chinstrap.assign(species<span class="op">=</span>shuffled)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) ends ---</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> with_shuffled.groupby(<span class="st">&#39;species&#39;</span>).mean()</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) starts ---</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">0</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">1</span>]</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) ends ---</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> np.append(stats, stat)</span></code></pre></div>
<p>What would happen if we removed <code>line (a)</code>, and replaced
<code>line (b)</code> with</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>with_shuffled <span class="op">=</span> adelie_chinstrap.sample(adelie_chinstrap.shape[<span class="dv">0</span>], replace<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<p>Select the best answer.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This would still run a valid hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as all values in the
<code>stats</code> array would be exactly the same</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, even though there would
be several different values in the <code>stats</code> array</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as it would incorporate
information about Gentoo penguins</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_5">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_5" aria-expanded="true" aria-controls="collapse2_5">
Click to view the solution.
</button>
</h2>
<div id="collapse2_5" class="accordion-collapse collapse"
aria-labelledby="heading2_5" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> This would not run a valid hypothesis test,
even though there would be several different values in the
<code>stats</code> array (Option 3)</p>
<p>Recall, <code>DataFrame.sample(n, replace = True)</code> returns a
new DataFrame by randomly sampling <code>n</code> rows from the
DataFrame, with replacement. Since we are sampling with replacement, we
will have a DataFrame which produces a <code>stats</code> array with
some different values. However, recall, the key idea behind a
permutation test is to shuffle the group labels. So, the above code does
not meet this key requirement since we only want to shuffle the
<code>"species"</code> column without changing the size of the two
species. However, the code may change the size of the two species.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 66%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-2.6">Problem 2.6</h3>
<p>For your convenience, we copy the code for the hypothesis test
below.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> np.array([])</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>num_reps <span class="op">=</span> <span class="dv">500</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(num_reps):</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) starts ---</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    shuffled <span class="op">=</span> np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;species&#39;</span>))</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) ends ---</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) starts ---</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    with_shuffled <span class="op">=</span> adelie_chinstrap.assign(species<span class="op">=</span>shuffled)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) ends ---</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> with_shuffled.groupby(<span class="st">&#39;species&#39;</span>).mean()</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) starts ---</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">0</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">1</span>]</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) ends ---</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> np.append(stats, stat)</span></code></pre></div>
<p>What would happen if we replaced <code>line (a)</code> with</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>with_shuffled <span class="op">=</span> adelie_chinstrap.assign(</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    species<span class="op">=</span>np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;species&#39;</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>and replaced line (b) with</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>with_shuffled <span class="op">=</span> with_shuffled.assign(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    mass<span class="op">=</span>np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;mass&#39;</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Select the best answer.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This would still run a valid hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as all values in the
<code>stats</code> array would be exactly the same</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, even though there would
be several different values in the <code>stats</code> array</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as it would incorporate
information about Gentoo penguins</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_6">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_6" aria-expanded="true" aria-controls="collapse2_6">
Click to view the solution.
</button>
</h2>
<div id="collapse2_6" class="accordion-collapse collapse"
aria-labelledby="heading2_6" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> This would still run a valid hypothesis test
(Option 1)</p>
<p>Our goal for the permutation test is to randomly assign birth weights
to groups, without changing group sizes. The above code shuffles
<code>'species'</code> and <code>'mass'</code> columns and assigns them
back to the DataFrame. This fulfills our goal.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 81%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-2.7">Problem 2.7</h3>
<p>Suppose we run the code for the hypothesis test and see the following
empirical distribution for the test statistic. In red is the observed
statistic.</p>
<center><img src='../../assets/images/fa21-final/measuring_up_his.png' width=40%></center>
<p>Suppose our alternative hypothesis is that Chinstrap penguins weigh
more on average than Adelie penguins. Which of the following is closest
to the p-value for our hypothesis test?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <span class="math inline">0</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{1}{4}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{1}{3}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{2}{3}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{3}{4}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">1</span></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_7">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_7" aria-expanded="true" aria-controls="collapse2_7">
Click to view the solution.
</button>
</h2>
<div id="collapse2_7" class="accordion-collapse collapse"
aria-labelledby="heading2_7" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> <span class="math inline">\frac{1}{3}</span></p>
<p>Recall, the p-value is the chance, under the null hypothesis, that
the test statistic is equal to the value that was observed in the data
or is even further in the direction of the alternative. Thus, we compute
the proportion of the test statistic that is equal or less than the
observed statistic. (It is less than because less than corresponds to
the alternative hypothesis “Chinstrap penguins weigh more on average
than Adelie penguins”. Recall, when computing the statistic, we use
Adelie’s mean mass minus Chinstrap’s mean mass. If Chinstrap’s mean mass
is larger, the statistic will be negative, the direction of less than
the observed statistic).</p>
<p>Thus, we look at the proportion of area less than or on the red line
(which represents observed statistic), it is around <span class="math inline">\frac{1}{3}</span>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 80%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<p class="meta"><em>Source:</em> fa22-final — Q4</p>
<h2 id="problem-3">Problem 3</h2>
<p>In <code>apps</code>, our sample of 1,000 credit card applications,
applicants who were approved for the credit card have fewer dependents,
on average, than applicants who were denied. The mean number of
dependents for approved applicants is 0.98, versus 1.07 for denied
applicants.</p>
<p>To test whether this difference is purely due to random chance, or
whether the distributions of the number of dependents for approved and
denied applicants are truly different in the population of all credit
card applications, we decide to perform a permutation test.</p>
<p>Consider the incomplete code block below.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> shuffle_status(df):</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    shuffled_status <span class="op">=</span> np.random.permutation(df.get(<span class="st">&quot;status&quot;</span>))</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df.assign(status<span class="op">=</span>shuffled_status).get([<span class="st">&quot;status&quot;</span>, <span class="st">&quot;dependents&quot;</span>])</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_stat(df):</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> df.groupby(<span class="st">&quot;status&quot;</span>).mean().get(<span class="st">&quot;dependents&quot;</span>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    approved <span class="op">=</span> grouped.loc[<span class="st">&quot;approved&quot;</span>]</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    denied <span class="op">=</span> grouped.loc[<span class="st">&quot;denied&quot;</span>]</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> __(a)__</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> np.array([])</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(<span class="dv">10000</span>):</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    shuffled_apps <span class="op">=</span> shuffle_status(apps)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    stat <span class="op">=</span> test_stat(shuffled_apps)</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> np.append(stats, stat)</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>p_value <span class="op">=</span> np.count_nonzero(__(b)__) <span class="op">/</span> <span class="dv">10000</span></span></code></pre></div>
<p>Below are six options for filling in blanks (a) and (b) in the code
above.</p>
<center>
<table class="table" style="width:50%">
  <thead>
    <tr>
      <th scope="col"></th>
      <th scope="col">Blank (a)</th>
      <th scope="col">Blank (b)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">Option 1</th>
      <td><code>denied - approved</code></td>
      <td><code>stats >= test_stat(apps)</code></td>
    </tr>
    <tr>
      <th scope="row">Option 2</th>
      <td><code>denied - approved</code></td>
      <td><code>stats <= test_stat(apps)</code></td>
    </tr>
    <tr>
      <th scope="row">Option 3</th>
      <td><code>approved - denied</code></td>
      <td><code>stats >= test_stat(apps)</code></td>
    </tr>
    <tr>
      <th scope="row">Option 4</th>
      <td><code>np.abs(denied - approved)</code></td>
      <td><code>stats >= test_stat(apps)</code></td>
    </tr>
    <tr>
      <th scope="row">Option 5</th>
      <td><code>np.abs(denied - approved)</code></td>
      <td><code>stats <= test_stat(apps)</code></td>
    </tr>
    <tr>
      <th scope="row">Option 6</th>
      <td><code>np.abs(approved - denied)</code></td>
      <td><code>stats >= test_stat(apps)</code></td>
    </tr>
  </tbody>
</table>
</center>
<p>The correct way to fill in the blanks depends on how we choose our
null and alternative hypotheses.</p>
<p><br></p>
<h3 id="problem-3.1">Problem 3.1</h3>
<p>Suppose we choose the following pair of hypotheses.</p>
<ul>
<li><p><strong>Null Hypothesis</strong>: In the population, the number
of dependents of approved and denied applicants come from the same
distribution.</p></li>
<li><p><strong>Alternative Hypothesis</strong>: In the population, the
number of dependents of approved applicants and denied applicants do not
come from the same distribution.</p></li>
</ul>
<p>Which of the six presented options could correctly fill in blanks (a)
and (b) for this pair of hypotheses? Select all that apply.</p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> Option 1</p></li>
<li><p><input type="checkbox" disabled="" /> Option 2</p></li>
<li><p><input type="checkbox" disabled="" /> Option 3</p></li>
<li><p><input type="checkbox" disabled="" /> Option 4</p></li>
<li><p><input type="checkbox" disabled="" /> Option 5</p></li>
<li><p><input type="checkbox" disabled="" /> Option 6</p></li>
<li><p><input type="checkbox" disabled="" /> None of the above.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3_1" aria-expanded="true" aria-controls="collapse3_1">
Click to view the solution.
</button>
</h2>
<div id="collapse3_1" class="accordion-collapse collapse"
aria-labelledby="heading3_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Option 4, Option 6</p>
<p>For blank (a), we want to choose a test statistic that helps us
distinguish between the null and alternative hypotheses. The alternative
hypothesis says that <code>denied</code> and <code>approved</code>
should be different, but it doesn’t say which should be larger. Options
1 through 3 therefore won’t work, because high values and low values of
these statistics both point to the alternative hypothesis, and moderate
values point to the null hypothesis. Options 4 through 6 all work
because large values point to the alternative hypothesis, and small
values close to 0 suggest that the null hypothesis should be true.</p>
<p>For blank (b), we want to calculate the p-value in such a way that it
represents the proportion of trials for which the simulated test
statistic was equal to the observed statistic or further in the
direction of the alternative. For all of Options 4 through 6, large
values of the test statistic indicate the alternative, so we need to
calculate the p-value with a <code>&gt;=</code> sign, as in Options 4
and 6.</p>
<p>While Option 3 filled in blank (a) correctly, it did not fill in
blank (b) correctly. Options 4 and 6 fill in both blanks correctly.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 78%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-3.2">Problem 3.2</h3>
<p>Now, suppose we choose the following pair of hypotheses.</p>
<ul>
<li><p><strong>Null Hypothesis</strong>: In the population, the number
of dependents of approved and denied applicants come from the same
distribution.</p></li>
<li><p><strong>Alternative Hypothesis</strong>: In the population, the
number of dependents of approved applicants is smaller on average than
the number of dependents of denied applicants.</p></li>
</ul>
<p>Which of the six presented options could correctly fill in blanks (a)
and (b) for this pair of hypotheses? Select all that apply.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3_2" aria-expanded="true" aria-controls="collapse3_2">
Click to view the solution.
</button>
</h2>
<div id="collapse3_2" class="accordion-collapse collapse"
aria-labelledby="heading3_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Option 1</p>
<p>As in the previous part, we need to fill blank (a) with a test
statistic such that large values point towards one of the hypotheses and
small values point towards the other. Here, the alterntive hypothesis
suggests that <code>approved</code> should be less than
<code>denied</code>, so we can’t use Options 4 through 6 because these
can only detect whether <code>approved</code> and <code>denied</code>
are not different, not which is larger. Any of Options 1 through 3
should work, however. For Options 1 and 2, large values point towards
the alternative, and for Option 3, small values point towards the
alternative. This means we need to calculate the p-value in blank (b)
with a <code>&gt;=</code> symbol for the test statistic from Options 1
and 2, and a <code>&lt;=</code> symbol for the test statistic from
Option 3. Only Options 1 fills in blank (b) correctly based on the test
statistic used in blank (a).</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 83%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-3.3">Problem 3.3</h3>
<p>Option 6 from the start of this question is repeated below.</p>
<center>
<table class="table" style="width:50%">
  <thead>
    <tr>
      <th scope="col"></th>
      <th scope="col">Blank (a)</th>
      <th scope="col">Blank (b)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">Option 6</th>
      <td><code>np.abs(approved - denied)</code></td>
      <td><code>stats >= test_stat(apps)</code></td>
    </tr>
  </tbody>
</table>
</center>
<p>We want to create a new option, Option 7, that replicates the
behavior of Option 6, but with blank (a) filled in as shown:</p>
<center>
<table class="table" style="width:50%">
  <thead>
    <tr>
      <th scope="col"></th>
      <th scope="col">Blank (a)</th>
      <th scope="col">Blank (b)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">Option 7</th>
      <td><code>approved - denied</code></td>
      <td></td>
    </tr>
  </tbody>
</table>
</center>
<p>Which expression below could go in blank (b) so that Option 7 is
equivalent to Option 6?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>np.abs(stats) &gt;= test_stat(apps)</code></p></li>
<li><p><input type="radio" disabled="" /> <code>stats &gt;= np.abs(test_stat(apps))</code></p></li>
<li><p><input type="radio" disabled="" /> <code>np.abs(stats) &gt;= np.abs(test_stat(apps))</code></p></li>
<li><p><input type="radio" disabled="" /> <code>np.abs(stats &gt;= test_stat(apps))</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3_3" aria-expanded="true" aria-controls="collapse3_3">
Click to view the solution.
</button>
</h2>
<div id="collapse3_3" class="accordion-collapse collapse"
aria-labelledby="heading3_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong>
<code>np.abs(stats) &gt;= np.abs(test_stat(apps))</code></p>
<p>First, we need to understand how Option 6 works. Option 6 produces
large values of the test statistic when <code>approved</code> is very
different from <code>denied</code>, then calculates the p-value as the
proportion of trials for which the simulated test statistic was larger
than the observed statistic. In other words, Option 6 calculates the
proportion of trials in which <code>approved</code> and
<code>denied</code> are more different in a pair of random samples than
they are in the original samples.</p>
<p>For Option 7, the test statistic for a pair of random samples may
come out very large or very small when <code>approved</code> is very
different from <code>denied</code>. Similarly, the observed statistic
may come out very large or very small when <code>approved</code> and
<code>denied</code> are very different in the original samples. We want
to find the proportion of trials in which <code>approved</code> and
<code>denied</code> are more different in a pair of random samples than
they are in the original samples, which means we want the proportion of
trials in which the absolute value of <code>approved - denied</code> in
a pair of random samples is larger than the absolute value of
<code>approved - denied</code> in the original samples.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 56%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<p><br></p>
<h3 id="problem-3.4">Problem 3.4</h3>
<p>In our implementation of this permutation test, we followed the
procedure outlined in lecture to draw new pairs of samples under the
null hypothesis and compute test statistics — that is, we randomly
assigned each row to a group (approved or denied) by shuffling one of
the columns in <code>apps</code>, then computed the test statistic on
this random pair of samples.</p>
<p>Let’s now explore an alternative solution to drawing pairs of samples
under the null hypothesis and computing test statistics. Here’s the
approach:</p>
<ol type="1">
<li>Shuffle, i.e. re-order, the rows of the DataFrame.</li>
<li>Use the values at the top of the resulting <code>"dependents"</code>
column as the new “denied” sample, and the values at the at the bottom
of the resulting <code>"dependents"</code> column as the new “approved”
sample. Note that we don’t necessarily split the DataFrame exactly in
half — the sizes of these new samples depend on the number of “denied”
and “approved” values in the original DataFrame!</li>
</ol>
<p>Once we generate our pair of random samples in this way, we’ll
compute the test statistic on the random pair, as usual. Here, we’ll use
as our test statistic the difference between the mean number of
dependents for denied and approved applicants, in the order
<strong>denied minus approved</strong>.</p>
<p><strong>Fill in the blanks to complete the simulation
below.</strong></p>
<p><em>Hint:</em> <code>np.random.permutation</code> shouldn’t appear
anywhere in your code.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> shuffle_all(df):</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>        <span class="co">&#39;&#39;&#39;Returns a DataFrame with the same rows as df, but reordered.&#39;&#39;&#39;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> __(a)__</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> fast_stat(df):</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>        <span class="co"># This function does not and should not contain any randomness.</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>        denied <span class="op">=</span> np.count_nonzero(df.get(<span class="st">&quot;status&quot;</span>) <span class="op">==</span> <span class="st">&quot;denied&quot;</span>)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>        mean_denied <span class="op">=</span> __(b)__.get(<span class="st">&quot;dependents&quot;</span>).mean()</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>        mean_approved <span class="op">=</span> __(c)__.get(<span class="st">&quot;dependents&quot;</span>).mean()</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> mean_denied <span class="op">-</span> mean_approved</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> np.array([])</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> np.arange(<span class="dv">10000</span>):</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>        stat <span class="op">=</span> fast_stat(shuffle_all(apps))</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>        stats <span class="op">=</span> np.append(stats, stat)</span></code></pre></div>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3_4" aria-expanded="true" aria-controls="collapse3_4">
Click to view the solution.
</button>
</h2>
<div id="collapse3_4" class="accordion-collapse collapse"
aria-labelledby="heading3_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> The blanks should be filled in as
follows:</p>
<ul>
<li><ol type="a">
<li><code>df.sample(df.shape[0])</code></li>
</ol></li>
<li><ol start="2" type="a">
<li><code>df.take(np.arange(denied))</code></li>
</ol></li>
<li><ol start="3" type="a">
<li><code>df.take(np.arange(denied, df.shape[0]))</code></li>
</ol></li>
</ul>
<p>For blank (a), we are told to return a DataFrame with the same rows
but in a different order. We can use the <code>.sample</code> method for
this question. We want each row of the input DataFrame <code>df</code>
to appear once, so we should sample without replacement, and we should
have has many rows in the output as in <code>df</code>, so our sample
should be of size <code>df.shape[0]</code>. Since sampling without
replacement is the default behavior of <code>.sample</code>, it is
optional to specify <code>replace=False</code>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 59%. <br/><br/></p>
<p>For blank (b), we need to implement the strategy outlined, where
after we shuffle the DataFrame, we use the values at the top of the
DataFrame as our new “denied sample. In a permutation test, the two
random groups we create should have the same sizes as the two original
groups we are given. In this case, the size of the”denied” group in our
original data is stored in the variable <code>denied</code>. So we need
the rows in positions 0, 1, 2, …, <code>denied - 1</code>, which we can
get using <code>df.take(np.arange(denied))</code>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 39%. <br/><br/></p>
<p>For blank (c), we need to get all remaining applicants, who form the
new “approved” sample. We can <code>.take</code> the rows corresponding
to the ones we didn’t put into the “denied” group. That is, the first
applicant who will be put into this group is at position
<code>denied</code>, and we’ll take all applicants from there onwards.
We should therefore fill in blank (c) with
<code>df.take(np.arange(denied, df.shape[0]))</code>.</p>
<p>For example, if <code>apps</code> had only 10 rows, 7 of them
corresponding to denied applications, we would shuffle the rows of
<code>apps</code>, then take rows 0, 1, 2, 3, 4, 5, 6 as our new
“denied” sample and rows 7, 8, 9 as our new “approved” sample.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 38%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<p class="meta"><em>Source:</em> fa22-final — Q5</p>
<h2 id="problem-4">Problem 4</h2>
<p>Choose the best tool to answer each of the following questions. Note
the following:</p>
<ul>
<li>By “hypothesis testing”, we mean “standard” hypothesis testing,
i.e. hypothesis testing that <strong>doesn’t</strong> involve
permutation testing or bootstrapping.</li>
<li>By “bootstrapping”, we mean bootstrapping that
<strong>doesn’t</strong> involve hypothesis testing.</li>
</ul>
<p><br></p>
<h3 id="problem-4.1">Problem 4.1</h3>
<p>Are incomes of applicants with 2 or fewer dependents drawn randomly
from the distribution of incomes of all applicants?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis Testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation Testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4_1" aria-expanded="true" aria-controls="collapse4_1">
Click to view the solution.
</button>
</h2>
<div id="collapse4_1" class="accordion-collapse collapse"
aria-labelledby="heading4_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Anwser:</strong> Hypothesis Testing</p>
<p>This is a question of whether a certain set of incomes (corresponding
to applicants with 2 or fewer dependents) are drawn randomly from a
certain population (incomes of all applicants). We need to use
hypothesis testing to determine whether this model for how samples are
drawn from a population seems plausible.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 47%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-4.2">Problem 4.2</h3>
<p>What is the median income of credit card applicants with 2 or fewer
dependents?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis Testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation Testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4_2" aria-expanded="true" aria-controls="collapse4_2">
Click to view the solution.
</button>
</h2>
<div id="collapse4_2" class="accordion-collapse collapse"
aria-labelledby="heading4_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Anwser:</strong> Bootstrapping</p>
<p>The question is looking for an estimate a specific parameter (the
median income of applicants with 2 or fewer dependents), so we know
boostrapping is the best tool.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 88%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-4.3">Problem 4.3</h3>
<p>Are credit card applications approved through a random process in
which 50% of applications are approved?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis Testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation Testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4_3" aria-expanded="true" aria-controls="collapse4_3">
Click to view the solution.
</button>
</h2>
<div id="collapse4_3" class="accordion-collapse collapse"
aria-labelledby="heading4_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Anwser:</strong> Hypothesis Testing</p>
<p>The question asks about the validity of a model in which applications
are approved randomly such that each application has a 50% chance of
being approved. To determine whether this model is plausible, we should
use a standard hypothesis test to simulate this random process many
times and see if the data generated according to this model is
consistent with our observed data.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 74%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-4.4">Problem 4.4</h3>
<p>Is the median income of applicants with 2 or fewer dependents less
than the median income of applicants with 3 or more dependents?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis Testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation Testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4_4" aria-expanded="true" aria-controls="collapse4_4">
Click to view the solution.
</button>
</h2>
<div id="collapse4_4" class="accordion-collapse collapse"
aria-labelledby="heading4_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Anwser:</strong> Permutation Testing</p>
<p>Recall, a permutation test helps us decide whether two random samples
come from the same distribution. This question is about whether two
random samples for different groups of applicants have the same
distribution of incomes or whether they don’t because one group’s median
incomes is less than the other.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 57%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-4.5">Problem 4.5</h3>
<p>What is the difference in median income of applicants with 2 or fewer
dependents and applicants with 3 or more dependents?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis Testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation Testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4_5">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4_5" aria-expanded="true" aria-controls="collapse4_5">
Click to view the solution.
</button>
</h2>
<div id="collapse4_5" class="accordion-collapse collapse"
aria-labelledby="heading4_5" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Anwser:</strong> Bootstrapping</p>
<p>The question at hand is looking for a specific parameter value (the
difference in median incomes for two different subsets of the
applicants). Since this is a question of estimating an unknown
parameter, bootstrapping is the best tool.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 63%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<p class="meta"><em>Source:</em> fa24-final — Q5</p>
<h2 id="problem-5">Problem 5</h2>
<p>Aathi is a movie enthusiast looking to dive into book-reading. He
visits Bill’s Book Bonanza and asks for help from the employee on duty,
Matilda.</p>
<p>Matilda has access to the <code>matilda</code> DataFrame of
transactions from her shifts, as well as the <code>bookstore</code>
DataFrame of all books available in the store. She decides to advise
Aathi based on the ratings of books that are popular enough to have been
purchased during her shifts. Unfortunately, <code>matilda</code> does
not contain information about the rating or genre of the books sold. To
fix this, she merges the two DataFrames and keeps only the columns that
she’ll need.</p>
<p><br></p>
<h3 id="problem-5.1">Problem 5.1</h3>
<p>Fill in the blanks in the code below so that the resulting
<code>merged</code> DataFrame has one row for each book in
<code>matilda</code>, and columns representing the genre and rating of
each such book.</p>
<pre><code>merged = (matilda.merge(bookstore, __(a)__, __(b)__)
                 .get([&quot;genre&quot;, &quot;rating&quot;]))</code></pre>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_1" aria-expanded="true" aria-controls="collapse5_1">
Click to view the solution.
</button>
</h2>
<div id="collapse5_1" class="accordion-collapse collapse"
aria-labelledby="heading5_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<ol type="a">
<li><p><code>left_on = "ISBN"</code></p></li>
<li><p><code>right_index = True</code></p></li>
</ol>
<p>Since each <code>"ISBN"</code> uniquely identifies a book, we can
merge on that. We use <code>right_index=True</code> because
<code>"ISBN"</code> is the index in <code>bookstore</code>, not a
column. We need to match it with the <code>"ISBN"</code> column in
<code>matilda</code>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 60%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-5.2">Problem 5.2</h3>
<p>In this example, <code>matilda</code> and <code>merged</code> have
the same number of rows. Why is this the case? Choose the answer which
is sufficient alone to guarantee the same number of rows.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Because every book in <code>bookstore</code> appears exactly once in
<code>matilda</code>.</p></li>
<li><p><input type="radio" disabled="" /> Because every book in <code>matilda</code> appears exactly once in
<code>bookstore</code>.</p></li>
<li><p><input type="radio" disabled="" /> Because <code>matilda</code> has no duplicate rows.</p></li>
<li><p><input type="radio" disabled="" /> Because <code>bookstore</code> has no duplicate rows.</p></li>
<li><p><input type="radio" disabled="" /> Because the books in <code>matilda</code> are a subset of the books
in <code>bookstore</code>.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_2" aria-expanded="true" aria-controls="collapse5_2">
Click to view the solution.
</button>
</h2>
<div id="collapse5_2" class="accordion-collapse collapse"
aria-labelledby="heading5_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Because every book in <code>matilda</code>
appears exactly once in <code>bookstore</code>.</p>
<p>Think about the merging process. Imagine we go through each row of
<code>matilda</code>, one row at a time, and look for corresponding rows
that match in <code>bookstore</code>. If each row of
<code>matilda</code> matches with exactly one row of
<code>bookstore</code>, then the merged DataFrame must have the same
number of rows as <code>matilda</code> started with.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 53%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<p>Matilda uses some <code>babypandas</code> operations on the
<code>merged</code> DataFrame to create the DataFrame pictured below,
which she calls <code>top_two</code>.</p>
<center><img src='../../assets/images/fa24-final/fm_A.jpg' width=200></center>
<p>This DataFrame shows the two genres in <code>merged</code> with the
highest mean rating. Note that the <code>"rating"</code> column in
<code>top_two</code> represents a mean rating across many books of the
same genre, not the rating of any individual book.</p>
<p><br></p>
<h3 id="problem-5.3">Problem 5.3</h3>
<p>Write one line of code to define the DataFrame <code>top_two</code>
as described above. It’s okay if you need to write your answer on
multiple lines, as long as it represents one line of code.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_3" aria-expanded="true" aria-controls="collapse5_3">
Click to view the solution.
</button>
</h2>
<div id="collapse5_3" class="accordion-collapse collapse"
aria-labelledby="heading5_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong>
<code>top_two = merged.groupby("genre").mean().sort_values(by="rating", ascending=False).drop(columns="pages").take([0, 1])</code></p>
<p>We first groupby the <code>merged</code> DataFrame by
<code>"genre"</code> and calculates the mean rating for each genre. Then
we sort these genres by their average rating in descending order so the
higest rated are at the top. Then, <code>"pages"</code> is dropped since
it’s not needed in our output. Finally, we select the top two genres
with the highest average ratings using <code>.take([0, 1])</code>, which
keeps only the first two rows.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 67%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<p>Based on the data in <code>top_two</code>, Matilda recommends that
Aathi purchase a fantasy book. However, Aathi is skeptical because he
recognizes that the data in <code>merged</code> is only a sample from
the larger population of all transactions at Bill’s Book Bonanza. Before
he makes his purchase, he decides to do a permutation test to determine
whether fantasy books have higher ratings than mystery books in this
larger population.</p>
<p><br></p>
<h3 id="problem-5.4">Problem 5.4</h3>
<p>Select the best statement of the null hypothesis for this permutation
test.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Among all books sold at Bill’s Book Bonanza, fantasy books have a
higher rating than mystery books, on average.</p></li>
<li><p><input type="radio" disabled="" /> Among all books sold at Bill’s Book Bonanza, fantasy books do not
have a higher rating than mystery books, on average.</p></li>
<li><p><input type="radio" disabled="" /> Among all books sold at Bill’s Book Bonanza, fantasy books have the
same rating as mystery books, on average.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_4" aria-expanded="true" aria-controls="collapse5_4">
Click to view the solution.
</button>
</h2>
<div id="collapse5_4" class="accordion-collapse collapse"
aria-labelledby="heading5_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Among all books sold at Bill’s Book Bonanza,
fantasy books have the same rating as mystery books, on average.</p>
<p>The null hypothesis for a permutation test assumes that there is no
difference in the population means, implying that fantasy and mystery
books have the same average ratings.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 62%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-5.5">Problem 5.5</h3>
<p>Select the best statement of the alternative hypothesis for this
permutation test.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Among all books sold at Bill’s Book Bonanza, fantasy books have a
higher rating than mystery books, on average.</p></li>
<li><p><input type="radio" disabled="" /> Among all books sold at Bill’s Book Bonanza, fantasy books do not
have a higher rating than mystery books, on average.</p></li>
<li><p><input type="radio" disabled="" /> Among all books sold at Bill’s Book Bonanza, fantasy books have the
same rating as mystery books, on average.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_5">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_5" aria-expanded="true" aria-controls="collapse5_5">
Click to view the solution.
</button>
</h2>
<div id="collapse5_5" class="accordion-collapse collapse"
aria-labelledby="heading5_5" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Among all books sold at Bill’s Book Bonanza,
fantasy books have a higher rating than mystery books, on average.</p>
<p>The alternative hypothesis is that that fantasy books have higher
ratings than mystery books, representing the claim being tested against
the null hypothesis.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 69%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-5.6">Problem 5.6</h3>
<p>Aathi decides to use the mean rating for mystery books minus the mean
rating for fantasy books as his test statistic. What is his observed
value of this statistic?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_6">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_6" aria-expanded="true" aria-controls="collapse5_6">
Click to view the solution.
</button>
</h2>
<div id="collapse5_6" class="accordion-collapse collapse"
aria-labelledby="heading5_6" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> -0.12</p>
<p>This comes from subtracting the values provided in the grouped
DataFrame in the order mystery minus fantasy: <span class="math inline">4.53 - 4.65 = -0.12</span>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 80%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-5.7">Problem 5.7</h3>
<p>Which of the following best describes how Aathi will interpret the
results of his permutation test?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> High values of the observed statistic will make him lean towards the
alternative hypothesis.</p></li>
<li><p><input type="radio" disabled="" /> Low values of the observed statistic will make him lean towards the
alternative hypothesis.</p></li>
<li><p><input type="radio" disabled="" /> Both high and low values of the observed statistic will make him lean
towards the alternative hypothesis.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_7">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_7" aria-expanded="true" aria-controls="collapse5_7">
Click to view the solution.
</button>
</h2>
<div id="collapse5_7" class="accordion-collapse collapse"
aria-labelledby="heading5_7" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Low values of the observed statistic will
make him lean towards the alternative hypothesis.</p>
<p>Since we are subtracting in the order mystery rating minus fantasy
rating, a low (negative) observed statistic would indicate that fantasy
books have higher ratings than mystery books. So low values would cause
us to reject the null in favor of the alternative.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 66%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-5.8">Problem 5.8</h3>
<p>Fill in the blanks in the following code to perform Aathi’s
permutation test.</p>
<pre><code>just_two = merged[(merged.get(&quot;genre&quot;) == &quot;Fantasy&quot;) |
                  (merged.get(&quot;genre&quot;) == &quot;Mystery&quot;)]

rating_stats = np.array([])
for i in np.arange(10000):
    shuffled = just_two.assign(shuffled = __(a)__)
    grouped = shuffled.groupby(&quot;genre&quot;).mean().get(&quot;shuffled&quot;)
    mystery_mean = grouped.iloc[__(b)__]
    fantasy_mean = grouped.iloc[__(c)__]
    rating_stats = np.append(rating_stats, mystery_mean - fantasy_mean)</code></pre>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_8">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_8" aria-expanded="true" aria-controls="collapse5_8">
Click to view the solution.
</button>
</h2>
<div id="collapse5_8" class="accordion-collapse collapse"
aria-labelledby="heading5_8" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<ol type="a">
<li><code>np.random.permutation(just_two.get("rating"))</code></li>
</ol>
<p>We have to permute the <code>"rating"</code> column because of the
code provided on the next line, which groups by genre.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 75%.</p>
<ol start="2" type="a">
<li><code>1</code></li>
</ol>
<p>It’s important for this question to know that
<code>.groupby("genre") sorts genres alphabetically. In this case, the genre</code>“Fantasy”<code>is before</code>“Mystery”<code>alphabetically,</code>“Mystery”<code>corresponds to the second row (</code>iloc[1]`).
</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>The average score on this problem was
57%.</p>
<ol start="3" type="a">
<li><code>0</code> <hr/><h5>Difficulty: ⭐️⭐️⭐️</h5><p>The average score
on this problem was 60%.</p></li>
</ol>
<p><code>"Fantasy"</code> is located in the first row, so we use
<code>iloc[0]</code>.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-5.9">Problem 5.9</h3>
<p>Aathi gets a <code>p_value</code> of <span
class="math inline">0.008</span>, and he will base his purchase on this
result, using the standard p-value cutoff of <span
class="math inline">0.05</span>. What will Aathi end up doing?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Aathi fails to reject the null hypothesis and will purchase a fantasy
book.</p></li>
<li><p><input type="radio" disabled="" /> Aathi fails to reject the null hypothesis and will purchase a mystery
book.</p></li>
<li><p><input type="radio" disabled="" /> Aathi rejects the null hypothesis and will purchase a fantasy
book.</p></li>
<li><p><input type="radio" disabled="" /> Aathi rejects the null hypothesis and will purchase a mystery
book.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_9">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_9" aria-expanded="true" aria-controls="collapse5_9">
Click to view the solution.
</button>
</h2>
<div id="collapse5_9" class="accordion-collapse collapse"
aria-labelledby="heading5_9" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Aathi rejects the null hypothesis and will
purchase a fantasy book.</p>
<p>The p-value is lower than our cutoff of <span class="math inline">0.05</span> so we reject the null hypothesis because
our observed data doesn’t look like the data we simulated under the
assumptions of the null hypothesis.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 68%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-6">Problem 6</h2>
<p>You are browsing the IKEA showroom, deciding whether to purchase the
BILLY bookcase or the LOMMARP bookcase. You are concerned about the
amount of time it will take to assemble your new bookcase, so you look
up the assembly times reported in <code>app_data</code>. Thinking of the
data in <code>app_data</code> as a random sample of all IKEA purchases,
you want to perform a permutation test to test the following
hypotheses.</p>
<p><strong>Null Hypothesis</strong>: The assembly time for the BILLY
bookcase and the assembly time for the LOMMARP bookcase come from the
same distribution.</p>
<p><strong>Alternative Hypothesis</strong>: The assembly time for the
BILLY bookcase and the assembly time for the LOMMARP bookcase come from
different distributions.</p>
<p><br></p>
<h3 id="problem-6.1">Problem 6.1</h3>
<p>Suppose we added a column to <code>app_data</code> called
<code>'minutes'</code>, containing the <code>'assembly_time'</code>
value for each entry converted to an integer amount of minutes. Then, we
query <code>app_data</code> to keep only the BILLY bookcases, then
average the <code>'minutes'</code> column. In addition, we separately
query <code>app_data</code> to keep only the LOMMARP bookcases, then
average the <code>'minutes'</code> column. If the null hypothesis is
true, which of the following statements about these two averages is
correct?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> These two averages are the same.</p></li>
<li><p><input type="radio" disabled="" /> Any difference between these two averages is due to random
chance.</p></li>
<li><p><input type="radio" disabled="" /> Any difference between these two averages cannot be ascribed to
random chance alone.</p></li>
<li><p><input type="radio" disabled="" /> The difference between these averages is statistically
significant.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading6_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6_1" aria-expanded="true" aria-controls="collapse6_1">
Click to view the solution.
</button>
</h2>
<div id="collapse6_1" class="accordion-collapse collapse"
aria-labelledby="heading6_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Any difference between these two averages
is due to random chance.</p>
<p>If the null hypothesis is true, this means that the time recorded in
<code>app_data</code> for each BILLY bookcase is a random number that
comes from some distribution, and the time recorded in
<code>app_data</code> for each LOMMARP bookcase is a random number that
comes from <em>the same</em> distribution. Each assembly time is a
random number, so even if the null hypothesis is true, if we take one
person who assembles a BILLY bookcase and one person who assembles a
LOMMARP bookcase, there is no guarantee that their assembly times will
match. Their assembly times might match, or they might be different,
because assembly time is random. Randomness is the only reason that
their assembly times might be different, as the null hypothesis says
there is no systematic difference in assembly times between the two
bookcases. Specifically, it’s not the case that one typically takes
longer to assemble than the other.</p>
<p>With those points in mind, let’s go through the answer choices.</p>
<p>The first answer choice is incorrect. Just because two sets of
numbers are drawn from the same distribution, the numbers themselves
might be different due to randomness, and the averages might also be
different. Maybe just by chance, the people who assembled the BILLY
bookcases and recorded their times in <code>app_data</code> were slower
on average than the people who assembled LOMMARP bookcases. If the null
hypothesis is true, this difference in average assembly time should be
small, but it very likely exists to some degree.</p>
<p>The second answer choice is correct. If the null hypothesis is true,
the only reason for the difference is random chance alone.</p>
<p>The third answer choice is incorrect for the same reason that the
second answer choice is correct. If the null hypothesis is true, any
difference must be explained by random chance.</p>
<p>The fourth answer choice is incorrect. If there is a difference
between the averages, it should be very small and not statistically
significant. In other words, if we did a hypothesis test and the null
hypothesis was true, we should fail to reject the null.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 77%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-6.2">Problem 6.2</h3>
<p>For the permutation test, we’ll use as our test statistic the average
assembly time for BILLY bookcases minus the average assembly time for
LOMMARP bookcases, in minutes.</p>
<p>Complete the code below to generate one simulated value of the test
statistic in a new way, without using
<code>np.random.permutation</code>.</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>billy <span class="op">=</span> (app_data.get(<span class="st">&#39;product&#39;</span>) <span class="op">==</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;BILLY Bookcase, white, 31 1/2x11x79 1/2&#39;</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>lommarp <span class="op">=</span> (app_data.get(<span class="st">&#39;product&#39;</span>) <span class="op">==</span> </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>          <span class="st">&#39;LOMMARP Bookcase, dark blue-green, 25 5/8x78 3/8&#39;</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>billy_lommarp <span class="op">=</span> app_data[billy<span class="op">|</span>lommarp]</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>billy_mean <span class="op">=</span> np.random.choice(billy_lommarp.get(<span class="st">&#39;minutes&#39;</span>), billy.<span class="bu">sum</span>()).mean()</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>lommarp_mean <span class="op">=</span> _________</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>billy_mean <span class="op">-</span> lommarp_mean</span></code></pre></div>
<p>What goes in the blank?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>billy_lommarp[lommarp].get('minutes').mean()</code></p></li>
<li><p><input type="radio" disabled="" /> <code>np.random.choice(billy_lommarp.get('minutes'), lommarp.sum()).mean()</code></p></li>
<li><p><input type="radio" disabled="" /> <code>billy_lommarp.get('minutes').mean() - billy_mean</code></p></li>
<li><p><input type="radio" disabled="" /> <code>(billy_lommarp.get('minutes').sum() - billy_mean * billy.sum())/lommarp.sum()</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading6_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6_2" aria-expanded="true" aria-controls="collapse6_2">
Click to view the solution.
</button>
</h2>
<div id="collapse6_2" class="accordion-collapse collapse"
aria-labelledby="heading6_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong>
<code>(billy_lommarp.get('minutes').sum() - billy_mean * billy.sum())/lommarp.sum()</code></p>
<p>The first line of code creates a boolean Series with a True value for
every BILLY bookcase, and the second line of code creates the analogous
Series for the LOMMARP bookcase. The third line queries to define a
DataFrame called <code>billy_lommarp</code> containing all products that
are BILLY or LOMMARP bookcases. In other words, this DataFrame contains
a mix of BILLY and LOMMARP bookcases.</p>
<p>From this point, the way we would normally proceed in a permutation
test would be to use <code>np.random.permutation</code> to shuffle one
of the two relevant columns (either <code>'product'</code> or
<code>'minutes'</code>) to create a random pairing of assembly times
with products. Then we would calculate the average of all assembly times
that were randomly assigned to the label BILLY. Similarly, we’d
calculate the average of all assembly times that were randomly assigned
to the label LOMMARP. Then we’d subtract these averages to get one
simulated value of the test statistic. To run the permutation test, we’d
have to repeat this process many times.</p>
<p>In this problem, we need to generate a simulated value of the test
statistic, without randomly shuffling one of the columns. The code
starts us off by defining a variable called <code>billy_mean</code> that
comes from using <code>np.random.choice</code>. There’s a lot going on
here, so let’s break it down. Remember that the first argument to
<code>np.random.choice</code> is a sequence of values to choose from,
and the second is the number of random choices to make. The default
behavior is to make the random choices without replacement, so that no
element that has already been chosen can be chosen again. Here, we’re
making our random choices from the <code>'minutes'</code> column of
<code>billy_lommarp</code>. The number of choices to make from this
collection of values is <code>billy.sum()</code>, which is the sum of
all values in the <code>billy</code> Series defined in the first line of
code. The <code>billy</code> Series contains True/False values, but in
Python, True counts as 1 and False counts as 0, so
<code>billy.sum()</code> evaluates to the number of True entries in
<code>billy</code>, which is the number of BILLY bookcases recorded in
<code>app_data</code>. It helps to think of the random process like
this:</p>
<ol type="1">
<li>Collect all the assembly times of any BILLY or LOMMARP bookcase in a
large bag.</li>
<li>Pull out a random assembly time from this bag.</li>
<li>Repeat step 2, drawing as many times as there are BILLY bookcases,
without replacement.</li>
</ol>
<p>If we think of the random times we draw as being labeled BILLY, then
the remaining assembly times still leftover in the bag represent the
assembly times randomly labeled LOMMARP. In other words, this is a
random association of assembly times to labels (BILLY or LOMMARP), which
is the same thing we usually accomplish by shuffling in a permutation
test.</p>
<p>From here, we can proceed the same way as usual. First, we need to
calculate the average of all assembly times that were randomly assigned
to the label BILLY. This is done for us and stored in
<code>billy_mean</code>. We also need to calculate the average of all
assembly times that were randomly assigned the label LOMMARP. We’ll call
that <code>lommarp_mean</code>. Thinking of picking times out of a large
bag, this is the average of all the assembly times left in the bag. The
problem is there is no easy way to access the assembly times that were
not picked. We can take advantage of the fact that we can easily
calculate the total assembly time of all BILLY and LOMMARP bookcases
together with <code>billy_lommarp.get('minutes').sum()</code>. Then if
we subtract the total assembly time of all bookcases randomly labeled
BILLY, we’ll be left with the total assembly time of all bookcases
randomly labeled LOMMARP. That is,
<code>billy_lommarp.get('minutes').sum() - billy_mean * billy.sum()</code>
represents the total assembly time of all bookcases randomly labeled
LOMMARP. The count of the number of LOMMARP bookcases is given by
<code>lommarp.sum()</code> so the average is
<code>(billy_lommarp.get('minutes').sum() - billy_mean * billy.sum())/lommarp.sum()</code>.</p>
<p>A common wrong answer for this question was the second answer choice,
<code>np.random.choice(billy_lommarp.get('minutes'), lommarp.sum()).mean()</code>.
This mimics the structure of how <code>billy_mean</code> was defined so
it’s a natural guess. However, this corresponds to the following random
process, which doesn’t associate each assembly with a unique label
(BILLY or LOMMARP):</p>
<ol type="1">
<li>Collect all the assembly times of any BILLY or LOMMARP bookcase in a
large bag.</li>
<li>Pull out a random assembly time from this bag.</li>
<li>Repeat, drawing as many times as there are BILLY bookcases, without
replacement.</li>
<li>Collect all the assembly times of any BILLY or LOMMARP bookcase in a
large bag.</li>
<li>Pull out a random assembly time from this bag.</li>
<li>Repeat step 5, drawing as many times as there are LOMMARP bookcases,
without replacement.</li>
</ol>
<p>We could easily get the same assembly time once for BILLY and once
for LOMMARP, while other assembly times could get picked for neither.
This process doesn’t split the data into two random groups as desired.
</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️⭐️</h5>
<p>The average score on this problem
was 12%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-7">Problem 7</h2>
<p>You are browsing the IKEA showroom, deciding whether to purchase the
BILLY bookcase or the LOMMARP bookcase. You are concerned about the
amount of time it will take to assemble your new bookcase, so you look
up the assembly times reported in <code>app_data</code>. Thinking of the
data in <code>app_data</code> as a random sample of all IKEA purchases,
you want to perform a permutation test to test the following
hypotheses.</p>
<p><strong>Null Hypothesis</strong>: The assembly time for the BILLY
bookcase and the assembly time for the LOMMARP bookcase come from the
same distribution.</p>
<p><strong>Alternative Hypothesis</strong>: The assembly time for the
BILLY bookcase and the assembly time for the LOMMARP bookcase come from
different distributions.</p>
<p><br></p>
<h3 id="problem-7.1">Problem 7.1</h3>
<p>Suppose we query <code>app_data</code> to keep only the BILLY
bookcases, then average the <code>'minutes'</code> column. In addition,
we separately query <code>app_data</code> to keep only the LOMMARP
bookcases, then average the <code>'minutes'</code> column. If the null
hypothesis is true, which of the following statements about these two
averages is correct?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> These two averages are the same.</p></li>
<li><p><input type="radio" disabled="" /> Any difference between these two averages is due to random
chance.</p></li>
<li><p><input type="radio" disabled="" /> Any difference between these two averages cannot be ascribed to
random chance alone.</p></li>
<li><p><input type="radio" disabled="" /> The difference between these averages is statistically
significant.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading7_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse7_1" aria-expanded="true" aria-controls="collapse7_1">
Click to view the solution.
</button>
</h2>
<div id="collapse7_1" class="accordion-collapse collapse"
aria-labelledby="heading7_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Any difference between these two averages
is due to random chance.</p>
<p>If the null hypothesis is true, this means that the time recorded in
<code>app_data</code> for each BILLY bookcase is a random number that
comes from some distribution, and the time recorded in
<code>app_data</code> for each LOMMARP bookcase is a random number that
comes from <em>the same</em> distribution. Each assembly time is a
random number, so even if the null hypothesis is true, if we take one
person who assembles a BILLY bookcase and one person who assembles a
LOMMARP bookcase, there is no guarantee that their assembly times will
match. Their assembly times might match, or they might be different,
because assembly time is random. Randomness is the only reason that
their assembly times might be different, as the null hypothesis says
there is no systematic difference in assembly times between the two
bookcases. Specifically, it’s not the case that one typically takes
longer to assemble than the other.</p>
<p>With those points in mind, let’s go through the answer choices.</p>
<p>The first answer choice is incorrect. Just because two sets of
numbers are drawn from the same distribution, the numbers themselves
might be different due to randomness, and the averages might also be
different. Maybe just by chance, the people who assembled the BILLY
bookcases and recorded their times in <code>app_data</code> were slower
on average than the people who assembled LOMMARP bookcases. If the null
hypothesis is true, this difference in average assembly time should be
small, but it very likely exists to some degree.</p>
<p>The second answer choice is correct. If the null hypothesis is true,
the only reason for the difference is random chance alone.</p>
<p>The third answer choice is incorrect for the same reason that the
second answer choice is correct. If the null hypothesis is true, any
difference must be explained by random chance.</p>
<p>The fourth answer choice is incorrect. If there is a difference
between the averages, it should be very small and not statistically
significant. In other words, if we did a hypothesis test and the null
hypothesis was true, we should fail to reject the null.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 77%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-7.2">Problem 7.2</h3>
<p>For the permutation test, we’ll use as our test statistic the average
assembly time for BILLY bookcases minus the average assembly time for
LOMMARP bookcases, in minutes.</p>
<p>Complete the code below to generate one simulated value of the test
statistic in a new way, without using
<code>np.random.permutation</code>.</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>billy <span class="op">=</span> (app_data.get(<span class="st">&#39;product&#39;</span>) <span class="op">==</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;BILLY Bookcase, white, 31 1/2x11x79 1/2&#39;</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>lommarp <span class="op">=</span> (app_data.get(<span class="st">&#39;product&#39;</span>) <span class="op">==</span> </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>          <span class="st">&#39;LOMMARP Bookcase, dark blue-green, 25 5/8x78 3/8&#39;</span>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>billy_lommarp <span class="op">=</span> app_data[billy<span class="op">|</span>lommarp]</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>billy_mean <span class="op">=</span> np.random.choice(billy_lommarp.get(<span class="st">&#39;minutes&#39;</span>), billy.<span class="bu">sum</span>(), replace<span class="op">=</span><span class="va">False</span>).mean()</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>lommarp_mean <span class="op">=</span> _________</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>billy_mean <span class="op">-</span> lommarp_mean</span></code></pre></div>
<p>What goes in the blank?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>billy_lommarp[lommarp].get('minutes').mean()</code></p></li>
<li><p><input type="radio" disabled="" /> <code>np.random.choice(billy_lommarp.get('minutes'), lommarp.sum(), replace=False).mean()</code></p></li>
<li><p><input type="radio" disabled="" /> <code>billy_lommarp.get('minutes').mean() - billy_mean</code></p></li>
<li><p><input type="radio" disabled="" /> <code>(billy_lommarp.get('minutes').sum() - billy_mean * billy.sum())/lommarp.sum()</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading7_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse7_2" aria-expanded="true" aria-controls="collapse7_2">
Click to view the solution.
</button>
</h2>
<div id="collapse7_2" class="accordion-collapse collapse"
aria-labelledby="heading7_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong>
<code>(billy_lommarp.get('minutes').sum() - billy_mean * billy.sum())/lommarp.sum()</code></p>
<p>The first line of code creates a boolean Series with a True value for
every BILLY bookcase, and the second line of code creates the analogous
Series for the LOMMARP bookcase. The third line queries to define a
DataFrame called <code>billy_lommarp</code> containing all products that
are BILLY or LOMMARP bookcases. In other words, this DataFrame contains
a mix of BILLY and LOMMARP bookcases.</p>
<p>From this point, the way we would normally proceed in a permutation
test would be to use <code>np.random.permutation</code> to shuffle one
of the two relevant columns (either <code>'product'</code> or
<code>'minutes'</code>) to create a random pairing of assembly times
with products. Then we would calculate the average of all assembly times
that were randomly assigned to the label BILLY. Similarly, we’d
calculate the average of all assembly times that were randomly assigned
to the label LOMMARP. Then we’d subtract these averages to get one
simulated value of the test statistic. To run the permutation test, we’d
have to repeat this process many times.</p>
<p>In this problem, we need to generate a simulated value of the test
statistic, without randomly shuffling one of the columns. The code
starts us off by defining a variable called <code>billy_mean</code> that
comes from using <code>np.random.choice</code>. There’s a lot going on
here, so let’s break it down. Remember that the first argument to
<code>np.random.choice</code> is a sequence of values to choose from,
and the second is the number of random choices to make. And we set
<code>replace=False</code>, so that no element that has already been
chosen can be chosen again. Here, we’re making our random choices from
the <code>'minutes'</code> column of <code>billy_lommarp</code>. The
number of choices to make from this collection of values is
<code>billy.sum()</code>, which is the sum of all values in the
<code>billy</code> Series defined in the first line of code. The
<code>billy</code> Series contains True/False values, but in Python,
True counts as 1 and False counts as 0, so <code>billy.sum()</code>
evaluates to the number of True entries in <code>billy</code>, which is
the number of BILLY bookcases recorded in <code>app_data</code>. It
helps to think of the random process like this:</p>
<ol type="1">
<li>Collect all the assembly times of any BILLY or LOMMARP bookcase in a
large bag.</li>
<li>Pull out a random assembly time from this bag.</li>
<li>Repeat step 2, drawing as many times as there are BILLY bookcases,
without replacement.</li>
</ol>
<p>If we think of the random times we draw as being labeled BILLY, then
the remaining assembly times still leftover in the bag represent the
assembly times randomly labeled LOMMARP. In other words, this is a
random association of assembly times to labels (BILLY or LOMMARP), which
is the same thing we usually accomplish by shuffling in a permutation
test.</p>
<p>From here, we can proceed the same way as usual. First, we need to
calculate the average of all assembly times that were randomly assigned
to the label BILLY. This is done for us and stored in
<code>billy_mean</code>. We also need to calculate the average of all
assembly times that were randomly assigned the label LOMMARP. We’ll call
that <code>lommarp_mean</code>. Thinking of picking times out of a large
bag, this is the average of all the assembly times left in the bag. The
problem is there is no easy way to access the assembly times that were
not picked. We can take advantage of the fact that we can easily
calculate the total assembly time of all BILLY and LOMMARP bookcases
together with <code>billy_lommarp.get('minutes').sum()</code>. Then if
we subtract the total assembly time of all bookcases randomly labeled
BILLY, we’ll be left with the total assembly time of all bookcases
randomly labeled LOMMARP. That is,
<code>billy_lommarp.get('minutes').sum() - billy_mean * billy.sum()</code>
represents the total assembly time of all bookcases randomly labeled
LOMMARP. The count of the number of LOMMARP bookcases is given by
<code>lommarp.sum()</code> so the average is
<code>(billy_lommarp.get('minutes').sum() - billy_mean * billy.sum())/lommarp.sum()</code>.</p>
<p>A common wrong answer for this question was the second answer choice,
<code>np.random.choice(billy_lommarp.get('minutes'), lommarp.sum(), replace=False).mean()</code>.
This mimics the structure of how <code>billy_mean</code> was defined so
it’s a natural guess. However, this corresponds to the following random
process, which doesn’t associate each assembly with a unique label
(BILLY or LOMMARP):</p>
<ol type="1">
<li>Collect all the assembly times of any BILLY or LOMMARP bookcase in a
large bag.</li>
<li>Pull out a random assembly time from this bag.</li>
<li>Repeat, drawing as many times as there are BILLY bookcases, without
replacement.</li>
<li>Collect all the assembly times of any BILLY or LOMMARP bookcase in a
large bag.</li>
<li>Pull out a random assembly time from this bag.</li>
<li>Repeat step 5, drawing as many times as there are LOMMARP bookcases,
without replacement.</li>
</ol>
<p>We could easily get the same assembly time once for BILLY and once
for LOMMARP, while other assembly times could get picked for neither.
This process doesn’t split the data into two random groups as
desired.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 12%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<p class="meta"><em>Source:</em> sp23-final — Q7</p>
<h2 id="problem-8">Problem 8</h2>
<p>Gabriel is originally from Texas and is trying to convince his
friends that Texas has better weather than California. Sophia, who is
originally from San Diego, is determined to prove Gabriel wrong.</p>
<p>Coincidentally, both are born in February, so they decide to look at
the mean number of sunshine hours of all cities in California and Texas
in February. They find that the mean number of sunshine hours for
California cities in February is 275, while the mean number of sunshine
hours for Texas cities in February is 250. They decide to test the
following hypotheses:</p>
<ul>
<li><p><strong>Null Hypothesis</strong>: The distribution of sunshine
hours in February for cities in California and Texas are drawn from the
same population distribution.</p></li>
<li><p><strong>Alternative Hypothesis</strong>: The distribution of
sunshine hours in February for cities in California and Texas are not
drawn from the same population distribution; rather, California cities
see more sunshine hours in February on average than Texas
cities.</p></li>
</ul>
<p>The test statistic they decide to use is:</p>
<p><span class="math display">\text{mean sunshine hours in California
cities – mean sunshine hours in Texas cities}</span></p>
<p>To simulate data under the null, Sophia proposes the following
plan:</p>
<ol type="1">
<li><p>Count the number of Texas cities, and call that number
<code>t</code>. Count the total number of cities in both California and
Texas, and call that number <code>n</code>.</p></li>
<li><p>Find the total number of sunshine hours across all California and
Texas cities in February, and call that number
<code>total</code>.</p></li>
<li><p>Take a random sample of <code>t</code> sunshine hours from the
entire sequence of California and Texas sunshine hours in February in
the dataset. Call this random sample <code>t_samp</code>.</p></li>
<li><p>Find the difference between the mean of the values that are not
in <code>t_samp</code> (the California sample) and the mean of the
values that are in <code>t_samp</code> (the Texas sample).</p></li>
</ol>
<p><br></p>
<h3 id="problem-8.1">Problem 8.1</h3>
<p>What type of test is this?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> Permutation test</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_1" aria-expanded="true" aria-controls="collapse8_1">
Click to view the solution.
</button>
</h2>
<div id="collapse8_1" class="accordion-collapse collapse"
aria-labelledby="heading8_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: Permutation test</p>
<p>Any time we want to decide whether two samples look like they were
drawn from the same population distribution, we are conducting a
permutation test. In this case, the two samples are (1) the sample of
California sunshine hours in February and (2) the sample of Texas
sunshine hours in February.</p>
<p>Even though Gabriel and Sophia aren’t “shuffling” the way we normally
do when conducting a permutation test, they’re still performing a
permutation test. They’re combining the sunshine hours from both states
into a single dataset and then randomly reallocating them into two new
groups, one representing California and the other Texas, without regard
to their original labels.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 52%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<p>Complete the implementation of the function <code>one_stat</code>,
which takes in a DataFrame <code>df</code> that has two columns —
<code>"State"</code>, which is either <code>"California"</code> or
<code>"Texas"</code>, and <code>"Feb"</code>, which contains the number
of sunshine hours in February for each city — and returns a single
simulated test statistic using Sophia’s plan.</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> one_stat(df):</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>        <span class="co"># You don&#39;t need to fill in the ...,</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>        <span class="co"># assume we&#39;ve correctly filled them in so that</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>        <span class="co"># texas_only has only the &quot;Texas&quot; rows from df.</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>        texas_only <span class="op">=</span> ...</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>        t <span class="op">=</span> texas_only.shape[<span class="dv">0</span>]</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> df.shape[<span class="dv">0</span>]</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>        total <span class="op">=</span> df.get(<span class="st">&quot;Feb&quot;</span>).<span class="bu">sum</span>()</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>        t_samp <span class="op">=</span> np.random.choice(df.get(<span class="st">&quot;Feb&quot;</span>), t, __(b)__)</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>        c_mean <span class="op">=</span> __(c)__</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>        t_mean <span class="op">=</span> t_samp.<span class="bu">sum</span>() <span class="op">/</span> t</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> c_mean <span class="op">-</span> t_mean</span></code></pre></div>
<p><br></p>
<h3 id="problem-8.2">Problem 8.2</h3>
<p>What goes in blank (b)?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>replace=True</code></p></li>
<li><p><input type="radio" disabled="" /> <code>replace=False</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_2" aria-expanded="true" aria-controls="collapse8_2">
Click to view the solution.
</button>
</h2>
<div id="collapse8_2" class="accordion-collapse collapse"
aria-labelledby="heading8_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: <code>replace=False</code></p>
<p>In order for there to be no overlap between the elements in the Texas
sample and California sample, the Texas sample needs to be taken out of
the total collection of sunshine hours without replacement.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 30%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<p><br></p>
<h3 id="problem-8.3">Problem 8.3</h3>
<p>What goes in blank (c)? <em>(Hint: Our solution uses 4 of the
variables that are defined before <code>c_mean</code>.)</em></p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_3" aria-expanded="true" aria-controls="collapse8_3">
Click to view the solution.
</button>
</h2>
<div id="collapse8_3" class="accordion-collapse collapse"
aria-labelledby="heading8_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>:
<code>(total - t_samp.sum) / (n - t)</code></p>
<p>For the <code>c_mean</code> calculation, which represents the mean
sunshine hours for the California cities in the simulation, we need to
subtract the total sunshine hours of the Texas sample
(<code>t_samp.sum()</code>) from the total sunshine hours of both states
(<code>total</code>). This gives us the sum of the California sunshine
hours in the simulation. We then divide this sum by the number of
California cities, which is the total number of cities (<code>n</code>)
minus the number of Texas cities (<code>t</code>), to get the mean
sunshine hours for California cities.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 21%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<p>Fill in the blanks below to accurately complete the provided
statement.</p>
<p>“If Sophia and Gabriel want to test the null hypothesis that the mean
number of sunshine hours in February in the two states is equal using a
different tool, they could use bootstrapping to create a confidence
interval for the true value of the test statistic they used in the above
test and check whether __(d)__ is in the interval."</p>
<p><br></p>
<h3 id="problem-8.4">Problem 8.4</h3>
<p>What goes in blank (d)? Your answer should be a specific number.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_4" aria-expanded="true" aria-controls="collapse8_4">
Click to view the solution.
</button>
</h2>
<div id="collapse8_4" class="accordion-collapse collapse"
aria-labelledby="heading8_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: 0</p>
<p>To conduct a hypothesis test using a confidence interval, our null
hypothesis must be of the form “the population parameter is equal to
<span class="math inline">x</span>”; the test is conducted by checking
whether <span class="math inline">x</span> is in the specified
interval.</p>
<p>Here, Sophia and Gabriel want to test whether the mean number of
sunshine hours in February for the two states is equal; since the
confidence interval they created was for the difference in mean sunshine
hours, they really want to check whether the difference in mean sunshine
hours is 0. (They created a confidence interval for the true value of
<span class="math inline">a - b</span>, and want to test whether <span class="math inline">a = b</span>; this is the same as testing whether
<span class="math inline">a - b = 0</span>.)</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 43%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-9">Problem 9</h2>
<p>Answer the following true/false questions.</p>
<p><br></p>
<h3 id="problem-9.1">Problem 9.1</h3>
<p><code>df.groupby("kind").mean()</code> will have 5 columns.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> True</p></li>
<li><p><input type="radio" disabled="" /> False</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading9_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse9_1" aria-expanded="true" aria-controls="collapse9_1">
Click to view the solution.
</button>
</h2>
<div id="collapse9_1" class="accordion-collapse collapse"
aria-labelledby="heading9_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> True</p>
<p>Referring to <code>df</code> at the beginning of the exam, we could
see that 5 of the columns have numerical values as inputs, and thus
<code>df.groupby("kind").mean()</code> will return the mean of these 5
numerical columns</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 74%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-10">Problem 10</h2>
<p>Answer the following true/false questions.</p>
<p><br></p>
<h3 id="problem-10.1">Problem 10.1</h3>
<p>For a given sample, a 90% confidence interval is narrower than a 95%
confidence interval.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> True</p></li>
<li><p><input type="radio" disabled="" /> False</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading10_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10_1" aria-expanded="true" aria-controls="collapse10_1">
Click to view the solution.
</button>
</h2>
<div id="collapse10_1" class="accordion-collapse collapse"
aria-labelledby="heading10_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> True</p>
<p>The more narrow an interval is, the less confident one is that the
intervals one creates will contain the true population parameter.</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 91%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<p><br></p>
<h3 id="problem-10.2">Problem 10.2</h3>
<p>The distribution of sample proportions is roughly normal for large
samples because of the Central Limit Theorem.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> True</p></li>
<li><p><input type="radio" disabled="" /> False</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading10_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10_2" aria-expanded="true" aria-controls="collapse10_2">
Click to view the solution.
</button>
</h2>
<div id="collapse10_2" class="accordion-collapse collapse"
aria-labelledby="heading10_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> True</p>
<p>This is just the definition of Central Limit Theorem. Remember that a
proportion is a mean of 0s and 1s.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 43%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<p><br></p>
<h3 id="problem-10.3">Problem 10.3</h3>
<p>Chebyshev’s inequality implies that we can always create at least a
96% confidence interval from a bootstrap distribution using the mean of
the distribution plus or minus 5 standard deviations.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> True</p></li>
<li><p><input type="radio" disabled="" /> False</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading10_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10_3" aria-expanded="true" aria-controls="collapse10_3">
Click to view the solution.
</button>
</h2>
<div id="collapse10_3" class="accordion-collapse collapse"
aria-labelledby="heading10_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> True</p>
<p>By Chebyshev’s theorem, at least <code>1 - 1 / z^2</code> of the data
is within <code>z</code> STD of the mean. Thus
<code>1 - 1 / 5^2 = 0.96</code> of the data is within 5 STD of the
mean.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 51%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-11">Problem 11</h2>
<p>Suppose Tiffany has a random sample of dogs. Select the most
appropriate technique to answer each of the following questions using
Tiffany’s dog sample.</p>
<p><br></p>
<h3 id="problem-11.1">Problem 11.1</h3>
<p>Do small dogs typically live longer than medium and large dogs?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Standard hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> Permutation test</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading11_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse11_1" aria-expanded="true" aria-controls="collapse11_1">
Click to view the solution.
</button>
</h2>
<div id="collapse11_1" class="accordion-collapse collapse"
aria-labelledby="heading11_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Option 2: Permutation test.</p>
<p>We have two parameters: dog size and life expectancy. Here if there
was no significant statistical difference between the life expectancy of
different dog sizes, randomly assigning our sampled life expectancy to
each dog should lead us to observe similar observations to the observed
statistic. Thus using a permutation test to comapre the two groups makes
the most sense. We’re not really trying to estimate a spcecific value so
bootstrapping isn’t a good idea here. Also, there’s not really a good
way to randomly generate life expectancies so a hypothesis test is not a
good idea here.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 77%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-11.2">Problem 11.2</h3>
<p>Does Tiffany’s sample have an even distribution of dog kinds?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Standard hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> Permutation test</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading11_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse11_2" aria-expanded="true" aria-controls="collapse11_2">
Click to view the solution.
</button>
</h2>
<div id="collapse11_2" class="accordion-collapse collapse"
aria-labelledby="heading11_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Option 1: Standard hypothesis test.</p>
<p>We’re not really comparing a variable between two groups, but rather
looking at the overall distribution, so Permutation testing wouldn’t
work too well here. Again, we’re not really trying to estimate anything
here so bootstrapping isn’t a good idea. This leaves us with the
Standard Hypothesis Test, which makes sense if we use Total Variation
Distance as our test statistic.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 51%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-11.3">Problem 11.3</h3>
<p>What’s the median weight for herding dogs?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Standard hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> Permutation test</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading11_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse11_3" aria-expanded="true" aria-controls="collapse11_3">
Click to view the solution.
</button>
</h2>
<div id="collapse11_3" class="accordion-collapse collapse"
aria-labelledby="heading11_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Option 3: Bootstrapping</p>
<p>Here we’re trying to determine a specific value, which immediately
leads us to bootstrapping. The other two tests wouldn’t really make
sense in this context.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 83%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-11.4">Problem 11.4</h3>
<p>Do dogs live longer than 12 years on average?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Standard hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> Permutation test</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading11_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse11_4" aria-expanded="true" aria-controls="collapse11_4">
Click to view the solution.
</button>
</h2>
<div id="collapse11_4" class="accordion-collapse collapse"
aria-labelledby="heading11_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Option 3: Bootstrapping</p>
<p>While the wording here might throw us off, we’re really just trying
to determine the average life expectancy of dogs, and then see how that
compares to 12. This leads us to bootstrapping since we’re trying to
determine a specific value. The other two tests wouldn’t really make
sense in this context.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 43%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-12">Problem 12</h2>
<p>Answer the following true/false questions.</p>
<p><br></p>
<h3 id="problem-12.1">Problem 12.1</h3>
<p><span style="color:red"><b>Note: This problem is out of scope; it
covers material no longer included in the course.</b></span></p>
<p>When John Snow took off the handle from the Broad Street pump, the
number of cholera deaths decreased. Because of this, he could conclude
that cholera was caused by dirty water.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> True</p></li>
<li><p><input type="radio" disabled="" /> False</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading12_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse12_1" aria-expanded="true" aria-controls="collapse12_1">
Click to view the solution.
</button>
</h2>
<div id="collapse12_1" class="accordion-collapse collapse"
aria-labelledby="heading12_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> False</p>
<p>There are a couple details that the problem fails to convey and that
we cannot assume. 1) Do we even know that the pump he removed was the
only pump with dirty water? 2) Do we know that people even drank/took
water from the Broad Street pump? 3) Do we even know what kinds of
people drank from the Broad Street pump? We need to eliminate all
confounding factors, otherwise, it might be difficult to identify
causality.</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 91%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-12.2">Problem 12.2</h3>
<p>If you get a p-value of 0.009 using a permutation test, you can
conclude causality.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> True</p></li>
<li><p><input type="radio" disabled="" /> False</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading12_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse12_2" aria-expanded="true" aria-controls="collapse12_2">
Click to view the solution.
</button>
</h2>
<div id="collapse12_2" class="accordion-collapse collapse"
aria-labelledby="heading12_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> False</p>
<p>Permutation tests don’t prove causality. Remember, we use the
permutation test and calculate a p-value to simply reject a null
hypothesis, not to prove the alternative hypothesis.</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 91%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-12.3">Problem 12.3</h3>
<p><code>df.groupby("kind").mean()</code> will have 5 columns.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> True</p></li>
<li><p><input type="radio" disabled="" /> False</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading12_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse12_3" aria-expanded="true" aria-controls="collapse12_3">
Click to view the solution.
</button>
</h2>
<div id="collapse12_3" class="accordion-collapse collapse"
aria-labelledby="heading12_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> True</p>
<p>Referring to <code>df</code> at the beginning of the exam, we could
see that 5 of the columns have numerical values as inputs, and thus
<code>df.groupby("kind").mean()</code> will return the mean of these 5
numerical columns</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 74%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-12.4">Problem 12.4</h3>
<p>If the 95% confidence interval for dog price is [650, 900], there is
a 95% chance that the population dog price is between $650 and $900.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading12_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse12_4" aria-expanded="true" aria-controls="collapse12_4">
Click to view the solution.
</button>
</h2>
<div id="collapse12_4" class="accordion-collapse collapse"
aria-labelledby="heading12_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> False</p>
<p>Recall, what a k% confidence level states is that approximately k% of
the time, the intervals you create through this process will contain the
true population parameter. In this case, the confidence interval states
that approximately 95% of the time, the intervals you create through
this process will contain the population dog price. However, it will be
false if we state it in the reverse order since our population parameter
is already fixed.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 66%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-12.5">Problem 12.5</h3>
<p>For a given sample, an 90% confidence interval is narrower than a 95%
confidence interval.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> True</p></li>
<li><p><input type="radio" disabled="" /> False</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading12_5">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse12_5" aria-expanded="true" aria-controls="collapse12_5">
Click to view the solution.
</button>
</h2>
<div id="collapse12_5" class="accordion-collapse collapse"
aria-labelledby="heading12_5" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> True</p>
<p>The more narrow an interval is, the less confident one is that the
intervals one creates will contain the true population parameter.</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 91%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-12.6">Problem 12.6</h3>
<p>If you tried to bootstrap your sample 1,000 times but accidentally
sampled <strong>without</strong> replacement, the standard deviation of
your test statistics is always equal to 0.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> True</p></li>
<li><p><input type="radio" disabled="" /> False</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading12_6">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse12_6" aria-expanded="true" aria-controls="collapse12_6">
Click to view the solution.
</button>
</h2>
<div id="collapse12_6" class="accordion-collapse collapse"
aria-labelledby="heading12_6" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> True</p>
<p>Note that bootstrapping form a sample <strong>without</strong>
replacement just means that we’re drawing the same sample over and over
again. So the resulting test statistic will be the same between each
sample, and thus the std of the test statistic is 0.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 86%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-12.7">Problem 12.7</h3>
<p>You run a permutation test and store 500 simulated test statistics in
an array called <code>stats</code>. You can construct a 95% confidence
interval by finding the 2.5th and 97.5th percentiles of
<code>stats</code>.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> True</p></li>
<li><p><input type="radio" disabled="" /> False</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading12_7">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse12_7" aria-expanded="true" aria-controls="collapse12_7">
Click to view the solution.
</button>
</h2>
<div id="collapse12_7" class="accordion-collapse collapse"
aria-labelledby="heading12_7" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> False</p>
<p>False, to calculate a 95 percent confidence interval, we use
bootstrapping to add variation to our samples.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 40%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-12.8">Problem 12.8</h3>
<p>The distribution of sample proportions is roughly normal for large
samples because of the Central Limit Theorem.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> True</p></li>
<li><p><input type="radio" disabled="" /> False</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading12_8">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse12_8" aria-expanded="true" aria-controls="collapse12_8">
Click to view the solution.
</button>
</h2>
<div id="collapse12_8" class="accordion-collapse collapse"
aria-labelledby="heading12_8" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> True</p>
<p>This is just the definition of Central Limit Theorem.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 43%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-12.9">Problem 12.9</h3>
<p><span style="color:red"><b>Note: This problem is out of scope; it
covers material no longer included in the course.</b></span></p>
<p>The 20th percentile of the sequence [10, 30, 50, 40, 9, 70] is
30.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> True</p></li>
<li><p><input type="radio" disabled="" /> False</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading12_9">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse12_9" aria-expanded="true" aria-controls="collapse12_9">
Click to view the solution.
</button>
</h2>
<div id="collapse12_9" class="accordion-collapse collapse"
aria-labelledby="heading12_9" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> False</p>
<p>Recall, we find the <span class="math inline">p</span>th percentile
in 4 steps:</p>
<ol type="1">
<li><p>Sort the collection in increasing order. [9, 10, 30, 40, 50,
70]</p></li>
<li><p>Define <span class="math inline">h</span> to be <span class="math inline">p\%</span> of <span class="math inline">n</span>:
<span class="math display">h = \frac p{100} \cdot n</span> <span class="math display">h = \frac {20}{100} \cdot 6 = 1.2</span></p></li>
<li><p>If <span class="math inline">h</span> is an integer, define <span class="math inline">k = h</span>. Otherwise, let <span class="math inline">k</span> be the smallest integer greater than <span class="math inline">h</span>. Since h (which is 1.2) is not an integer,
so <span class="math inline">k</span> is 2</p></li>
<li><p>Take the <span class="math inline">k</span>th element of the
sorted collection (start counting from 1, not 0). Since 10 has an
ordinal rank of 2 in the data set, the 20th percentile value of the data
set is 10, not 30.</p></li>
</ol>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 66%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-12.10">Problem 12.10</h3>
<p>Chebyshev’s inequality implies that we can always create a 96%
confidence interval from a bootstrap distribution using the mean of the
distribution plus or minus 5 standard deviations.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading12_10">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse12_10" aria-expanded="true" aria-controls="collapse12_10">
Click to view the solution.
</button>
</h2>
<div id="collapse12_10" class="accordion-collapse collapse"
aria-labelledby="heading12_10" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> True</p>
<p>By Chebyshev’s theorem, at least <code>1 - 1 / z^2</code> of the data
is within <code>z</code> STD of the mean. Thus at least
<code>1 - 1 / 5^2 = 0.96</code> of the data is within 5 STD of the
mean.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 51%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<p class="meta"><em>Source:</em> su24-final — Q6</p>
<h2 id="problem-13">Problem 13</h2>
<p>You want to use the data in <code>stages</code> to test the following
hypotheses:</p>
<ul>
<li><p><strong>Null Hypothesis</strong>: In the Tour de France, the mean
distance of flat stages is <strong>equal to</strong> the mean distance
of mountain stages.</p></li>
<li><p><strong>Alternative Hypothesis</strong>: In the Tour de France,
the mean distance of flat stages is <strong>less than</strong> the mean
distance of mountain stages.</p></li>
</ul>
<p>For the rest of this problem, assume you have assigned a new column
to <code>stages</code> called <code>class</code>, which categorizes
stages into either <code>flat</code> or <code>mountain</code>
stages.</p>
<p><br></p>
<h3 id="problem-13.1">Problem 13.1</h3>
<p>Which of the following test statistics could be used to test the
given hypothesis? Select all that apply.</p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> The mean distance of flat stages divided by the mean distance of
mountain stages.</p></li>
<li><p><input type="checkbox" disabled="" /> The difference between the mean distance of mountain stages and the
mean distance of flat stages.</p></li>
<li><p><input type="checkbox" disabled="" /> The absolute difference between the mean distance of flat stages and
the mean distance of mountain stages.</p></li>
<li><p><input type="checkbox" disabled="" /> One half of the difference between the mean distance of flat stages
and the mean distance of mountain stages.</p></li>
<li><p><input type="checkbox" disabled="" /> The squared difference between the mean distance of flat stages and
the mean distance of mountain stages.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading13_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse13_1" aria-expanded="true" aria-controls="collapse13_1">
Click to view the solution.
</button>
</h2>
<div id="collapse13_1" class="accordion-collapse collapse"
aria-labelledby="heading13_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Option 1, Option 2, and Option 4</p>
<p>A test statistic is a single number we use to test which viewpoint
the data better supports. During hypothesis testing, we check whether
our observed statistic is a “typical value” in the distribution of the
test statistic. The alternative hypothesis indicates “less than” so our
test statistic needs to summarize both the magnitude and direction of
the difference in the categories.</p>
<ul>
<li>Option 1 is correct. The mean number of flat stages divided by the
mean distance of flat stages is essentially a ratio which is a valid
test statistic.</li>
<li>Option 2 is correct. The difference between the mean distance of
mountain stages and the mean distance of flat stages gives direction and
magnitude of the difference between the categories so its a valid test
statistic.</li>
<li>Option 3 is incorrect. Taking the absolute value of the difference
between the mean distance of flat stages and the mean distance of
mountain stages removes the direction of the difference making this an
invalid test statistic.</li>
<li>Option 4 is correct. One half of the difference between the mean
distance of flat stages and the mean distance of mountain stages gives
both magnitude and direction of the difference between the categories so
this is a valid test statistic.</li>
<li>Option 5 is incorrect. Squaring the difference between the mean
distance of flat stages and the mean distance of mountain stages removes
the direction of the difference between the categories so this is an
invalid test statistic.</li>
</ul>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 79%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<p>Assume that for the rest of the question, we will be using the
following test statistic: <strong>The difference between the mean
distance of flat stages and the mean dis- tance of mountain
stages.</strong></p>
<p><br></p>
<h3 id="problem-13.2">Problem 13.2</h3>
<p>Fill in the blanks in the code below so that it correctly conducts a
hypothesis test of the given hypotheses and returns the p-value.</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hypothesis_test(stages):</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    means <span class="op">=</span> stages.groupby(<span class="st">&quot;class&quot;</span>).mean().get(<span class="st">&quot;Distance&quot;</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    observed_stat <span class="op">=</span> means.loc[<span class="st">&quot;flat&quot;</span>] <span class="op">-</span> means.loc[<span class="st">&quot;mountain&quot;</span>]</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    simulated_stats <span class="op">=</span> np.array([])</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> np.arange(<span class="dv">10000</span>):</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>        shuffled <span class="op">=</span> stages.assign(shuffled <span class="op">=</span> np.random.__(i)__(stages.get(<span class="st">&quot;Distance&quot;</span>)))</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>        shuffled_means <span class="op">=</span> shuffled.groupby(<span class="st">&quot;class&quot;</span>).mean().get(<span class="st">&quot;Distance&quot;</span>)</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>        simulated_stat <span class="op">=</span> (shuffled_means.loc[<span class="st">&quot;flat&quot;</span>] <span class="op">-</span> shuffled_means.loc[<span class="st">&quot;mountain&quot;</span>])</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>        simulated_stats <span class="op">=</span> __(ii)__(simulated_stats, simulated_stat)</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    p_value <span class="op">=</span> np.__(iii)__(simulated_stats <span class="op">&lt;=</span> observed_stat)</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> p_value</span></code></pre></div>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading13_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse13_2" aria-expanded="true" aria-controls="collapse13_2">
Click to view the solution.
</button>
</h2>
<div id="collapse13_2" class="accordion-collapse collapse"
aria-labelledby="heading13_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong></p>
<ul>
<li><strong>(i):</strong> <code>permutation</code></li>
<li><strong>(ii):</strong> <code>np.append</code></li>
<li><strong>(iii):</strong> <code>mean</code></li>
</ul>
<p>The first step in a permutation test simulation is to shuffle the
labels or the values. So since this first line in the for loop is
assigning a column called ‘shuffled’, we know we need to use
<code>np.random.permutation()</code> on the <code>"Distances"</code>
column. The next line gets the new means for each group after shuffling
the values and <code>simulated_stat</code> is the simulated difference
in means. Now we know we want to save this simulated statistic and we
have the <code>simulated_stats</code> array, so we want to use an
<code>np.append</code> in (ii) to save this statistic in the array.
Finally after the simulation is complete, we calculate the p-value using
the array of simulated statistics. The p-value is the probability of
seeing the observed result under the null hypothesis.
<code>simulated_stats &lt;= observed_stat</code> returns an array of 0’s
and 1’s depending on whether each simulated statistic is less than or
equal to the observed statistic. Now, to get the probability of seeing a
result equal to or less than the observed, we can simply take the mean
of this array since the mean of an array of 0’s and 1’s is equivalent to
the probability.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 77%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-13.3">Problem 13.3</h3>
<p>Indicate whether each of the following code snippets would correctly
calculate <code>simulated_stat</code> inside the <code>for</code>-loop
without errors. Where present, assume the blank <code>(i)</code> has
been filled in correctly.</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>shuffled <span class="op">=</span> stages.assign(shuffled <span class="op">=</span> np.random.__(i)__(stages.get(<span class="st">&quot;Distance&quot;</span>)))</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>shuffled_flat <span class="op">=</span> (shuffled[shuffled.get(<span class="st">&quot;class&quot;</span>) <span class="op">==</span> <span class="st">&quot;flat&quot;</span>].get(<span class="st">&quot;shuffled&quot;</span>))</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>shuffled_mountain <span class="op">=</span> (shuffled[shuffled.get(<span class="st">&quot;class&quot;</span>) <span class="op">==</span> <span class="st">&quot;mountain&quot;</span>].get(<span class="st">&quot;shuffled&quot;</span>))</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>simulated_stat <span class="op">=</span> shuffled_flat.mean() <span class="op">-</span> shuffled_mountain.mean()</span></code></pre></div>
<p>(i):</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This code is correct.</p></li>
<li><p><input type="radio" disabled="" /> This code is incorrect or errors.</p></li>
</ul>
<div class="sourceCode" id="cb27"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>shuffled <span class="op">=</span> stages.assign(shuffled <span class="op">=</span> np.random.__(i)__(stages.get(<span class="st">&quot;class&quot;</span>)))</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>shuffled_flat <span class="op">=</span> (shuffled[shuffled.get(<span class="st">&quot;shuffled&quot;</span>) <span class="op">==</span> <span class="st">&quot;flat&quot;</span>].get(<span class="st">&quot;Distance&quot;</span>))</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>shuffled_mountain <span class="op">=</span> (shuffled[shuffled.get(<span class="st">&quot;shuffled&quot;</span>) <span class="op">==</span> <span class="st">&quot;mountain&quot;</span>].get(<span class="st">&quot;Distance&quot;</span>))</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>simulated_stat <span class="op">=</span> shuffled_flat.mean() <span class="op">-</span> shuffled_mountain.mean()</span></code></pre></div>
<p>(ii):</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This code is correct.</p></li>
<li><p><input type="radio" disabled="" /> This code is incorrect or errors.</p></li>
</ul>
<div class="sourceCode" id="cb28"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>shuffled <span class="op">=</span> stages.assign(shuffled <span class="op">=</span> np.random.__(i)__(stages.get(<span class="st">&quot;Distance&quot;</span>)))</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>shuffled_means <span class="op">=</span> shuffled.groupby(<span class="st">&quot;class&quot;</span>).mean()</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>simulated_stat <span class="op">=</span> (shuffled_means.get(<span class="st">&quot;Distance&quot;</span>).iloc[<span class="st">&quot;flat&quot;</span>] <span class="op">-</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>                  shuffled_means.get(<span class="st">&quot;Distance&quot;</span>).iloc[<span class="st">&quot;mountain&quot;</span>])</span></code></pre></div>
<p>(iii):</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This code is correct.</p></li>
<li><p><input type="radio" disabled="" /> This code is incorrect or errors.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading13_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse13_3" aria-expanded="true" aria-controls="collapse13_3">
Click to view the solution.
</button>
</h2>
<div id="collapse13_3" class="accordion-collapse collapse"
aria-labelledby="heading13_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong></p>
<ul>
<li><strong>(i):</strong> This code is correct
<ul>
<li><code>shuffled</code> shuffles the distances.
<code>shuffled_flat</code> gets the series of flats with the shuffled
distances and <code>shuffled_mountain</code> gets the series of the
mountains with the shuffled distances. Finally
<code>simulated_stat</code> calculates the mean difference between the
two categories.</li>
</ul></li>
<li><strong>(ii):</strong> The code is correct.
<ul>
<li><code>shuffled</code> shuffles the labels.
<code>shuffled_flat</code> gets the series of the distances with the
shuffled label of “flat” and <code>shuffled_mountain</code> gets the
series of the distances with the shuffled label of “mountain”. Finally,
<code>simulated_stat</code> calculates the mean difference between the
two categories.</li>
</ul></li>
<li><strong>(iii):</strong> The code is incorrect.
<ul>
<li><code>shuffled</code> shuffles the distances and assigns these
shuffled distances to the column <code>‘shuffled’</code>.
<code>shuffled_means</code> groups by the label and calculates the means
for each column. However, <code>simulated_stat</code> takes the original
distance columns when calculating the difference in means rather than
the shuffled distances which is located in the <code>‘shuffled’</code>
column making this answer incorrect.</li>
</ul></li>
</ul>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 85%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-13.4">Problem 13.4</h3>
<p>Assume that the observed statistic for this hypothesis test was equal
to -22.5 km. Given that there are 10,000 simulated test statistics
generated in the code above, at least how many of those must be equal to
-22.5 km in order for us to <strong>reject</strong> the null hypothesis
at an 0.05 significance level?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> 500</p></li>
<li><p><input type="radio" disabled="" /> 5000</p></li>
<li><p><input type="radio" disabled="" /> 0</p></li>
<li><p><input type="radio" disabled="" /> 9500</p></li>
<li><p><input type="radio" disabled="" /> 10000</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading13_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse13_4" aria-expanded="true" aria-controls="collapse13_4">
Click to view the solution.
</button>
</h2>
<div id="collapse13_4" class="accordion-collapse collapse"
aria-labelledby="heading13_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> 0</p>
<p>In order to reject the null hypothesis at the 0.05 significance
level, the p-value needs to be below 0.05. In order to calculate the
p-value, we find the proportion of simulated test statistics that are
equal to or less than the observed value. Note the usage of “must be” in
the problem. Since these simulated test statistics can be even less than
the observed value, none of them <strong>have</strong> to be equal to
the observed value. Thus, the answer is 0.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 30%.</p>
</div>
</div>
</div>
</div>
<p><br> <br></p>
<h3 id="problem-13.5">Problem 13.5</h3>
<p>Assume that the code above generated a p-value of 0.03. In the space
below, please write your interpretation of this p-value. Your answer
should include more than simply “we reject/fail to reject the null
hypothesis.”</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading13_5">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse13_5" aria-expanded="true" aria-controls="collapse13_5">
Click to view the solution.
</button>
</h2>
<div id="collapse13_5" class="accordion-collapse collapse"
aria-labelledby="heading13_5" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> There is a 3% chance, assuming the null
hypothesis is true, of seeing an observed difference in means less than
or equal to -22.5 km.</p>
<p>The p-value is the probability of seeing the observed value or
something more extreme under the null hypothesis. Knowing this, in this
context, since the p-value is 0.03, this means that there is a 3% chance
under the null hypothesis of seeing an observed difference in means
equal to or less than -22.5km.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 44%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<p class="meta"><em>Source:</em> su24-final — Q8</p>
<h2 id="problem-14">Problem 14</h2>
<p>Choose the best tool to answer each of the following questions. Note
the following:</p>
<ul>
<li>By “hypothesis testing,” we mean “standard” hypothesis testing,
i.e. hypothesis testing that doesn’t involve permutation testing or
bootstrapping.</li>
<li>By “bootstrapping,” we mean bootstrapping that doesn’t involve
hypothesis testing.</li>
</ul>
<p><br></p>
<h3 id="problem-14.1">Problem 14.1</h3>
<p>What is the median distance of all Tour de France stages?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis Testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation Testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
<li><p><input type="radio" disabled="" /> Central Limit Theorem</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading14_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse14_1" aria-expanded="true" aria-controls="collapse14_1">
Click to view the solution.
</button>
</h2>
<div id="collapse14_1" class="accordion-collapse collapse"
aria-labelledby="heading14_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Bootstrapping</p>
<p>Since we want the median distance of all the Tour de France stages,
we are not testing anything against a hypothesis at all which rules our
hypothesis testing and permutation testing. We use bootstrapping to get
samples in lieu of a population. Bootstrapping Tour de France distances
will give samples of distances from which we can calculate the median of
Tour de France stages.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 75%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-14.2">Problem 14.2</h3>
<p>Is the distribution of Tour de France stage types from before 1960
the same as after 1960?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis Testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation Testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
<li><p><input type="radio" disabled="" /> Central Limit Theorem</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading14_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse14_2" aria-expanded="true" aria-controls="collapse14_2">
Click to view the solution.
</button>
</h2>
<div id="collapse14_2" class="accordion-collapse collapse"
aria-labelledby="heading14_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Permutation Testing</p>
<p>We are comparing whether the distributions before 1960 and after 1960
are different which means we want to do permutation testing which tests
whether two samples come from the same population distribution.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 50%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-14.3">Problem 14.3</h3>
<p>Are there an equal number of destinations that start with letters
from the first half of the alphabet and destinations that start with
letters from the second half of the alphabet?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis Testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation Testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
<li><p><input type="radio" disabled="" /> Central Limit Theorem</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading14_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse14_3" aria-expanded="true" aria-controls="collapse14_3">
Click to view the solution.
</button>
</h2>
<div id="collapse14_3" class="accordion-collapse collapse"
aria-labelledby="heading14_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Hypothesis Testing</p>
<p>We are testing whether two values (the number of destinations that
start with letters from the first half of the alphabet and the
destinations that start with letters from the second half of the
alphabet) are equal to each other which is an indicator to use a
hypothesis test.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 50%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-14.4">Problem 14.4</h3>
<p>Are mountain stages with destinations in France from before 1970
longer than flat stages with destinations in Belgium from after
2000?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis Testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation Testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
<li><p><input type="radio" disabled="" /> Central Limit Theorem</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading14_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse14_4" aria-expanded="true" aria-controls="collapse14_4">
Click to view the solution.
</button>
</h2>
<div id="collapse14_4" class="accordion-collapse collapse"
aria-labelledby="heading14_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Permutation Testing</p>
<p>We are comparing two distributions (mountain stages with destinations
in France from before 1970 and flat stages with destinations in Belgium
from after 2000) and seeing if the first distribution is longer than the
second. Since we are comparing distributions, we want to perform a
permutation test.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 40%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-15">Problem 15</h2>
<p>Give an example of a dataset and a question you would want to answer
about that dataset which you could answer by performing a permutation
test (also known as an A/B test).</p>
<p>Creative responses that are different than ones we’ve already seen in
this class will earn the most credit.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading15">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse15" aria-expanded="true" aria-controls="collapse15">
Click to view the solution.
</button>
</h2>
<div id="collapse15" class="accordion-collapse collapse"
aria-labelledby="heading15" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Responses vary. For this question we looked
for creative responses. One good example includes</p>
<p>A dataset about prisoners in the US with the sentence times, race,
and crime. Do White people who commit homicide get shorter sentence
times than Black people who commit homicide? We can clearly perform an
A/B test to compare black and white populations as they correlated to
shorter sentence times.</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 93%.</p>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-16">Problem 16</h2>
<p>Consider the definition of the function
<code>diff_in_group_means</code>:</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> diff_in_group_means(df, group_col, num_col):</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> df.groupby(group_col).mean().get(num_col)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> s.loc[<span class="va">False</span>] <span class="op">-</span> s.loc[<span class="va">True</span>]</span></code></pre></div>
<p><br></p>
<h3 id="problem-16.1">Problem 16.1</h3>
<p>It turns out that Kelsey Plum averages 0.61 more assists in games
that she wins (“winning games”) than in games that she loses (“losing
games”). Fill in the blanks below so that <code>observed_diff</code>
evaluates to -0.61.</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>observed_diff <span class="op">=</span> diff_in_group_means(plum, __(a)__, __(b)__)</span></code></pre></div>
<ol type="1">
<li><p>What goes in blank (a)?</p></li>
<li><p>What goes in blank (b)?</p></li>
</ol>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading16_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse16_1" aria-expanded="true" aria-controls="collapse16_1">
Click to view the solution.
</button>
</h2>
<div id="collapse16_1" class="accordion-collapse collapse"
aria-labelledby="heading16_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answers:</strong> <code>'Won'</code>, <code>'AST'</code></p>
<p>To compute the number of assists Kelsey Plum averages in winning and
losing games, we need to group by <code>'Won'</code>. Once doing so, and
using the <code>.mean()</code> aggregation method, we need to access
elements in the <code>'AST'</code> column.</p>
<p>The second argument to <code>diff_in_group_means</code>,
<code>group_col</code>, is the column we’re grouping by, and so blank
(a) must be filled by <code>'Won'</code>. Then, the second argument,
<code>num_col</code>, must be <code>'AST'</code>.</p>
<p>Note that after extracting the Series containing the average number
of assists in wins and losses, we are returning the value with the index
<code>False</code> (“loss”) minus the value with the index
<code>True</code> (“win”). So, throughout this problem, keep in mind
that we are computing “losses minus wins”. Since our observation was
that she averaged 0.61 more assists in wins than in losses, it makes
sense that <code>diff_in_group_means(plum, 'Won', 'AST')</code> is -0.61
(rather than +0.61).</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 94%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-16.2">Problem 16.2</h3>
<p>After observing that Kelsey Plum averages more assists in winning
games than in losing games, we become interested in conducting a
permutation test for the following hypotheses:</p>
<ul>
<li><strong>Null Hypothesis:</strong> The number of assists Kelsey Plum
makes in winning games and in losing games come from the same
distribution.</li>
<li><strong>Alternative Hypothesis:</strong> The number of assists
Kelsey Plum makes in winning games is higher on average than the number
of assists that she makes in losing games.</li>
</ul>
<p>To conduct our permutation test, we place the following code in a
<code>for</code>-loop.</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>won <span class="op">=</span> plum.get(<span class="st">&#39;Won&#39;</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>ast <span class="op">=</span> plum.get(<span class="st">&#39;AST&#39;</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>shuffled <span class="op">=</span> plum.assign(Won_shuffled<span class="op">=</span>np.random.permutation(won)) <span class="op">\</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>               .assign(AST_shuffled<span class="op">=</span>np.random.permutation(ast))</span></code></pre></div>
<p>Which of the following options <strong>does not</strong> compute a
valid simulated test statistic for this permutation test?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>diff_in_group_means(shuffled, 'Won', 'AST')</code></p></li>
<li><p><input type="radio" disabled="" /> <code>diff_in_group_means(shuffled, 'Won', 'AST_shuffled')</code></p></li>
<li><p><input type="radio" disabled="" /> <code>diff_in_group_means(shuffled, 'Won_shuffled, 'AST')</code></p></li>
<li><p><input type="radio" disabled="" /> <code>diff_in_group_means(shuffled, 'Won_shuffled, 'AST_shuffled')</code></p></li>
<li><p><input type="radio" disabled="" /> More than one of these options do not compute a valid simulated test
statistic for this permutation test</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading16_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse16_2" aria-expanded="true" aria-controls="collapse16_2">
Click to view the solution.
</button>
</h2>
<div id="collapse16_2" class="accordion-collapse collapse"
aria-labelledby="heading16_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong>
<code>diff_in_group_means(shuffled, 'Won', 'AST')</code></p>
<p>As we saw in the previous subpart,
<code>diff_in_group_means(shuffled, 'Won', 'AST')</code> computes the
observed test statistic, which is -0.61. There is no randomness involved
in the observed test statistic; each time we run the line
<code>diff_in_group_means(shuffled, 'Won', 'AST')</code> we will see the
same result, so this cannot be used for simulation.</p>
<p>To perform a permutation test here, we need to simulate under the
null by randomly assigning assist counts to groups; here, the groups are
“win” and “loss”.</p>
<ul>
<li><strong>Option 2:</strong> Here, assist counts are shuffled and the
group names are kept in the same order. The end result is a random
pairing of assists to groups.</li>
<li><strong>Option 3:</strong> Here, the group names are shuffled and
the assist counts are kept in the same order. The end result is a random
pairing of assist counts to groups.</li>
<li><strong>Option 4:</strong> Here, both the group names and assist
counts are shuffled, but the end result is still the same as in the
previous two options.</li>
</ul>
<p>As such, Options 2 through 4 are all valid, and Option 1 is the only
invalid one.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 68%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-16.3">Problem 16.3</h3>
<p>Suppose we generate 10,000 simulated test statistics, using one of
the valid options from Question 4.2. The empirical distribution of test
statistics, with a red line at <code>observed_diff</code>, is shown
below.</p>
<center><img src='../../assets/images/wi22-final/quarter-hist.png' width=50%></center>
<p>Roughly one-quarter of the area of the histogram above is to the left
of the red line. What is the correct interpretation of this result?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> There is roughly a one quarter probability that Kelsey Plum’s number
of assists in winning games and in losing games come from the same
distribution.</p></li>
<li><p><input type="radio" disabled="" /> The significance level of this hypothesis test is roughly a
quarter.</p></li>
<li><p><input type="radio" disabled="" /> Under the assumption that Kelsey Plum’s number of assists in winning
games and in losing games come from the same distribution, and that she
wins 22 of the 31 games she plays, the chance of her averaging
<strong>at least</strong> 0.61 more assists in wins than losses is
roughly a quarter.</p></li>
<li><p><input type="radio" disabled="" /> Under the assumption that Kelsey Plum’s number of assists in winning
games and in losing games come from the same distribution, and that she
wins 22 of the 31 games she plays, the chance of her averaging 0.61 more
assists in wins than losses is roughly a quarter.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading16_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse16_3" aria-expanded="true" aria-controls="collapse16_3">
Click to view the solution.
</button>
</h2>
<div id="collapse16_3" class="accordion-collapse collapse"
aria-labelledby="heading16_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Under the assumption that Kelsey Plum’s
number of assists in winning games and in losing games come from the
same distribution, and that she wins 22 of the 31 games she plays, the
chance of her averaging <strong>at least</strong> 0.61 more assists in
wins than losses is roughly a quarter. (Option 3)</p>
<p>First, we should note that the area to the left of the red line (a
quarter) is the p-value of our hypothesis test. Generally, the p-value
is the probability of observing an outcome as or more extreme than the
observed, under the assumption that the null hypothesis is true. The
direction to look in depends on the alternate hypothesis; here, since
our alternative hypothesis is that the number of assists Kelsey Plum
makes in winning games is higher on average than in losing games, a
“more extreme” outcome is where the assists in winning games are higher
than in losing games, i.e. where <span class="math inline">\text{(assists in wins)} - \text{(assists in
losses)}</span> is positive or where <span class="math inline">\text{(assists in losses)} - \text{(assists in
wins)}</span> is negative. As mentioned in the solution to the first
subpart, our test statistic is <span class="math inline">\text{(assists
in losses)} - \text{(assists in wins)}</span>, so a more extreme outcome
is one where this is negative, i.e. to the left of the observed
statistic.</p>
<p>Let’s first rule out the first two options.</p>
<ul>
<li><strong>Option 1:</strong> This option states that the probability
that the null hypothesis (the number of assists she makes in winning and
losing games comes from the same distribution) is true is roughly a
quarter. However, the p-value <strong>is not</strong> the probability
that the null hypothesis is true.</li>
<li><strong>Option 2:</strong> The significance level is the formal name
for the p-value “cutoff” that we specify in our hypothesis test. There
is no cutoff mentioned in the problem. The <em>observed</em>
significance level is another name for the p-value, but Option 2 did not
contain the word <em>observed</em>.</li>
</ul>
<p>Now, the only difference between Options 3 and 4 is the inclusion of
“at least” in Option 3. Remember, to compute a p-value we must compute
the probability of observing something as <strong>or more</strong>
extreme than the observed, under the null. The “or more” corresponds to
“at least” in Option 3. As such, Option 3 is the correct choice.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 70%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-16.4">Problem 16.4</h3>
<p><strong>True or False:</strong> The histogram drawn in the previous
subpart is a density histogram.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> True</p></li>
<li><p><input type="radio" disabled="" /> False</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading16_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse16_4" aria-expanded="true" aria-controls="collapse16_4">
Click to view the solution.
</button>
</h2>
<div id="collapse16_4" class="accordion-collapse collapse"
aria-labelledby="heading16_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> False</p>
<p>The area of a density histogram is 1. The area of the histogram drawn
in the previous subpart is much larger than 1. In fact, the area of this
histogram is in the hundreds or thousands; you can draw a rectangle
stretching from -1 to 1 on the <span class="math inline">x</span>-axis
and 0 to 300 on the <span class="math inline">y</span>-axis that has
area <span class="math inline">2 \cdot 300 = 600</span>, and this
rectangle is much smaller than the larger histogram.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 82%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-17">Problem 17</h2>
<p>Consider the definition of the function
<code>diff_in_group_means</code>:</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> diff_in_group_means(df, group_col, num_col):</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> df.groupby(group_col).mean().get(num_col)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> s.loc[<span class="va">False</span>] <span class="op">-</span> s.loc[<span class="va">True</span>]</span></code></pre></div>
<p><br></p>
<h3 id="problem-17.1">Problem 17.1</h3>
<p>It turns out that Kelsey Plum averages 0.61 more assists in games
that she wins than in games that she loses. After observing that Kelsey
Plum averages more assists in winning games than in losing games, we
become interested in conducting a permutation test for the following
hypotheses:</p>
<ul>
<li><strong>Null Hypothesis:</strong> The number of assists Kelsey Plum
makes in winning games and in losing games come from the same
distribution.</li>
<li><strong>Alternative Hypothesis:</strong> The number of assists
Kelsey Plum makes in winning games is higher on average than the number
of assists that she makes in losing games.</li>
</ul>
<p>To conduct our permutation test, we place the following code in a
<code>for</code>-loop.</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>won <span class="op">=</span> plum.get(<span class="st">&#39;Won&#39;</span>)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>ast <span class="op">=</span> plum.get(<span class="st">&#39;AST&#39;</span>)</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>shuffled <span class="op">=</span> plum.assign(Won_shuffled<span class="op">=</span>np.random.permutation(won)) <span class="op">\</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>               .assign(AST_shuffled<span class="op">=</span>np.random.permutation(ast))</span></code></pre></div>
<p>Which of the following options <strong>does not</strong> compute a
valid simulated test statistic for this permutation test?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>diff_in_group_means(shuffled, 'Won', 'AST')</code></p></li>
<li><p><input type="radio" disabled="" /> <code>diff_in_group_means(shuffled, 'Won', 'AST_shuffled')</code></p></li>
<li><p><input type="radio" disabled="" /> <code>diff_in_group_means(shuffled, 'Won_shuffled, 'AST')</code></p></li>
<li><p><input type="radio" disabled="" /> <code>diff_in_group_means(shuffled, 'Won_shuffled, 'AST_shuffled')</code></p></li>
<li><p><input type="radio" disabled="" /> More than one of these options do not compute a valid simulated test
statistic for this permutation test</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading17_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse17_1" aria-expanded="true" aria-controls="collapse17_1">
Click to view the solution.
</button>
</h2>
<div id="collapse17_1" class="accordion-collapse collapse"
aria-labelledby="heading17_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong>
<code>diff_in_group_means(shuffled, 'Won', 'AST')</code></p>
<p><code>diff_in_group_means(shuffled, 'Won', 'AST')</code> computes the
observed test statistic, which is -0.61. There is no randomness involved
in the observed test statistic; each time we run the line
<code>diff_in_group_means(shuffled, 'Won', 'AST')</code> we will see the
same result, so this cannot be used for simulation.</p>
<p>To perform a permutation test here, we need to simulate under the
null by randomly assigning assist counts to groups; here, the groups are
“win” and “loss”.</p>
<ul>
<li><strong>Option 2:</strong> Here, assist counts are shuffled and the
group names are kept in the same order. The end result is a random
pairing of assists to groups.</li>
<li><strong>Option 3:</strong> Here, the group names are shuffled and
the assist counts are kept in the same order. The end result is a random
pairing of assist counts to groups.</li>
<li><strong>Option 4:</strong> Here, both the group names and assist
counts are shuffled, but the end result is still the same as in the
previous two options.</li>
</ul>
<p>As such, Options 2 through 4 are all valid, and Option 1 is the only
invalid one.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 68%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-17.2">Problem 17.2</h3>
<p>Suppose we generate 10,000 simulated test statistics, using one of
the valid options from Question 1.1. The empirical distribution of test
statistics, with a red line at <code>observed_diff</code>, is shown
below.</p>
<center><img src='../../assets/images/wi22-final/quarter-hist.png' width=50%></center>
<p>Roughly one-quarter of the area of the histogram above is to the left
of the red line. What is the correct interpretation of this result?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> There is roughly a one quarter probability that Kelsey Plum’s number
of assists in winning games and in losing games come from the same
distribution.</p></li>
<li><p><input type="radio" disabled="" /> The significance level of this hypothesis test is roughly a
quarter.</p></li>
<li><p><input type="radio" disabled="" /> Under the assumption that Kelsey Plum’s number of assists in winning
games and in losing games come from the same distribution, and that she
wins 22 of the 31 games she plays, the chance of her averaging
<strong>at least</strong> 0.61 more assists in wins than losses is
roughly a quarter.</p></li>
<li><p><input type="radio" disabled="" /> Under the assumption that Kelsey Plum’s number of assists in winning
games and in losing games come from the same distribution, and that she
wins 22 of the 31 games she plays, the chance of her averaging 0.61 more
assists in wins than losses is roughly a quarter.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading17_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse17_2" aria-expanded="true" aria-controls="collapse17_2">
Click to view the solution.
</button>
</h2>
<div id="collapse17_2" class="accordion-collapse collapse"
aria-labelledby="heading17_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Under the assumption that Kelsey Plum’s
number of assists in winning games and in losing games come from the
same distribution, and that she wins 22 of the 31 games she plays, the
chance of her averaging <strong>at least</strong> 0.61 more assists in
wins than losses is roughly a quarter. (Option 3)</p>
<p>First, we should note that the area to the left of the red line (a
quarter) is the p-value of our hypothesis test. Generally, the p-value
is the probability of observing an outcome as or more extreme than the
observed, under the assumption that the null hypothesis is true. The
direction to look in depends on the alternate hypothesis; here, since
our alternative hypothesis is that the number of assists Kelsey Plum
makes in winning games is higher on average than in losing games, a
“more extreme” outcome is where the assists in winning games are higher
than in losing games, i.e. where <span class="math inline">\text{(assists in wins)} - \text{(assists in
losses)}</span> is positive or where <span class="math inline">\text{(assists in losses)} - \text{(assists in
wins)}</span> is negative. As mentioned in the solution to the first
subpart, our test statistic is <span class="math inline">\text{(assists
in losses)} - \text{(assists in wins)}</span>, so a more extreme outcome
is one where this is negative, i.e. to the left of the observed
statistic.</p>
<p>Let’s first rule out the first two options.</p>
<ul>
<li><strong>Option 1:</strong> This option states that the probability
that the null hypothesis (the number of assists she makes in winning and
losing games comes from the same distribution) is true is roughly a
quarter. However, the p-value <strong>is not</strong> the probability
that the null hypothesis is true.</li>
<li><strong>Option 2:</strong> The significance level is the formal name
for the p-value “cutoff” that we specify in our hypothesis test. There
is no cutoff mentioned in the problem. The <em>observed</em>
significance level is another name for the p-value, but Option 2 did not
contain the word <em>observed</em>.</li>
</ul>
<p>Now, the only difference between Options 3 and 4 is the inclusion of
“at least” in Option 3. Remember, to compute a p-value we must compute
the probability of observing something as <strong>or more</strong>
extreme than the observed, under the null. The “or more” corresponds to
“at least” in Option 3. As such, Option 3 is the correct choice.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 70%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-18">Problem 18</h2>
<p>Consider the definition of the function
<code>diff_in_group_means</code>:</p>
<div class="sourceCode" id="cb34"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> diff_in_group_means(df, group_col, num_col):</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> df.groupby(group_col).mean().get(num_col)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> s.loc[<span class="va">False</span>] <span class="op">-</span> s.loc[<span class="va">True</span>]</span></code></pre></div>
<p><br></p>
<h3 id="problem-18.1">Problem 18.1</h3>
<p>It turns out that Kelsey Plum averages 0.61 more assists in games
that she wins (“winning games”) than in games that she loses (“losing
games”). Fill in the blanks below so that <code>observed_diff</code>
evaluates to -0.61.</p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>observed_diff <span class="op">=</span> diff_in_group_means(plum, __(a)__, __(b)__)</span></code></pre></div>
<ol type="1">
<li><p>What goes in blank (a)?</p></li>
<li><p>What goes in blank (b)?</p></li>
</ol>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading18_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse18_1" aria-expanded="true" aria-controls="collapse18_1">
Click to view the solution.
</button>
</h2>
<div id="collapse18_1" class="accordion-collapse collapse"
aria-labelledby="heading18_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answers:</strong> <code>'Won'</code>, <code>'AST'</code></p>
<p>To compute the number of assists Kelsey Plum averages in winning and
losing games, we need to group by <code>'Won'</code>. Once doing so, and
using the <code>.mean()</code> aggregation method, we need to access
elements in the <code>'AST'</code> column.</p>
<p>The second argument to <code>diff_in_group_means</code>,
<code>group_col</code>, is the column we’re grouping by, and so blank
(a) must be filled by <code>'Won'</code>. Then, the second argument,
<code>num_col</code>, must be <code>'AST'</code>.</p>
<p>Note that after extracting the Series containing the average number
of assists in wins and losses, we are returning the value with the index
<code>False</code> (“loss”) minus the value with the index
<code>True</code> (“win”). So, throughout this problem, keep in mind
that we are computing “losses minus wins”. Since our observation was
that she averaged 0.61 more assists in wins than in losses, it makes
sense that <code>diff_in_group_means(plum, 'Won', 'AST')</code> is -0.61
(rather than +0.61).</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 94%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-18.2">Problem 18.2</h3>
<p>After observing that Kelsey Plum averages more assists in winning
games than in losing games, we become interested in conducting a
permutation test for the following hypotheses:</p>
<ul>
<li><strong>Null Hypothesis:</strong> The number of assists Kelsey Plum
makes in winning games and in losing games come from the same
distribution.</li>
<li><strong>Alternative Hypothesis:</strong> The number of assists
Kelsey Plum makes in winning games is higher on average than the number
of assists that she makes in losing games.</li>
</ul>
<p>To conduct our permutation test, we place the following code in a
<code>for</code>-loop.</p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>won <span class="op">=</span> plum.get(<span class="st">&#39;Won&#39;</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>ast <span class="op">=</span> plum.get(<span class="st">&#39;AST&#39;</span>)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>shuffled <span class="op">=</span> plum.assign(Won_shuffled<span class="op">=</span>np.random.permutation(won)) <span class="op">\</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>               .assign(AST_shuffled<span class="op">=</span>np.random.permutation(ast))</span></code></pre></div>
<p>Which of the following options <strong>does not</strong> compute a
valid simulated test statistic for this permutation test?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>diff_in_group_means(shuffled, 'Won', 'AST')</code></p></li>
<li><p><input type="radio" disabled="" /> <code>diff_in_group_means(shuffled, 'Won', 'AST_shuffled')</code></p></li>
<li><p><input type="radio" disabled="" /> <code>diff_in_group_means(shuffled, 'Won_shuffled, 'AST')</code></p></li>
<li><p><input type="radio" disabled="" /> <code>diff_in_group_means(shuffled, 'Won_shuffled, 'AST_shuffled')</code></p></li>
<li><p><input type="radio" disabled="" /> More than one of these options do not compute a valid simulated test
statistic for this permutation test</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading18_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse18_2" aria-expanded="true" aria-controls="collapse18_2">
Click to view the solution.
</button>
</h2>
<div id="collapse18_2" class="accordion-collapse collapse"
aria-labelledby="heading18_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong>
<code>diff_in_group_means(shuffled, 'Won', 'AST')</code></p>
<p>As we saw in the previous subpart,
<code>diff_in_group_means(shuffled, 'Won', 'AST')</code> computes the
observed test statistic, which is -0.61. There is no randomness involved
in the observed test statistic; each time we run the line
<code>diff_in_group_means(shuffled, 'Won', 'AST')</code> we will see the
same result, so this cannot be used for simulation.</p>
<p>To perform a permutation test here, we need to simulate under the
null by randomly assigning assist counts to groups; here, the groups are
“win” and “loss”.</p>
<ul>
<li><strong>Option 2:</strong> Here, assist counts are shuffled and the
group names are kept in the same order. The end result is a random
pairing of assists to groups.</li>
<li><strong>Option 3:</strong> Here, the group names are shuffled and
the assist counts are kept in the same order. The end result is a random
pairing of assist counts to groups.</li>
<li><strong>Option 4:</strong> Here, both the group names and assist
counts are shuffled, but the end result is still the same as in the
previous two options.</li>
</ul>
<p>As such, Options 2 through 4 are all valid, and Option 1 is the only
invalid one.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 68%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-18.3">Problem 18.3</h3>
<p>Suppose we generate 10,000 simulated test statistics, using one of
the valid options from part 1. The empirical distribution of test
statistics, with a red line at <code>observed_diff</code>, is shown
below.</p>
<center><img src='../../assets/images/wi22-final/quarter-hist.png' width=50%></center>
<p>Roughly one-quarter of the area of the histogram above is to the left
of the red line. What is the correct interpretation of this result?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> There is roughly a one quarter probability that Kelsey Plum’s number
of assists in winning games and in losing games come from the same
distribution.</p></li>
<li><p><input type="radio" disabled="" /> The significance level of this hypothesis test is roughly a
quarter.</p></li>
<li><p><input type="radio" disabled="" /> Under the assumption that Kelsey Plum’s number of assists in winning
games and in losing games come from the same distribution, and that she
wins 22 of the 31 games she plays, the chance of her averaging
<strong>at least</strong> 0.61 more assists in wins than losses is
roughly a quarter.</p></li>
<li><p><input type="radio" disabled="" /> Under the assumption that Kelsey Plum’s number of assists in winning
games and in losing games come from the same distribution, and that she
wins 22 of the 31 games she plays, the chance of her averaging 0.61 more
assists in wins than losses is roughly a quarter.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading18_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse18_3" aria-expanded="true" aria-controls="collapse18_3">
Click to view the solution.
</button>
</h2>
<div id="collapse18_3" class="accordion-collapse collapse"
aria-labelledby="heading18_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Under the assumption that Kelsey Plum’s
number of assists in winning games and in losing games come from the
same distribution, and that she wins 22 of the 31 games she plays, the
chance of her averaging <strong>at least</strong> 0.61 more assists in
wins than losses is roughly a quarter. (Option 3)</p>
<p>First, we should note that the area to the left of the red line (a
quarter) is the p-value of our hypothesis test. Generally, the p-value
is the probability of observing an outcome as or more extreme than the
observed, under the assumption that the null hypothesis is true. The
direction to look in depends on the alternate hypothesis; here, since
our alternative hypothesis is that the number of assists Kelsey Plum
makes in winning games is higher on average than in losing games, a
“more extreme” outcome is where the assists in winning games are higher
than in losing games, i.e. where <span class="math inline">\text{(assists in wins)} - \text{(assists in
losses)}</span> is positive or where <span class="math inline">\text{(assists in losses)} - \text{(assists in
wins)}</span> is negative. As mentioned in the solution to the first
subpart, our test statistic is <span class="math inline">\text{(assists
in losses)} - \text{(assists in wins)}</span>, so a more extreme outcome
is one where this is negative, i.e. to the left of the observed
statistic.</p>
<p>Let’s first rule out the first two options.</p>
<ul>
<li><strong>Option 1:</strong> This option states that the probability
that the null hypothesis (the number of assists she makes in winning and
losing games comes from the same distribution) is true is roughly a
quarter. However, the p-value <strong>is not</strong> the probability
that the null hypothesis is true.</li>
<li><strong>Option 2:</strong> The significance level is the formal name
for the p-value “cutoff” that we specify in our hypothesis test. There
is no cutoff mentioned in the problem. The <em>observed</em>
significance level is another name for the p-value, but Option 2 did not
contain the word <em>observed</em>.</li>
</ul>
<p>Now, the only difference between Options 3 and 4 is the inclusion of
“at least” in Option 3. Remember, to compute a p-value we must compute
the probability of observing something as <strong>or more</strong>
extreme than the observed, under the null. The “or more” corresponds to
“at least” in Option 3. As such, Option 3 is the correct choice.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 70%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<p class="meta"><em>Source:</em> wi23-final — Q4</p>
<h2 id="problem-19">Problem 19</h2>
<p>We want to create a bootstrapped 95% confidence interval for the
median <code>"Complexity"</code> of all cooperative games, given a
sample of 100 cooperative games.</p>
<p>Suppose <code>coop_sample</code> is a DataFrame containing 100 rows
of games, all of which are cooperative games. We’ll calculate the
endpoints <code>left</code> and <code>right</code> of our bootstrapped
95% confidence interval as follows.</p>
<div class="sourceCode" id="cb37"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>medians <span class="op">=</span> np.array([])</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(<span class="dv">10000</span>):</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    resample <span class="op">=</span> coop_sample.sample(<span class="dv">100</span>, replace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    median <span class="op">=</span> np.median(resample.get(<span class="st">&quot;Complexity&quot;</span>))</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    medians <span class="op">=</span> np.append(medians, median)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>left <span class="op">=</span> np.percentile(medians, <span class="fl">2.5</span>)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>right <span class="op">=</span> np.percentile(medians, <span class="fl">97.5</span>)</span></code></pre></div>
<p>Now consider the interval defined by the endpoints
<code>left_2</code> and <code>right_2</code>, calculated as follows.</p>
<div class="sourceCode" id="cb38"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>medians_2 <span class="op">=</span> np.array([])</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(<span class="dv">10000</span>):</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    shuffle <span class="op">=</span> coop_sample.assign(shuffle<span class="op">=</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    np.random.permutation(coop_sample.get(<span class="st">&quot;Complexity&quot;</span>)))</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    resample_2 <span class="op">=</span> shuffle.sample(<span class="dv">100</span>, replace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    median_2 <span class="op">=</span> np.median(resample_2.get(<span class="st">&quot;shuffle&quot;</span>))</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    medians_2 <span class="op">=</span> np.append(medians_2, median_2)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>left_2 <span class="op">=</span> np.percentile(medians_2, <span class="fl">2.5</span>)</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>right_2 <span class="op">=</span> np.percentile(medians_2, <span class="fl">97.5</span>)</span></code></pre></div>
<p>Which interval should be wider, <code>[left, right]</code> or
<code>[left_2, right_2]</code>?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>[left, right]</code></p></li>
<li><p><input type="radio" disabled="" /> <code>[left_2, right_2]</code></p></li>
<li><p><input type="radio" disabled="" /> Both about the same.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading19">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse19" aria-expanded="true" aria-controls="collapse19">
Click to view the solution.
</button>
</h2>
<div id="collapse19" class="accordion-collapse collapse"
aria-labelledby="heading19" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Both about the same.</p>
<p>It’s important to understand what each code block above is doing in
order to answer this question. Let’s take a look at the original
<code>medians</code> code. We are sampling from the
<code>coop_sample</code> to create a shuffled <code>coop_sample</code>,
we then get the median of the column “Complexity” and append it to the
<code>medians</code> array. Finally, we find the left and right
percentiles of the <code>medians</code> array.</p>
<p>Now we will look at what <code>medians_2</code> is doing. It looks
like we are adding a new column called <code>“shuffle”</code> to
<code>coop_sample</code>. The column <code>“shuffle”</code> is a
shuffled version of <code>“Complexity”</code>. Then we are taking the
<code>shuffle</code> DataFrame with the <code>“shuffle”</code> column
and sampling from <code>“shuffle”</code> to randomize it again. Then we
get the median of this shuffled column and find its percentiles.</p>
<p>Essentially, both of these blocks of code are taking the
<code>“Complexity”</code> column, shuffling it, finding the median of
the shuffled column, and then finding the confidence interval. Since it
is being done on the same column and in basically the same way both
intervals <code>[left, right]</code> and <code>[left_2, right_2]</code>
are about the same.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 77%.</p>
</div>
</div>
</div>
</div>
<hr />
<p class="meta"><em>Source:</em> wi23-final — Q6</p>
<h2 id="problem-20">Problem 20</h2>
<p>Choose the best tool to answer each of the following questions. Note
the following:</p>
<ul>
<li>By “hypothesis testing,” we mean “standard” hypothesis testing,
i.e. hypothesis testing that <strong>doesn’t</strong> involve
permutation testing or bootstrapping.</li>
<li>By “bootstrapping,” we mean bootstrapping that
<strong>doesn’t</strong> involve hypothesis testing.</li>
</ul>
<p><br></p>
<h3 id="problem-20.1">Problem 20.1</h3>
<p>Are strategy games rated higher than non-strategy games?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading20_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse20_1" aria-expanded="true" aria-controls="collapse20_1">
Click to view the solution.
</button>
</h2>
<div id="collapse20_1" class="accordion-collapse collapse"
aria-labelledby="heading20_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Permutation testing</p>
<p>Recall that we use a permutation test when we want to determine if
two samples are from the same population. The question is asking if
“strategy games” are rated higher than “non-strategy games” meaning we
have two samples and want to know if they come from the same or
different rating populations.</p>
<p>We would not use hypothesis testing here because we are not trying to
quantify how weird a test statistic between strategy games and
non-strategy games.</p>
<p>We would not use bootstrapping here because we are not given a single
sample that we want to re-sample from.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 58%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-20.2">Problem 20.2</h3>
<p>What is the mean complexity of all games?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading20_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse20_2" aria-expanded="true" aria-controls="collapse20_2">
Click to view the solution.
</button>
</h2>
<div id="collapse20_2" class="accordion-collapse collapse"
aria-labelledby="heading20_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Bootstrapping</p>
<p>Bootstrapping is the act of resampling from a sample. We use
bootstrapping because the original sample looks like the population, so
by resampling the sample we are able to quantify our uncertainty of the
mean complexity of all games. We can use bootstrapping to approximate
the distribution of the sample statistic, which is the mean.</p>
<p>We would not use hypothesis testing here because we do not have the
population distribution or a sample to test with.</p>
<p>We would not use permutation testing here because we are not trying
to find if two samples are from the same population.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 89%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-20.3">Problem 20.3</h3>
<p>Are there an equal number of cooperative and non-cooperative
games?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading20_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse20_3" aria-expanded="true" aria-controls="collapse20_3">
Click to view the solution.
</button>
</h2>
<div id="collapse20_3" class="accordion-collapse collapse"
aria-labelledby="heading20_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Hypothesis Testing</p>
<p>Recall hypothesis tests quantify how “weird” a result is. We use it
when we have a population distribution and one sample and we are trying
to see if that sample was drawn from the population. In this instance we
are trying to find if there are an equal number of cooperative and
non-cooperative games. The population distribution is our DataFrame and
we are trying to see if the cooperative games and non-cooperative games
in our sample come from the same population.</p>
<p>We would not use permutation testing here because there is no
numerical data in the column, and it can be answered by just the column
of categories.</p>
<p>We would not use bootstrapping because we are not re-sampling from
the sample we are given to find a test statistic.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 75%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-20.4">Problem 20.4</h3>
<p>Are games with more than one domain more complex than games with one
domain?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading20_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse20_4" aria-expanded="true" aria-controls="collapse20_4">
Click to view the solution.
</button>
</h2>
<div id="collapse20_4" class="accordion-collapse collapse"
aria-labelledby="heading20_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Permutation testing</p>
<p>Once again we would use permutation testing to solve this problem
because we have two samples: games with more than one domain and games
with one domain. We do not know the population distribution.</p>
<p>We would not use hypothesis testing because we were not given a
population distribution to test the sample against.</p>
<p>We would not use bootstrapping because we are not re-sampling from
the sample to find a test statistic.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 72%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<p class="meta"><em>Source:</em> wi23-final — Q9</p>
<h2 id="problem-21">Problem 21</h2>
<p>The function <code>perm_test</code> should take three inputs:</p>
<ol type="1">
<li><code>df</code>, a DataFrame.</li>
<li><code>labels</code>, a string. The name of a column in df that
contains two distinct values, which signify the groups in a permutation
test.</li>
<li><code>data</code>, a string. The name of a column in df that
contains numerical data.</li>
</ol>
<p>The function should return an array of 1000 simulated differences of
group means, under the assumption of the null hypothesis in a
permutation test, namely that data in both groups come from the same
population.</p>
<p>The smaller of the two group labels should be first in the
subtraction. For example, if the two values in the <code>labels</code>
column are <code>"dice game"</code> and <code>"card game"</code>, we
would compute the difference as the mean of the <code>"card game"</code>
group minus the mean of the <code>"dice game"</code> group, because
<code>"card game"</code> comes before <code>"dice game"</code>
alphabetically. Note that <strong><code>groupby</code></strong> orders
the rows in ascending order by default.</p>
<p>An incorrect implementation of <code>perm_test</code> is provided
below.</p>
<div class="sourceCode" id="cb39"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="kw">def</span> perm_test(df, labels, data):</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>   diffs <span class="op">=</span> np.array([])</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>   <span class="cf">for</span> i <span class="kw">in</span> np.arange(<span class="dv">1000</span>):</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>       df.assign(shuffled<span class="op">=</span>np.random permutation(df.get(data)))</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>       means <span class="op">=</span> df.groupby(labels).mean().get(data)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>       diff <span class="op">=</span> means.iloc[<span class="dv">0</span>] <span class="op">-</span> means.iloc[<span class="dv">1</span>]</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>       diffs <span class="op">=</span> np.append(diffs, diff)</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>       <span class="cf">return</span> diffs</span></code></pre></div>
<p>Three lines of code above are incorrect. Your job is to identify
which lines of code are incorrect, and describe briefly in English how
you would fix them. You don’t need to explain why the current code is
wrong, just how to fix it.</p>
<p><br></p>
<h3 id="problem-21.1">Problem 21.1</h3>
<p>The first line that is incorrect is line number: _______</p>
<p>Explain in one sentence how to change this line. Do not write
code.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading21_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse21_1" aria-expanded="true" aria-controls="collapse21_1">
Click to view the solution.
</button>
</h2>
<div id="collapse21_1" class="accordion-collapse collapse"
aria-labelledby="heading21_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Line 4; We need to save this as
<code>df</code>.</p>
<p>Recall that <code>df.assign()</code> does not save the added column
to the original <code>df</code>, which means that we need to save line 4
to a variable called <code>df</code>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 55%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-21.2">Problem 21.2</h3>
<p>The second line that is incorrect is line number: _______</p>
<p>Explain in one sentence how to change this line. Do not write
code.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading21_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse21_2" aria-expanded="true" aria-controls="collapse21_2">
Click to view the solution.
</button>
</h2>
<div id="collapse21_2" class="accordion-collapse collapse"
aria-labelledby="heading21_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Line 5; We need to get
<code>"shuffled"</code> instead of <code>data</code>.</p>
<p>Recall a permutation test is simulating if samples come from the same
population. This means we need to shuffle the data and use it to see if
that would change our result/view. This means in line 5 we want to use
the shuffled data, so we need to do <code>.get(“shuffled”)</code>
instead of <code>.get(“data”)</code>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 50%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-21.3">Problem 21.3</h3>
<p>The third line that is incorrect is line number: _______</p>
<p>Explain in one sentence how to change this line. Do not write
code.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading21_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse21_3" aria-expanded="true" aria-controls="collapse21_3">
Click to view the solution.
</button>
</h2>
<div id="collapse21_3" class="accordion-collapse collapse"
aria-labelledby="heading21_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Line 8; Move it outside of the
<code>for</code>-loop (unindent).</p>
<p>If we have <code>return</code> inside of the <code>for</code>-loop it
will terminate after it goes through the code once! This means all we
have to do is unindent <code>return</code>, moving it outside of the
<code>for</code>-loop.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 67%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<p>Suppose you’ve fixed all the issues with this function, as you
described above. Now, you want to use this corrected function to run a
permutation test with the following hypotheses:</p>
<ul>
<li><strong>Null Hypothesis</strong>: The play time of children’s
dice-rolling games and the play time of children’s non-dice-rolling
games come from the same distribution.</li>
<li><strong>Alternative Hypothesis</strong>: The play time of children’s
dice-rolling games is lower, on average, than the play time of
children’s non-dice-rolling games.</li>
</ul>
<p>For this permutation test, consider a children’s game to be a game
that has <code>"Children’s Games"</code> as part of the
<code>"Domains"</code> column. A dice-rolling game is one that has
<code>"Dice Rolling"</code> as part of the <code>"Mechanics"</code>
column, and a non-dice-rolling game is one that does not have
<code>"Dice Rolling"</code> as part of the <code>"Mechanics"</code>
column.</p>
<p>The DataFrame <code>with_dice</code> is defined as follows.</p>
<div class="sourceCode" id="cb40"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>with_dice <span class="op">=</span> games.assign(isDice <span class="op">=</span> games.get(<span class="st">&quot;Mechanics&quot;</span>).<span class="bu">str</span>.contains(<span class="st">&quot;Dice Rolling&quot;</span>))</span></code></pre></div>
<p><br></p>
<h3 id="problem-21.4">Problem 21.4</h3>
<p>Write one line of code that creates an array called
<code>simulated_diffs</code> containing 1000 simulated differences in
group means for this permutation test. You should call your
<code>perm_test</code> function here!</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading21_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse21_4" aria-expanded="true" aria-controls="collapse21_4">
Click to view the solution.
</button>
</h2>
<div id="collapse21_4" class="accordion-collapse collapse"
aria-labelledby="heading21_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong></p>
<div id="cb1" class="sourceCode">
<pre class="sourceCode py"><code class="sourceCode python"><span id="cb1-1"><a aria-hidden="true" href="#cb1-1" tabindex="-1"></a>simulated diffs <span class="op">=</span> perm_test(<span class="cf">with</span> dice[<span class="cf">with</span> dice.get(<span class="st">"Domains"</span>).<span class="bu">str</span>.contains(<span class="st">"Children’s Games"</span>)], <span class="st">"isDice"</span>, <span class="st">"Play Time"</span>)</span></code></pre>
</div>
<p>The inputs to <code>perm_test</code>, in order, are:</p>
<ul>
<li>A DataFrame containing all relevant information.</li>
<li>The name of the column in that DataFrame that contains group
labels.</li>
<li>The name of the column in that DataFrame that contains numbers.</li>
</ul>
<p>Here, the only relevant information is information on
<code>"Children's Games"</code>, so the first argument to
<code>perm_test</code> must be a DataFrame in which the
<code>"Domains"</code> column contains <code>"Children's Games"</code>,
as described in the question.</p>
<p>Then, since we’re testing whether the distribution of
<code>"Play Time"</code> is different for dice games and non-dice games,
we know that the column with group labels is <code>"isDice"</code>
(which is defined in the call to <code>.assign</code> that is provided
to us in the question), and the column with numerical information is
<code>"Play Time"</code>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 60%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-21.5">Problem 21.5</h3>
<p>Suppose we’ve stored the observed value of the test statistic for
this permutation test in the variable <code>obs_diff</code>. Fill in the
blank below to find the p-value for this permutation test.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> &lt;</p></li>
<li><p><input type="radio" disabled="" /> &lt;=</p></li>
<li><p><input type="radio" disabled="" /> &gt;</p></li>
<li><p><input type="radio" disabled="" /> &gt;=</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading21_5">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse21_5" aria-expanded="true" aria-controls="collapse21_5">
Click to view the solution.
</button>
</h2>
<div id="collapse21_5" class="accordion-collapse collapse"
aria-labelledby="heading21_5" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> &gt;=</p>
<p>We want to find if the <code>simulated_diffs</code> are more or as
extreme as the <code>obs_diff</code>. To be as or more extreme that
means it needs an equal sign. The other part of this is it cannot be
smaller because then it is <strong>not</strong> as extreme, which means
the answer must be &gt;=.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 57%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<p class="meta"><em>Source:</em> wi24-final — Q12</p>
<h2 id="problem-22">Problem 22</h2>
<p>Consider the DataFrame
<code>olympians.drop(columns=["Medal", "Year", "Count"])</code>.</p>
<p><br></p>
<h3 id="problem-22.1">Problem 22.1</h3>
<p>State a question we could answer using the data in this DataFrame and
a permutation test.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading22_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse22_1" aria-expanded="true" aria-controls="collapse22_1">
Click to view the solution.
</button>
</h2>
<div id="collapse22_1" class="accordion-collapse collapse"
aria-labelledby="heading22_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> There are many possible answers for this
question. Some examples: “Are male olympians from Team USA significantly
taller than male olympians from other countries?”, “Are olympic swimmers
heavier than olympic figure skaters?”, “On average, are male athletes
heavier than female athletes?” Any question asking for a difference in a
numerical variable across olympians from different categories would
work, as long as it is not about the dropped columns.</p>
<p>Recall that a permutation test is basically trying to test if two
variables come from the same distribution or if the difference between
those two variables are so significant that we can’t possibly say that
they’re from the same distribution. In general, this means the question
would have to involve the age, height, or weight column because they are
numerical data.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 80%.</p>
</div>
</div>
</div>
</div>
<p><br> <br></p>
<h3 id="problem-22.2">Problem 22.2</h3>
<p>State the null and alternative hypotheses for this permutation
test.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading22_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse22_2" aria-expanded="true" aria-controls="collapse22_2">
Click to view the solution.
</button>
</h2>
<div id="collapse22_2" class="accordion-collapse collapse"
aria-labelledby="heading22_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Also many possible answers depending on your
answer for the first question.</p>
<p>For example, if our question was “Are olympic swimmers heavier than
olympic figure skaters?”, then the null hypothesis could be “Olympic
swimmers weigh the same as olympic figure skaters” and the alternative
could be “Olympic swimmers weigh more than figure skaters.”</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 80%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<p class="meta"><em>Source:</em> wi25-final — Q6</p>
<h2 id="problem-23">Problem 23</h2>
<p>Professor Severus Snape is rumored to display favoritism toward
certain students. Specifically, some believe that he awards more house
points to students from <strong>wizarding families</strong> (those with
at least one wizarding parent) than students from <strong>muggle
families</strong> (those without wizarding parents).</p>
<p>To investigate this claim, you will perform a <strong>permutation
test</strong> with these hypotheses:</p>
<ul>
<li><p><strong>Null Hypothesis:</strong> Snape awards house points
<strong>independently of a student’s family background</strong>
(wizarding family vs. muggle family). Any observed difference is due to
chance.</p></li>
<li><p><strong>Alternative Hypothesis:</strong> Snape awards
<strong>more</strong> house points to students from wizarding families,
on average.</p></li>
</ul>
<p>The DataFrame <code>snape</code> is indexed by <code>"Student"</code>
and contains information on each student’s family background
(<code>"Family"</code>) and the number of house points awarded by Snape
(<code>"Points"</code>). The first few rows of <code>snape</code> are
shown below.</p>
<center><img src='../../assets/images/wi25-final/snape.jpg' width=400></center>
<p><br></p>
<h3 id="problem-23.1">Problem 23.1</h3>
<p>Which of the following is the most appropriate test statistic for our
permutation test?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> The total number of house points awarded to students from wizarding
families minus the total number of house points awarded to students from
muggle families.</p></li>
<li><p><input type="radio" disabled="" /> The mean number of house points awarded to students from wizarding
families minus the mean number of house points awarded to students from
muggle families.</p></li>
<li><p><input type="radio" disabled="" /> The number of students from wizarding families minus the number of
students from muggle families.</p></li>
<li><p><input type="radio" disabled="" /> The absolute difference between the mean number of house points
awarded to students from wizarding families and the mean number of house
points awarded to students from muggle families.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading23_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse23_1" aria-expanded="true" aria-controls="collapse23_1">
Click to view the solution.
</button>
</h2>
<div id="collapse23_1" class="accordion-collapse collapse"
aria-labelledby="heading23_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> The mean number of house points awarded to
students from wizarding families minus the mean number of house points
awarded to students from muggle families.</p>
<p>Let’s look at each of the options:</p>
<ul>
<li>Option 1: Incorrect. This does not work as a test statistic because
the size of each group is not taken into account. For example, if there
are more wizarding students than muggle students, their total could be
higher just because they have more students.</li>
<li>Option 2: Correct. The difference in mean number of house points
between the two groups is the correct choice because it accounts for
group size and tells us which group is being awarded more points.</li>
<li>Option 3: Incorrect. This will not help us find out if one of the
two groups receives favoritism, since the size of the group does not
have anything to do with how many house points they are awarded.</li>
<li>Option 4: Incorrect. This does not work as a test statistic because
the absolute difference does not tell us which group is being awarded
more points. For example, an absolute difference of 1 could mean that
either wizarding families or muggle families are being awarded one more
point on average.</li>
</ul>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 83%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-23.2">Problem 23.2</h3>
<p>Fill in the blanks in the function <code>one_stat</code>, which
calculates one value of the test statistic you chose in part (a), based
on the data in <code>df</code>, which will have columns called
<code>"Family"</code> and <code>"Points"</code>.</p>
<pre><code>    def one_stat(df):
        grouped = df.groupby(__(a)__).__(b)__
        return __(c)__</code></pre>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading23_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse23_2" aria-expanded="true" aria-controls="collapse23_2">
Click to view the solution.
</button>
</h2>
<div id="collapse23_2" class="accordion-collapse collapse"
aria-labelledby="heading23_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong></p>
<ul>
<li><strong>(a):</strong> `<code>"Family"</code></li>
<li><strong>(b):</strong> <code>mean()</code></li>
<li><strong>(c):</strong>
<code>grouped.get("Points").loc["Wizarding"] - grouped.get("Points").loc["Muggle"]</code>
or
<code>grouped.get("Points").iloc[1] - grouped.get("Points").iloc[0]</code></li>
</ul>
<p>We first group by the <code>"Family"</code> column, which will create
two groups, one for wizarding families and one for muggle families.</p>
<p>Using <code>mean()</code> as our aggregation function here will give
us the mean of each of our two groups, allowing us to prepare for taking
the difference in group means.</p>
<p>The <code>grouped</code> DataFrame will have two rows with
<code>"Wizarding"</code> and <code>"Muggle"</code> as the index, and
just one column <code>"Points"</code> which contains the mean of each
group. We can either use <code>.loc[]</code> or <code>.iloc[]</code> to
get each group mean, and then take the mean number of house points for
wizarding families minus the mean number of house points for muggle
families. Note that we cannot do this the other way around since our
test statistic we chose in part (a) specifically mentions that
order.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 81%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-23.3">Problem 23.3</h3>
<p>Fill in the blanks in the function <code>calculate_stats</code>,
which calculates 1000 simulated values of the test statistic you chose
in part (a), under the assumptions of the null hypothesis. As before,
<code>df</code> will have columns called <code>"Family"</code> and
<code>"Points"</code>.</p>
<pre><code>    def calculate_stats(df)
        statistics = np.array([])

        for i in np.arange(1000):
            shuffled = df.assign(Points = __(d)__)
            stat = one_stat(__(e)__)
            statistics = __(f)__

        return statistics</code></pre>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading23_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse23_3" aria-expanded="true" aria-controls="collapse23_3">
Click to view the solution.
</button>
</h2>
<div id="collapse23_3" class="accordion-collapse collapse"
aria-labelledby="heading23_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong></p>
<ul>
<li><strong>(d):</strong>
<code>np.random.permutation(df.get("Points"))</code></li>
<li><strong>(e):</strong> <code>shuffled</code></li>
<li><strong>(f):</strong> <code>np.append(statistics, stat)</code></li>
</ul>
<p>Since we performing a permutation test, we need to shuffle the
<code>"Points"</code> column to simulate the null hypothesis, that Snape
awards points independently of family background. Note that shuffling
either <code>"Family"</code> or <code>"Points"</code> would work, but in
this case the code specifies that we are naming this shuffled column
<code>Points</code>.</p>
<p>Next, we pass <code>shuffled</code> into our <code>one_stat</code>
function from part (b) to calculate the test statistic for
<code>shuffled</code>.</p>
<p>We then store our test statistic in the <code>statistics</code>
array, which will have 1000 simulated test statistics under the null
hypothesis once the for loop finishes running.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 85%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-23.4">Problem 23.4</h3>
<p>Fill in the blanks to calculate the p-value of the permutation test,
based on the data in <code>snape</code>.</p>
<div class="sourceCode" id="cb43"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>    observed <span class="op">=</span> __(g)__</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    simulated <span class="op">=</span> __(h)__</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    p_value <span class="op">=</span> (simulated __(i)__ observed).mean()</span></code></pre></div>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading23_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse23_4" aria-expanded="true" aria-controls="collapse23_4">
Click to view the solution.
</button>
</h2>
<div id="collapse23_4" class="accordion-collapse collapse"
aria-labelledby="heading23_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong></p>
<ul>
<li><strong>(g):</strong> <code>one_stat(snape)</code> or
<code>snape.groupby("Family").mean().get("Points").loc["Wizarding"] -  snape.groupby("Family").mean().get("Points").loc["Muggle"]</code>
or
<code>snape.groupby("Family").mean().get("Points").iloc[1] -  snape.groupby("Family").mean().get("Points").iloc[0]</code></li>
<li><strong>(h):</strong> <code>calculate_stats(snape)</code></li>
<li><strong>(i):</strong> <code>&gt;=</code></li>
</ul>
<p>Our observed is going to be the test statistic we obtain from the
initial observed data. We already created a function to calculate the
test statistic — <code>one_stat</code>—, so we just need to apply it to
our observed data —<code>snape</code>—, giving
<code>one_state(snape)</code> in blank g. You can also manually
calculate the observed test statistic by applying the logic in the
formula giving either:
<code>snape.groupby("Family").mean().get("Points").loc["Wizarding"] - snape.groupby("Family").mean().get("Points").loc["Muggle"]</code>
or
<code>snape.groupby("Family").mean().get("Points").iloc[1] - snape.groupby("Family").mean().get("Points").iloc[0]</code>.</p>
<p>The simulated variable is simply the array of simulated test
statistics. We already created a function to run the simulation called
<code>calculate_stats</code>, so we just need to call it with our data
giving <code>calculate_stats(snape)</code> in blank h.</p>
<p>Finally, the p-value is the probability of observing a result as
extreme or even more extreme than our observed. The alternative
hypothesis states that Snape awards more points to students from
wizarding families, and the test statistic is the mean points of
wizarding families minus the mean points from muggle families. Thus, in
this case, a more extreme result, would be the simulated statistics
being larger than the observed value. Thus, we use the
<code>&gt;=</code> operator in blank i to calculate the the number of
simulated statistics that are equal to or greater than the observed
value. Calculating the mean of this boolean series will output this
proportion of seeing a result as extreme or even more extreme than the
observed.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 80%. </p>
<hr/>
<h5>Difficulty:
⭐️⭐️</h5>
<p>The average score on this problem was 80%.
</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>The average score on this problem was
81%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-23.5">Problem 23.5</h3>
<p>Define <code>mini_snape = snape.take(np.arange(3))</code> as shown
below.</p>
<center><img src='../../assets/images/wi25-final/snape.jpg' width=400></center>
<p>Determine the value of the following expression.</p>
<div class="sourceCode" id="cb44"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(calculate_stats(mini_snape))</span></code></pre></div>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading23_5">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse23_5" aria-expanded="true" aria-controls="collapse23_5">
Click to view the solution.
</button>
</h2>
<div id="collapse23_5" class="accordion-collapse collapse"
aria-labelledby="heading23_5" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> 1000</p>
<p>This problem is trying to find the length of the
<code>calculate_stats(snape)</code> array. Looking at
<code>calculate_stats</code>, we know that it calculates a simulated
test statistic and appends it to the output array 1000 times as
indicated in the for loop. Thus, the output of the function is an array
of size 1000.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 78%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-23.6">Problem 23.6</h3>
<p>With <code>mini_snape</code> defined as above, there will be at most
three unique values in <code>calculate_stats(mini_snape)</code>. What
are those three values? Put the <strong>smallest value on the left and
the largest on the right</strong>.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading23_6">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse23_6" aria-expanded="true" aria-controls="collapse23_6">
Click to view the solution.
</button>
</h2>
<div id="collapse23_6" class="accordion-collapse collapse"
aria-labelledby="heading23_6" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> -5, -2, and 7</p>
<p>We are trying to find the three unique values outputted by
<code>calculate_stats(mini_snape)</code>. The function shuffles the
<code>'Points'</code> column, thus assigning new points to either the
‘Wizarding’ or ‘Muggle’ label. We know that there is one ‘Muggle’ label
and two ‘Wizarding’ labels, so with each iteration, the ‘Wizarding’
label will have two items and the ‘Muggle’ label will only have one
item. There are only three unique values that can be calculated from
this because there are only three unique groups of two and one that can
be made using the data. For example, if the data was A,B,C, then the
only three unique groups of two and one we can create are AC and B, AB
and C, and BC and A. Thus, we can now just run through all the
combinations of groups to find our three unique values. We can do this
by forming each scenario of groupings and calculating the test statistic
by finding the mean number of points for ‘Wizarding’ and then
subtracting by the value of ‘Muggle’ as dictated by the test statistic
(Note: we do not need to take a mean for ‘Muggle’ since there is only
one value assigned here):</p>
<p>Scenario 1:</p>
<ul>
<li>Wizarding: 15, 7</li>
<li>Muggle: 13</li>
</ul>
<p><span class="math display">
\begin{align*}
\frac{15+7}{2} &amp;= 11 \\
11 - 13 &amp;= -2
\end{align*}
</span></p>
<p>Scenario 2:</p>
<ul>
<li>Wizarding: 13, 7</li>
<li>Muggle: 15 <span class="math display">
\begin{align*}
\frac{13+7}{2} &amp;= 10 \\
10 - 15 &amp;= -5
\end{align*}
</span></li>
</ul>
<p>Scenario 3:</p>
<ul>
<li>Wizarding: 13, 15</li>
<li>Muggle: 7</li>
</ul>
<p><span class="math display">
\begin{align*}
\frac{13+15}{2} &amp;= 14 \\
14 - 7 &amp;= 7
\end{align*}
</span></p>
<p>Thus, our answer from least to greatest is -5, -2, and 7.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 66%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
</body>
</html>
