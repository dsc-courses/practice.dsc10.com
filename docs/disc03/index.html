<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Discussion 3: Querying, Grouping, and Plotting</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="..\assets\theme.css" />
  <script defer=""
  src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Discussion 3: Querying, Grouping, and Plotting</h1>
</header>
<p><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<!-- add after bootstrap.min.css -->
<link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css"/>
<!-- add after bootstrap.min.js or bootstrap.bundle.min.js -->
<script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script></p>
<!-- for difficulty gauges-->
<script src="https://cdn.plot.ly/plotly-2.16.1.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B947E6J6H4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B947E6J6H4');
</script>
<p><a href="../index.html">← return to practice.dsc10.com</a></p>
<hr />
<p>The problems in this worksheet are taken from past exams. Work on
them <strong>on paper</strong>, since the exams you take in this course
will also be on paper. <br><br>We encourage you to complete this
worksheet in a discussion section, which is held live on Monday, October
10th. Solutions will be made available after all discussion sections
have concluded. You don’t need to submit your answers anywhere.</p>
<hr />
<h2 id="problem-1">Problem 1</h2>
<p>For this question we will use data from the 2021 Women’s National
Basketball Association (WNBA) season for the next several problems. In
basketball, players score points by shooting the ball into a hoop. The
team that scores the most points wins the game.</p>
<p>Kelsey Plum, a WNBA player, attended La Jolla Country Day School,
which is adjacent to UCSD’s campus. Her current team is the Las Vegas
Aces (three-letter code <code>'LVA'</code>). <strong>In 2021, the Las
Vegas Aces played 31 games, and Kelsey Plum played in all
31.</strong></p>
<p>The DataFrame <code>plum</code> contains her stats for all games the
Las Vegas Aces played in 2021. The first few rows of <code>plum</code>
are shown below (though the full DataFrame has 31 rows, not 5):</p>
<center><img src='../assets/images/wi22-final/plum.png' width=40%></center>
<p>Each row in <code>plum</code> corresponds to a single game. For each
game, we have:</p>
<ul>
<li><code>'Date'</code> (<code>str</code>), the date on which the game
was played</li>
<li><code>'Opp'</code> (<code>str</code>), the three-letter code of the
opponent team</li>
<li><code>'Home'</code> (<code>bool</code>), <code>True</code> if the
game was played in Las Vegas (“home”) and <code>False</code> if it was
played at the opponent’s arena (“away”)</li>
<li><code>'Won'</code> (<code>bool</code>), <code>True</code> if the Las
Vegas Aces won the game and <code>False</code> if they lost</li>
<li><code>'PTS'</code> (<code>int</code>), the number of points Kelsey
Plum scored in the game</li>
<li><code>'AST'</code> (<code>int</code>), the number of assists
(passes) Kelsey Plum made in the game</li>
<li><code>'TOV'</code> (<code>int</code>), the number of turnovers
Kelsey Plum made in the game (a turnover is when you lose the ball –
turnovers are bad!) <br><br></li>
</ul>
<h3 id="problem-1.1">Problem 1.1</h3>
<p>What type of visualization is best suited for visualizing the trend
in the number of points Kelsey Plum scored per game in 2021?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Histogram</p></li>
<li><p><input type="radio" disabled="" /> Bar chart</p></li>
<li><p><input type="radio" disabled="" /> Line chart</p></li>
<li><p><input type="radio" disabled="" /> Scatter plot</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_1" aria-expanded="true" aria-controls="collapse1_1">
Click to view the solution.
</button>
</h2>
<div id="collapse1_1" class="accordion-collapse collapse collapse"
aria-labelledby="heading1_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Line chart</p>
<p>Here, there are two quantitative variables (number of points and game
number), and one of them involves some element of time (game number).
Line charts are appropriate when one quantitative variable is time.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 75%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.2">Problem 1.2</h3>
<p>Fill in the blanks below so that <code>total_june</code> evaluates to
the total number of points Kelsey Plum scored in June.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>june_only <span class="op">=</span> plum[__(a)__]</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>total_june <span class="op">=</span> june_only.__(b)__</span></code></pre></div>
<ol type="1">
<li><p>What goes in blank (a)?</p></li>
<li><p>What goes in blank (b)?</p></li>
</ol>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_2" aria-expanded="true" aria-controls="collapse1_2">
Click to view the solution.
</button>
</h2>
<div id="collapse1_2" class="accordion-collapse collapse collapse"
aria-labelledby="heading1_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong></p>
<ol type="1">
<li><p><code>plum.get('Date').str.contains('-06-')</code></p></li>
<li><p><code>get('PTS').sum()</code></p></li>
</ol>
<p>To find the total number of points Kelsey Plum scored in June, one
approach is to first create a DataFrame with only the rows for June.
During the month of June, the <code>'Date'</code> values contain
<code>'-06-'</code> (since June is the 6th month), so
<code>plum.get('Date').str.contains('-06-')</code> is a Series
containing <code>True</code> only for the June rows and
<code>june_only = plum[plum.get('Date').str.contains('-06-')]</code> is
a DataFrame containing only the June rows.</p>
<p>Then, all we need is the sum of the <code>'PTS'</code> column, which
is given by <code>june_only.get('PTS').sum()</code>.</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 90%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.3">Problem 1.3</h3>
<p>For your convenience, we show the first few rows of <code>plum</code>
again below.</p>
<center><img src='../assets/images/wi22-final/plum.png' width=40%></center>
<p>There is exactly one team in the WNBA that Plum’s team did not win
any games against during the 2021 season. Fill in the blanks below so
that <code>never_beat</code> evaluates to a string containing the
three-letter code of that team.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>never_beat <span class="op">=</span> plum.groupby(__(a)__).<span class="bu">sum</span>().__(b)__</span></code></pre></div>
<ol type="1">
<li><p>What goes in blank (a)?</p></li>
<li><p>What goes in blank (b)?</p></li>
</ol>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_3" aria-expanded="true" aria-controls="collapse1_3">
Click to view the solution.
</button>
</h2>
<div id="collapse1_3" class="accordion-collapse collapse collapse"
aria-labelledby="heading1_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong></p>
<ol type="1">
<li><p><code>'Opp'</code></p></li>
<li><p><code>sort_values('Won').index[0]</code></p></li>
</ol>
<p>The key insight here is that the values in the <code>'Won'</code>
column are Boolean, and when Boolean values are used in arithmetic they
are treated as 1s (<code>True</code>) and 0s (<code>False</code>). The
<code>sum</code> of several <code>'Won'</code> values is the same as the
number of wins.</p>
<p>If we group <code>plum</code> by <code>'Opp'</code> and use
<code>.sum()</code>, the resulting <code>'Won'</code> column contains
the number of wins that Plum’s team had against each unique opponent. If
we sort this DataFrame by <code>'Won'</code> in increasing order (which
is the default behavior of <code>sort_values</code>), the row at the top
will correspond to the <code>'Opp'</code> that Plum’s team had no wins
against. Since we grouped by <code>'Opp'</code>, team names are stored
in the index, so <code>.index[0]</code> will give us the name of the
desired team.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 67%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-2">Problem 2</h2>
<p>Suppose <code>df</code> is a DataFrame and <code>b</code> is any
boolean array whose length is the same as the number of rows of
<code>df</code>.</p>
<p>True or False: For any such boolean array <code>b</code>,
<code>df[b].shape[0]</code> is less than or equal to
<code>df.shape[0]</code>.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> True</p></li>
<li><p><input type="radio" disabled="" /> False</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2" aria-expanded="true" aria-controls="collapse2">
Click to view the solution.
</button>
</h2>
<div id="collapse2" class="accordion-collapse collapse collapse"
aria-labelledby="heading2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> True</p>
<p>The brackets in <code>df[b]</code> perform a query, or filter, to
keep only the rows of <code>df</code> for which <code>b</code> has a
<code>True</code> entry. Typically, <code>b</code> will come from some
condition, such as the entry in a certain column of <code>df</code>
equaling a certain value. Regardless, <code>df[b]</code> contains a
subset of the rows of <code>df</code>, and <code>.shape[0]</code> counts
the number of rows, so <code>df[b].shape[0]</code> must be less than or
equal to <code>df.shape[0]</code>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 86%.</p>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-3">Problem 3</h2>
<p>You are given a DataFrame called <code>books</code> that contains
columns <code>'author'</code> (string), <code>'title'</code> (string),
<code>'num_chapters'</code> (int), and <code>'publication_year'</code>
(int).</p>
<p>Suppose that after doing <code>books.groupby('Author').max()</code>,
one row says</p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>author</th>
<th>title</th>
<th>num_chapters</th>
<th>publication_year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Charles Dickens</td>
<td>Oliver Twist</td>
<td>53</td>
<td>1838</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="problem-3.1">Problem 3.1</h3>
<p>Based on this data, can you conclude that Charles Dickens is the
alphabetically last of all author names in this dataset?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Yes</p></li>
<li><p><input type="radio" disabled="" /> No</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3_1" aria-expanded="true" aria-controls="collapse3_1">
Click to view the solution.
</button>
</h2>
<div id="collapse3_1" class="accordion-collapse collapse collapse"
aria-labelledby="heading3_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> No</p>
<p>When we group by <code>'Author'</code>, all books by the same author
get aggregated together into a single row. The aggregation function is
applied separately to each other column besides the column we’re
grouping by. Since we’re grouping by <code>'Author'</code> here, the
<code>'Author'</code>column never has the <code>max()</code> function
applied to it. Instead, each unique value in the <code>'Author'</code>
column becomes a value in the index of the grouped DataFrame. We are
told that the Charles Dickens row is just one row of the output, but we
don’t know anything about the other rows of the output, or the other
authors. We can’t say anything about where Charles Dickens falls when
authors are ordered alphabetically (but it’s probably not last!)</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 94%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-3.2">Problem 3.2</h3>
<p>Based on this data, can you conclude that Charles Dickens wrote
<em>Oliver Twist</em>?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Yes</p></li>
<li><p><input type="radio" disabled="" /> No</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3_2" aria-expanded="true" aria-controls="collapse3_2">
Click to view the solution.
</button>
</h2>
<div id="collapse3_2" class="accordion-collapse collapse collapse"
aria-labelledby="heading3_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Yes</p>
<p>Grouping by <code>'Author'</code> collapses all books written by the
same author into a single row. Since we’re applying the
<code>max()</code> function to aggregate these books, we can conclude
that <em>Oliver Twist</em> is alphabetically last among all books in the
<code>books</code> DataFrame written by Charles Dickens. So Charles
Dickens did write <em>Oliver Twist</em> based on this data.</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 95%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-3.3">Problem 3.3</h3>
<p>Based on this data, can you conclude that <em>Oliver Twist</em> has
53 chapters?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Yes</p></li>
<li><p><input type="radio" disabled="" /> No</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3_3" aria-expanded="true" aria-controls="collapse3_3">
Click to view the solution.
</button>
</h2>
<div id="collapse3_3" class="accordion-collapse collapse collapse"
aria-labelledby="heading3_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> No</p>
<p>The key to this problem is that <code>groupby</code> applies the
aggregation function, <code>max()</code> in this case, independently to
each column. The output should be interpreted as follows:</p>
<ul>
<li>Among all books in <code>books</code> written by Charles Dickens,
<em>Oliver Twist</em> is the title that is alphabetically last.</li>
<li>Among all books in <code>books</code> written by Charles Dickens, 53
is the greatest number of chapters.</li>
<li>Among all books in <code>books</code> written by Charles Dickens,
1838 is the latest year of publication.</li>
</ul>
<p>However, the book titled <em>Oliver Twist</em>, the book with 53
chapters, and the book published in 1838 are not necessarily all the
same book. We cannot conclude, based on this data, that <em>Oliver
Twist</em> has 53 chapters.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 74%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-3.4">Problem 3.4</h3>
<p>Based on this data, can you conclude that Charles Dickens wrote a
book with 53 chapters that was published in 1838?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Yes</p></li>
<li><p><input type="radio" disabled="" /> No</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3_4" aria-expanded="true" aria-controls="collapse3_4">
Click to view the solution.
</button>
</h2>
<div id="collapse3_4" class="accordion-collapse collapse collapse"
aria-labelledby="heading3_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> No</p>
<p>As explained in the previous question, the <code>max()</code>
function is applied separately to each column, so the book written by
Charles Dickens with 53 chapters may not be the same book as the book
written by Charles Dickens published in 1838.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 73%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-4">Problem 4</h2>
<p>You have a DataFrame called <code>prices</code> that contains
information about food prices at 18 different grocery stores. There is
column called <code>'broccoli'</code> that contains the price in dollars
for one pound of broccoli at each grocery store. There is also a column
called <code>'ice_cream'</code> that contains the price in dollars for a
pint of store-brand ice cream.</p>
<p><br></p>
<h3 id="problem-4.1">Problem 4.1</h3>
<p>Using the code,</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>prices.plot(kind<span class="op">=</span><span class="st">&#39;hist&#39;</span>, y<span class="op">=</span><span class="st">&#39;broccoli&#39;</span>, bins<span class="op">=</span>np.arange(<span class="fl">0.8</span>, <span class="fl">2.11</span>, <span class="fl">0.1</span>), density<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<p>we produced the histogram below:</p>
<center><img src='../assets/images/wi21-midterm/broccoli.png' width=40%></center>
<p>How many grocery stores sold broccoli for a price greater than or
equal to $1.30 per pound, but less than $1.40 per pound (the tallest
bar)?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4_1" aria-expanded="true" aria-controls="collapse4_1">
Click to view the solution.
</button>
</h2>
<div id="collapse4_1" class="accordion-collapse collapse collapse"
aria-labelledby="heading4_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> 4 grocery stores</p>
<p>We are given that the bins start at 0.8 and have a width of 0.1,
which means one of the bins has endpoints 1.3 and 1.4. This bin (the
tallest bar) includes all grocery stores that sold broccoli for a price
greater than or equal to $1.30 per pound, but less than $1.40 per
pound.</p>
<p>This bar has a width of 0.1 and we’d estimate the height to be around
2.2, though we can’t say exactly. Multiplying these values, the area of
the bar is about 0.22, which means about 22 percent of the grocery
stores fall into this bin. There are 18 grocery stores in total, as we
are told in the introduction to this question. We can compute using a
calculator that 22 percent of 18 is 3.96. Since the actual number of
grocery stores this represents must be a whole number, this bin must
represent 4 grocery stores.</p>
<p>The reason for the slight discrepancy between 3.96 and 4 is that we
used 2.2 for the height of the bar, a number that we determined by eye.
We don’t know the exact height of the bar. It is reassuring to do the
calculation and get a value that’s very close to an integer, since we
know the final answer must be an integer.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 71%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-4.2">Problem 4.2</h3>
<p>Suppose we now plot the same data with different bins, using the
following line of code:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>prices.plot(kind<span class="op">=</span><span class="st">&#39;hist&#39;</span>, y<span class="op">=</span><span class="st">&#39;broccoli&#39;</span>, bins<span class="op">=</span>[<span class="fl">0.8</span>, <span class="dv">1</span>, <span class="fl">1.1</span>, <span class="fl">1.5</span>, <span class="fl">1.8</span>, <span class="fl">1.9</span>, <span class="fl">2.5</span>], density<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<p>What would be the height on the y-axis for the bin corresponding to
the interval <span class="math inline">[\$1.10, \$1.50)</span>? Input
your answer below.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4_2" aria-expanded="true" aria-controls="collapse4_2">
Click to view the solution.
</button>
</h2>
<div id="collapse4_2" class="accordion-collapse collapse collapse"
aria-labelledby="heading4_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> 1.25</p>
<p>First, we need to figure out how many grocery stores the bin <span class="math inline">[\$1.10, \$1.50)</span> contains. We already know
from the previous subpart that there are four grocery stores in the bin
<span class="math inline">[\$1.30, \$1.40)</span>. We could do similar
calculations to find the number of grocery stores in each of these
bins:</p>
<ul>
<li><span class="math inline">[\$1.10, \$1.20)</span></li>
<li><span class="math inline">[\$1.20, \$1.30)</span></li>
<li><span class="math inline">[\$1.40, \$1.50)</span></li>
</ul>
<p>However, it’s much simpler and faster to use the fact that when the
bins are all equally wide, the height of a bar is proportional to the
number of data values it contains. So looking at the histogram in the
previous subpart, since we know the <span class="math inline">[\$1.30,
\$1.40)</span> bin contains 4 grocery stores, then the <span class="math inline">[\$1.10, \$1.20)</span> bin must contain 1 grocery
store, since it’s only a quarter as tall. Again, we’re taking advantage
of the fact that there must be an integer number of grocery stores in
each bin when we say it’s 1/4 as tall. Our only options are 1/4, 1/2, or
3/4 as tall, and among those choices, it’s clear.</p>
<p>Therefore, by looking at the relative heights of the bars, we can
quickly determine the number of grocery stores in each bin:</p>
<ul>
<li><span class="math inline">[\$1.10, \$1.20)</span>: 1 grocery
store</li>
<li><span class="math inline">[\$1.20, \$1.30)</span>: 3 grocery
stores</li>
<li><span class="math inline">[\$1.30, \$1.40)</span>: 4 grocery
stores</li>
<li><span class="math inline">[\$1.40, \$1.50)</span>: 1 grocery
store</li>
</ul>
<p>Adding these numbers together, this means there are 9 grocery stores
whose broccoli prices fall in the interval <span class="math inline">[\$1.10, \$1.50)</span>. In the new histogram, these
9 grocery stores will be represented by a bar of width <span class="math inline">1.50-1.10 = 0.4</span>. The area of the bar should
be <span class="math inline">\frac{9}{18} = 0.5</span>. Therefore the
height must be <span class="math inline">\frac{0.5}{0.4} =
1.25</span>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 33%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-4.3">Problem 4.3</h3>
<p>You are interested in finding out the number of stores in which a
pint of ice cream was cheaper than a pound of broccoli. Will you be able
to determine the answer to this question by looking at the plot produced
by the code below?</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>prices.get([<span class="st">&#39;broccoli&#39;</span>, <span class="st">&#39;ice_cream&#39;</span>]).plot(kind<span class="op">=</span><span class="st">&#39;barh&#39;</span>)</span></code></pre></div>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Yes</p></li>
<li><p><input type="radio" disabled="" /> No</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4_3" aria-expanded="true" aria-controls="collapse4_3">
Click to view the solution.
</button>
</h2>
<div id="collapse4_3" class="accordion-collapse collapse collapse"
aria-labelledby="heading4_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Yes</p>
<p>When we use <code>.plot</code> without specifying a <code>y</code>
column, it uses every column in the DataFrame as a <code>y</code> column
and creates an overlaid plot. Since we first use <code>get</code> with
the list <code>['broccoli', 'ice_cream']</code>, this keeps the
<code>'broccoli'</code> and <code>'ice_cream'</code> columns from
<code>prices</code>, so our bar chart will overlay broccoli prices with
ice cream prices. Notice that this <code>get</code> is unnecessary
because <code>prices</code> only has these two columns, so it would have
been the same to just use <code>prices</code> directly. The resulting
bar chart will look something like this:</p>
<center><img src="../assets/images/wi21-midterm/broc_bar.png" width="40%"/></center>
<p>Each grocery store has its broccoli price represented by the length
of the blue bar and its ice cream price represented by the length of the
red bar. We can therefore answer the question by simply counting the
number of red bars that are shorter than their corresponding blue
bars.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 78%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-4.4">Problem 4.4</h3>
<p>You are interested in finding out the number of stores in which a
pint of ice cream was cheaper than a pound of broccoli. Will you be able
to determine the answer to this question by looking at the plot produced
by the code below?</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>prices.get([<span class="st">&#39;broccoli&#39;</span>, <span class="st">&#39;ice_cream&#39;</span>]).plot(kind<span class="op">=</span><span class="st">&#39;hist&#39;</span>)</span></code></pre></div>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Yes</p></li>
<li><p><input type="radio" disabled="" /> No</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4_4" aria-expanded="true" aria-controls="collapse4_4">
Click to view the solution.
</button>
</h2>
<div id="collapse4_4" class="accordion-collapse collapse collapse"
aria-labelledby="heading4_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> No</p>
<p>This will create an overlaid histogram of broccoli prices and ice
cream prices. So we will be able to see the distribution of broccoli
prices together with the distribution of ice cream prices, but we won’t
be able to pair up particular broccoli prices with ice cream prices at
the same store. This means we won’t be able to answer the question. The
overlaid histogram would look something like this:</p>
<center><img src="../assets/images/wi21-midterm/broc_hist.png" width="40%"/></center>
<p>This tells us that broadly, ice cream tends to be more expensive than
broccoli, but we can’t say anything about the number of stores where ice
cream is cheaper than broccoli.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 81%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-4.5">Problem 4.5</h3>
<p>Some code and the scatterplot that produced it is shown below:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>(prices.get([<span class="st">&#39;broccoli&#39;</span>, <span class="st">&#39;ice_cream&#39;</span>]).plot(kind<span class="op">=</span><span class="st">&#39;scatter&#39;</span>, x<span class="op">=</span><span class="st">&#39;broccoli&#39;</span>, y<span class="op">=</span><span class="st">&#39;ice_cream&#39;</span>))</span></code></pre></div>
<center><img src='../assets/images/wi21-midterm/broc_ice_cream.png' width=40%></center>
<p>Can you use this plot to figure out the number of stores in which a
pint of ice cream was cheaper than a pound of broccoli?</p>
<p>If so, say how many such stores there are and explain how you came to
that conclusion.</p>
<p>If not, explain why this scatterplot cannot be used to answer the
question.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4_5">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4_5" aria-expanded="true" aria-controls="collapse4_5">
Click to view the solution.
</button>
</h2>
<div id="collapse4_5" class="accordion-collapse collapse collapse"
aria-labelledby="heading4_5" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Yes, and there are 2 such stores.</p>
<p>In this scatterplot, each grocery store is represented as one dot.
The <span class="math inline">x</span>-coordinate of that dot tells the
price of broccoli at that store, and the <span class="math inline">y</span>-coordinate tells the price of ice cream. If
a grocery store’s ice cream price is cheaper than its broccoli price,
the dot in the scatterplot will have <span class="math inline">y&lt;x</span>. To identify such dots in the
scatterplot, imagine drawing the line <span class="math inline">y=x</span>. Any dot below this line corresponds to a
point with <span class="math inline">y&lt;x</span>, which is a grocery
store where ice cream is cheaper than broccoli. As we can see, there are
two such stores.</p>
<center><img src="../assets/images/wi21-midterm/broc_ice_cream2.png" width="40%"/></center>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 78%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-5">Problem 5</h2>
<p><center><img src='../assets/images/sp22-midterm/cartoon.png' width=20%></center></p>
<p>Included is a DataFrame named <code>sungod</code> that contains
information on the artists who have performed at Sun God in years past.
<strong>For each year that the festival was held, we have one row for
each artist that performed that year.</strong> The columns are:</p>
<ul>
<li><code>'Year'</code> (<code>int</code>): the year of the
festival</li>
<li><code>'Artist'</code> (<code>str</code>): the name of the
artist</li>
<li><code>'Appearance_Order'</code> (<code>int</code>): the order in
which the artist appeared in that year’s festival (1 means they came
onstage first)</li>
</ul>
<p>The rows of <code>sungod</code> are arranged in <strong>no particular
order</strong>. The first few rows of <code>sungod</code> are shown
below (though <code>sungod</code> has <strong>many more rows</strong>
than pictured here).</p>
<center><img src='../assets/images/sp22-midterm/sungod.png' width=30%></center>
<p>Assume:</p>
<ul>
<li><p>Only one artist ever appeared at a time (for example, we can’t
have two separate artists with a <code>'Year'</code> of 2015 and an
<code>'Appearance_Order'</code> of 3).</p></li>
<li><p>An artist may appear in multiple different Sun God festivals
(they could be invited back).</p></li>
<li><p>We have already run <code>import babypandas as bpd</code> and
<code>import numpy as np</code>. <br><br></p></li>
</ul>
<p>On the graph paper below, draw the histogram that would be produced
by this code.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>sungod.take(np.arange(<span class="dv">5</span>))</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>      .plot(kind<span class="op">=</span><span class="st">&#39;hist&#39;</span>, density<span class="op">=</span><span class="va">True</span>, </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>      bins<span class="op">=</span>np.arange(<span class="dv">0</span>, <span class="dv">7</span>, <span class="dv">2</span>), y<span class="op">=</span><span class="st">&#39;Appearance_Order&#39;</span>)<span class="op">;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>In your drawing, make sure to label the height of each bar in the
histogram on the vertical axis. You can scale the axes however you like,
and the two axes don’t need to be on the same scale.</p>
<center><img src='../assets/images/sp22-midterm/graph-paper.png' width=250></center>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5" aria-expanded="true" aria-controls="collapse5">
Click to view the solution.
</button>
</h2>
<div id="collapse5" class="accordion-collapse collapse collapse"
aria-labelledby="heading5" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong></p>
<center><img src="../assets/images/sp22-midterm/graph-paper-soln.png" width="330"/></center>
<p>To draw the histogram, we first need to bin the data and figure out
how many data values fall into each bin. The code includes
<code>bins=np.arange(0, 7, 2)</code> which means the bin endpoints are
<span class="math inline">0, 2, 4, 6</span>. This gives us three bins:
<span class="math inline">[0, 2)</span>, <span class="math inline">[2,
4)</span>, and <span class="math inline">[4, 6]</span>. Remember that
all bins, except for the last one, include the left endpoint but not the
right. The last bin includes both endpoints.</p>
<p>Now that we know what the bins are, we can count up the number of
values in each bin. We need to look at the
<code>'Appearance_Order'</code> column of
<code>sungod.take(np.arange(5))</code>, or the first five rows of
<code>sungod</code>. The values there are <span class="math inline">1,
4, 3, 1, 3</span>. The two <span class="math inline">1</span>s fall into
the first bin <span class="math inline">[0, 2)</span>. The two <span class="math inline">3</span>s fall into the second bin <span class="math inline">[2, 4)</span>, and the one <span class="math inline">4</span> falls into the last bin <span class="math inline">[4, 6]</span>. This means the proportion of values
in each bin are <span class="math inline">\frac{2}{5}, \frac{2}{5},
\frac{1}{5}</span> from left to right.</p>
<p>To figure out the height of each bar in the histogram, we use the
fact that the area of a bar in a density histogram should equal the
proportion of values in that bin. The area of a rectangle is height
times width, so height is area divided by width.</p>
<p>For the bin <span class="math inline">[0, 2)</span>, the area is
<span class="math inline">\frac{2}{5} = 0.4</span> and the width is
<span class="math inline">2</span>, so the height is <span class="math inline">\frac{0.4}{2} = 0.2</span>.</p>
<p>For the bin <span class="math inline">[2, 4)</span>, the area is
<span class="math inline">\frac{2}{5} = 0.4</span> and the width is
<span class="math inline">2</span>, so the height is <span class="math inline">\frac{0.4}{2} = 0.2</span>.</p>
<p>For the bin <span class="math inline">[4, 6]</span>, the area is
<span class="math inline">\frac{1}{5} = 0.2</span> and the width is
<span class="math inline">2</span>, so the height is <span class="math inline">\frac{0.2}{2} = 0.1</span>.</p>
<p>Since the bins are all the same width, the fact that there an equal
number of values in the first two bins and half as many in the third bin
means the first two bars should be equally tall and the third should be
half as tall. We can use this to draw the rest of the histogram quickly
once we’ve drawn the first bar.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 45%.</p>
</div>
</div>
</div>
</div>
<hr />
<h2 id="section"><span class="math display"> </span></h2>
<h4
id="feedback-find-an-error-still-confused-have-a-suggestion-let-us-know-here.">👋
Feedback: Find an error? Still confused? Have a suggestion?
<a href="https://forms.gle/WZ71FchnXU1K154d7">Let us know
here</u></a>.</h4>
<hr />
</body>
</html>
