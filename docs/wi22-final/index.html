<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Winter 2022 Final Exam</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="..\assets\theme.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
   var mathElements = document.getElementsByClassName("math");
   var macros = [];
   for (var i = 0; i < mathElements.length; i++) {
    var texText = mathElements[i].firstChild;
    if (mathElements[i].tagName == "SPAN") {
     katex.render(texText.data, mathElements[i], {
      displayMode: mathElements[i].classList.contains('display'),
      throwOnError: false,
      macros: macros,
      fleqn: false
     });
  }}});
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Winter 2022 Final Exam</h1>
</header>
<p><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script> <!-- add after bootstrap.min.css --> <link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css"/> <!-- add after bootstrap.min.js or bootstrap.bundle.min.js --> <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script></p>
<p><a href="../index.html">← return to practice.dsc10.com</a></p>
<hr />
<p><strong>Instructor(s):</strong> Suraj Rampure</p>
<p>This exam was administered remotely via Gradescope. The exam was open-internet, and students were able to use Jupyter Notebooks. They had 3 hours to work on it.</p>
<hr />
<p>Welcome to the Final Exam for DSC 10 Winter 2022! In this exam, we will use data from the 2021 Women’s National Basketball Association (WNBA) season. In basketball, players score points by shooting the ball into a hoop. The team that scores the most points wins the game.</p>
<p>Kelsey Plum, a WNBA player, attended La Jolla Country Day School, which is adjacent to UCSD’s campus. Her current team is the Las Vegas Aces (three-letter code <code>'LVA'</code>). <strong>In 2021, the Las Vegas Aces played 31 games, and Kelsey Plum played in all 31.</strong></p>
<p>The DataFrame <code>plum</code> contains her stats for all games the Las Vegas Aces played in 2021. The first few rows of <code>plum</code> are shown below (though the full DataFrame has 31 rows, not 5):</p>
<center><img src='../assets/images/wi22-final/plum.png' width=40%></center>
<p>Each row in <code>plum</code> corresponds to a single game. For each game, we have:</p>
<ul>
<li><code>'Date'</code> (<code>str</code>), the date on which the game was played</li>
<li><code>'Opp'</code> (<code>str</code>), the three-letter code of the opponent team</li>
<li><code>'Home'</code> (<code>bool</code>), <code>True</code> if the game was played in Las Vegas (“home”) and <code>False</code> if it was played at the opponent’s arena (“away”)</li>
<li><code>'Won'</code> (<code>bool</code>), <code>True</code> if the Las Vegas Aces won the game and <code>False</code> if they lost</li>
<li><code>'PTS'</code> (<code>int</code>), the number of points Kelsey Plum scored in the game</li>
<li><code>'AST'</code> (<code>int</code>), the number of assists (passes) Kelsey Plum made in the game</li>
<li><code>'TOV'</code> (<code>int</code>), the number of turnovers Kelsey Plum made in the game (a turnover is when you lose the ball – turnovers are bad!)</li>
</ul>
<hr />
<h2 id="problem-1">Problem 1</h2>
<p><br></p>
<h3 id="problem-1.1">Problem 1.1</h3>
<p>What type of visualization is best suited for visualizing the trend in the number of points Kelsey Plum scored per game in 2021?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Histogram</p></li>
<li><p><input type="radio" disabled="" /> Bar chart</p></li>
<li><p><input type="radio" disabled="" /> Line chart</p></li>
<li><p><input type="radio" disabled="" /> Scatter plot</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_1" aria-expanded="true" aria-controls="collapse1_1">
Click to view the solution.
</button>
</h2>
<div id="collapse1_1" class="accordion-collapse collapse collapse" aria-labelledby="heading1_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Line chart</p>
<p>Here, there are two quantitative variables (number of points and game number), and one of them involves some element of time (game number). Line charts are appropriate when one quantitative variable is time.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.2">Problem 1.2</h3>
<p>Fill in the blanks below so that <code>total_june</code> evaluates to the total number of points Kelsey Plum scored in June.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>june_only <span class="op">=</span> plum[__(a)__]</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>total_june <span class="op">=</span> june_only.__(b)__</span></code></pre></div>
<ol type="1">
<li><p>What goes in blank (a)?</p></li>
<li><p>What goes in blank (b)?</p></li>
</ol>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_2" aria-expanded="true" aria-controls="collapse1_2">
Click to view the solution.
</button>
</h2>
<div id="collapse1_2" class="accordion-collapse collapse collapse" aria-labelledby="heading1_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong></p>
<ol type="1">
<li><p><code>plum.get('Date').str.contains('-06-')</code></p></li>
<li><p><code>get('PTS').sum()</code></p></li>
</ol>
<p>To find the total number of points Kelsey Plum scored in June, one approach is to first create a DataFrame with only the rows for June. All June <code>'Date'</code>s contain <code>'-06'</code> (since June is the 6th month), so <code>plum.get('Date').str.contains('-06-')</code> is a Series containing <code>True</code> only for the June rows and <code>june_only = plum[plum.get('Date').str.contains('-06-')]</code> is a DataFrame containing only the June rows.</p>
<p>Then, all we need is the sum of the <code>'PTS'</code> column, which is given by <code>june_only.get('PTS').sum()</code>.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.3">Problem 1.3</h3>
<p>Consider the function <code>unknown</code>, defined below.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> unknown(df):</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> plum.groupby(<span class="st">&#39;Opp&#39;</span>).<span class="bu">max</span>().get([<span class="st">&#39;Date&#39;</span>, <span class="st">&#39;PTS&#39;</span>])</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.array(grouped.reset_index().index)[df]</span></code></pre></div>
<p>What does <code>unknown(3)</code> evaluate to?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>'2021-06-05'</code></p></li>
<li><p><input type="radio" disabled="" /> <code>'WAS'</code></p></li>
<li><p><input type="radio" disabled="" /> The date on which Kelsey Plum scored the most points</p></li>
<li><p><input type="radio" disabled="" /> The three-letter code of the opponent on which Kelsey Plum scored the most points</p></li>
<li><p><input type="radio" disabled="" /> The number 0</p></li>
<li><p><input type="radio" disabled="" /> The number 3</p></li>
<li><p><input type="radio" disabled="" /> An error</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_3" aria-expanded="true" aria-controls="collapse1_3">
Click to view the solution.
</button>
</h2>
<div id="collapse1_3" class="accordion-collapse collapse collapse" aria-labelledby="heading1_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> The number 3</p>
<p><code>plum.groupby('Opp').max()</code> finds the largest value in the <code>'Date'</code>, <code>'Home'</code>, <code>'Won'</code>, <code>'PTS'</code>, <code>'AST'</code>, and <code>'TOV'</code> columns for each unique <code>'Opp'</code> (independently for each column). <code>grouped = plum.groupby('Opp').max().get(['Date', 'PTS'])</code> keeps only the <code>'Date'</code> and <code>'PTS'</code> columns. Note that in <code>grouped</code>, the index is <code>'Date'</code>, the column we grouped on.</p>
<p>When <code>grouped.reset_index()</code> is called, the index is switched back to the default of 0, 1, 2, 3, 4, and so on. Then, <code>grouped.reset_index().index</code> is an <code>Index</code> containing the numbers <code>[0, 1, 2, 3, 4, ...]</code>, and <code>np.array(grouped.reset_index().index)</code> is <code>np.array([0, 1, 2, 3, 4, ...])</code>. In this array, the number at position <code>i</code> is just <code>i</code>, so the number at position <code>df</code> is <code>df</code>. Here, <code>df</code> is the argument to <code>unknown</code>, and we were asked for the value of <code>unknown(3)</code>, so the correct answer is the number at position 3 in <code>np.array([0, 1, 2, 3, 4, ...])</code> which is 3.</p>
<p>Note that if we asked for <code>unknown(50)</code> (or <code>unknown(k)</code>, where <code>k</code> is any integer above 30), the answer would be “An error”, since <code>grouped</code> could not have had 51 rows. <code>plum</code> has 31 rows, so <code>grouped</code> has at most 31 rows (but likely less, since Kelsey Plum’s team likely played the same opponent multiple times).</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.4">Problem 1.4</h3>
<p>For your convenience, we show the first few rows of <code>plum</code> again below.</p>
<center><img src='../assets/images/wi22-final/plum.png' width=40%></center>
<p>Suppose that Plum’s team, the Las Vegas Aces, won at least one game in Las Vegas and lost at least one game in Las Vegas. Also, suppose they won at least one game in an opponent’s arena and lost at least one game in an opponent’s arena.</p>
<p>Consider the DataFrame <code>home_won</code>, defined below.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>home_won <span class="op">=</span> plum.groupby([<span class="st">&#39;Home&#39;</span>, <span class="st">&#39;Won&#39;</span>]).mean().reset_index()</span></code></pre></div>
<ol type="1">
<li><p>How many rows does <code>home_won</code> have?</p></li>
<li><p>How many columns does <code>home_won</code> have?</p></li>
</ol>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_4" aria-expanded="true" aria-controls="collapse1_4">
Click to view the solution.
</button>
</h2>
<div id="collapse1_4" class="accordion-collapse collapse collapse" aria-labelledby="heading1_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> 4 rows and 5 columns.</p>
<p><code>plum.groupby(['Home', 'Won']).mean()</code> contains one row for every unique combination of <code>'Home'</code> and <code>'Won'</code>. There are two values of <code>'Home'</code> - <code>True</code> and <code>False</code> – and two values of <code>'Won'</code> – <code>True</code> and <code>False</code> – leading to 4 combinations. We can assume that there was at least one row in <code>plum</code> for each of these 4 combinations due to the assumption given in the problem:</p>
<p><em>Suppose that Plum’s team, the Las Vegas Aces, won at least one game in Las Vegas and lost at least one game in Las Vegas. Also, suppose they won at least one game in an opponent’s arena and lost at least one game in an opponent’s arena.</em></p>
<p><code>plum</code> started with 7 columns: <code>'Date'</code>, <code>'Opp'</code>, <code>'Home'</code>, <code>'Won'</code>, <code>'PTS'</code>, <code>'AST'</code>, and <code>'TOV'</code>. After grouping by <code>['Home', 'Won']</code> and using <code>.mean()</code>, <code>'Home'</code> and <code>'Won'</code> become the index. The resulting DataFrame contains all of the columns that the <code>.mean()</code> aggregation method can work on. We cannot take the mean of <code>'Date'</code> and <code>'Opp'</code>, because those columns are strings, so <code>plum.groupby(['Home', 'Won']).mean()</code> contains a <code>MultiIndex</code> with 2 “columns” – <code>'Home'</code> and <code>'Won'</code> – and 3 regular columns – <code>'PTS'</code> <code>'AST'</code>, and <code>'TOV'</code>. Then, when using <code>.reset_index()</code>, <code>'Home'</code> and <code>'Won'</code> are restored as regular columns, meaning that <code>plum.groupby(['Home', 'Won']).mean().reset_index()</code> has <span class="math inline">2 + 3 = 5</span> columns.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.5">Problem 1.5</h3>
<p>Consider the DataFrame <code>home_won</code> once again.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>home_won <span class="op">=</span> plum.groupby([<span class="st">&#39;Home&#39;</span>, <span class="st">&#39;Won&#39;</span>]).mean().reset_index()</span></code></pre></div>
<p>Now consider the DataFrame <code>puzzle</code>, defined below. Note that the only difference between <code>home_won</code> and <code>puzzle</code> is the use of <code>.count()</code> instead of <code>.mean()</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>puzzle <span class="op">=</span> plum.groupby([<span class="st">&#39;Home&#39;</span>, <span class="st">&#39;Won&#39;</span>]).count().reset_index()</span></code></pre></div>
<p>How do the number of rows and columns in <code>home_won</code> compare to the number of rows and columns in <code>puzzle</code>?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>home_won</code> and <code>puzzle</code> have the same number of rows and columns</p></li>
<li><p><input type="radio" disabled="" /> <code>home_won</code> and <code>puzzle</code> have the same number of rows, but a different number of columns</p></li>
<li><p><input type="radio" disabled="" /> <code>home_won</code> and <code>puzzle</code> have the same number of columns, but a different number of rows</p></li>
<li><p><input type="radio" disabled="" /> <code>home_won</code> and <code>puzzle</code> have both a different number of rows and a different number of columns</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_5">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_5" aria-expanded="true" aria-controls="collapse1_5">
Click to view the solution.
</button>
</h2>
<div id="collapse1_5" class="accordion-collapse collapse collapse" aria-labelledby="heading1_5" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> <code>home_won</code> and <code>puzzle</code> have the same number of rows, but a different number of columns</p>
<p>All that changed between <code>home_won</code> and <code>puzzle</code> is the aggregation method. The aggregation method has no influence on the number of rows in the output DataFrame, as there is still one row for each of the 4 unique combinations of <code>'Home'</code> and <code>'Won'</code>.</p>
<p>However, <code>puzzle</code> has 7 columns, instead of 5. In the solution to the above subpart, we noticed that we could not use <code>.mean()</code> on the <code>'Date'</code> and <code>'Opp'</code> columns, since they contained strings. However, we can use <code>.count()</code> (since <code>.count()</code> just determines the number of unique values in each group), and so the <code>'Date'</code> and <code>'Opp'</code> columns are not “lost” when aggregating. Hence, <code>puzzle</code> has the same number of columns as <code>home_won</code>, plus 2.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.6">Problem 1.6</h3>
<p>For your convenience, we show the first few rows of <code>plum</code> again below.</p>
<center><img src='../assets/images/wi22-final/plum.png' width=40%></center>
<p>There is exactly one team in the WNBA that Plum’s team did not win any games against during the 2021 season. Fill in the blanks below so that <code>never_beat</code> evaluates to a string containing the three-letter code of that team.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>never_beat <span class="op">=</span> plum.groupby(__(a)__).<span class="bu">sum</span>().__(b)__</span></code></pre></div>
<ol type="1">
<li><p>What goes in blank (a)?</p></li>
<li><p>What goes in blank (b)?</p></li>
</ol>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_6">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_6" aria-expanded="true" aria-controls="collapse1_6">
Click to view the solution.
</button>
</h2>
<div id="collapse1_6" class="accordion-collapse collapse collapse" aria-labelledby="heading1_6" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong></p>
<ol type="1">
<li><p><code>'Opp'</code></p></li>
<li><p><code>sort_values('Won').index[0]</code></p></li>
</ol>
<p>The key insight here is that the values in the <code>'Won'</code> column are Boolean, and when Boolean values are used in arithmetic they are treated as 1s (<code>True</code>) and 0s (<code>False</code>). The <code>sum</code> of several <code>'Won'</code> values is the same as the number of wins.</p>
<p>If we group <code>plum</code> by <code>'Opp'</code> and use <code>.sum()</code>, the resulting <code>'Won'</code> column contains the number of wins that Plum’s team had against each unique opponent. If we sort this DataFrame by <code>'Won'</code> in increasing order (which is the default behavior of <code>sort_values</code>), the row at the top will correspond to the <code>'Opp'</code> that Plum’s team had no wins against. Since we grouped by <code>'Opp'</code>, team names are stored in the index, so <code>.index[0]</code> will give us the name of the desired team.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.7">Problem 1.7</h3>
<p>Recall that <code>plum</code> has 31 rows, one corresponding to each of the 31 games Kelsey Plum’s team played in the 2021 WNBA season.</p>
<p>Fill in the blank below so that <code>win_bool</code> evaluates to <code>True</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> modify_series(s):</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> __(a)__</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>n_wins <span class="op">=</span> plum.get(<span class="st">&#39;Won&#39;</span>).<span class="bu">sum</span>()</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>win_bool <span class="op">=</span> n_wins <span class="op">==</span> (<span class="dv">31</span> <span class="op">+</span> modify_series(plum.get(<span class="st">&#39;Won&#39;</span>)))</span></code></pre></div>
<p>What goes in blank (a)?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>-s.sum()</code></p></li>
<li><p><input type="radio" disabled="" /> <code>-(s == False).sum()</code></p></li>
<li><p><input type="radio" disabled="" /> <code>len(s) - s.sum()</code></p></li>
<li><p><input type="radio" disabled="" /> <code>not s.sum()</code></p></li>
<li><p><input type="radio" disabled="" /> <code>-s[s.get('Won') == False].sum()</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_7">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_7" aria-expanded="true" aria-controls="collapse1_7">
Click to view the solution.
</button>
</h2>
<div id="collapse1_7" class="accordion-collapse collapse collapse" aria-labelledby="heading1_7" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> <code>-(s == False).sum()</code></p>
<p><code>n_wins</code> is equal to the number of wins that Plum’s team had. Recall, her team played 31 games total. In order for <code>(31 + modify_series(plum.get('Won')))</code> to be equal to her team’s number of wins, <code>modify_series(plum.get('Won'))</code> must be equal to her team’s number of losses, multiplied by -1.</p>
<p>To see this algebraically, let <code>modified = modify_series(plum.get('Won'))</code>. Then:</p>
<p><span class="math display">31 + modified = \text{wins}</span> <span class="math display"> modified = \text{wins} - 31 = -(31 - \text{wins}) = -(\text{losses})</span></p>
<p>The function <code>modified_series(s)</code> takes in a Series containing the wins and losses for each of Plum’s team’s games and needs to return the number of losses multiplied by -1. <code>s.sum()</code> returns the number of wins, and <code>(s == False).sum()</code> returns the number of losses. Then, <code>-(s == False).sum()</code> returns the number of losses multiplied by -1, as desired.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-2">Problem 2</h2>
<p>Let’s suppose there are 4 different types of shots a basketball player can take – layups, midrange shots, threes, and free throws.</p>
<p>The DataFrame <code>breakdown</code> has 4 rows and 50 columns – one row for each of the 4 shot types mentioned above, and one column for each of 50 different players. Each column of <code>breakdown</code> describes the distribution of shot types for a single player.</p>
<p>The first few columns of <code>breakdown</code> are shown below.</p>
<center><img src='../assets/images/wi22-final/head-to-head.png' width=30%></center>
<p>For instance, 30% of Kelsey Plum’s shots are layups, 30% of her shots are midrange shots, 20% of her shots are threes, and 20% of her shots are free throws.</p>
<p><br></p>
<h3 id="problem-2.1">Problem 2.1</h3>
<p>Below, we’ve drawn an overlaid bar chart showing the shot distributions of Kelsey Plum and Chiney Ogwumike, a player on the Los Angeles Sparks.</p>
<center><img src='../assets/images/wi22-final/tvd.png' width=50%></center>
<p><br></p>
<p>What is the <strong>total variation distance</strong> (TVD) between Kelsey Plum’s shot distribution and Chiney Ogwumike’s shot distribution? Give your answer as a <strong>proportion</strong> between 0 and 1 (not a percentage) rounded to three decimal places.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_1" aria-expanded="true" aria-controls="collapse2_1">
Click to view the solution.
</button>
</h2>
<div id="collapse2_1" class="accordion-collapse collapse collapse" aria-labelledby="heading2_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> 0.2</p>
<p>Recall, the TVD is the sum of the absolute differences in proportions, divided by 2. The absolute differences in proportions for each category are as follows:</p>
<ul>
<li>Free Throws: <span class="math inline">|0.05 - 0.2| = 0.15</span></li>
<li>Threes: <span class="math inline">|0.35 - 0.2| = 0.15</span></li>
<li>Midrange: <span class="math inline">|0.35 - 0.3| = 0.05</span></li>
<li>Layups: <span class="math inline">|0.25 - 0.3| = 0.05</span></li>
</ul>
<p>Then, we have</p>
<p><span class="math display">\text{TVD} = \frac{1}{2} (0.15 + 0.15 + 0.05 + 0.05) = 0.2</span></p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-2.2">Problem 2.2</h3>
<p>Recall, <code>breakdown</code> has information for 50 different players. We want to find the player whose shot distribution is the <strong>most similar to Kelsey Plum</strong>, i.e. has the lowest TVD with Kelsey Plum’s shot distribution.</p>
<p>Fill in the blanks below so that <code>most_sim_player</code> evaluates to the name of the player with the most similar shot distribution to Kelsey Plum. Assume that the column named <code>'Kelsey Plum'</code> is the first column in <code>breakdown</code> (and again that <code>breakdown</code> has 50 columns total).</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>most_sim_player <span class="op">=</span> <span class="st">&#39;&#39;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>lowest_tvd_so_far <span class="op">=</span> __(a)__</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>other_players <span class="op">=</span> np.array(breakdown.columns).take(__(b)__)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> player <span class="kw">in</span> other_players:</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    player_tvd <span class="op">=</span> tvd(breakdown.get(<span class="st">&#39;Kelsey Plum&#39;</span>),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>                     breakdown.get(player))</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> player_tvd <span class="op">&lt;</span> lowest_tvd_so_far:</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        lowest_tvd_so_far <span class="op">=</span> player_tvd</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        __(c)__</span></code></pre></div>
<ol type="1">
<li>What goes in blank (a)?</li>
</ol>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> -1</p></li>
<li><p><input type="radio" disabled="" /> -0.5</p></li>
<li><p><input type="radio" disabled="" /> 0</p></li>
<li><p><input type="radio" disabled="" /> 0.5</p></li>
<li><p><input type="radio" disabled="" /> 1</p></li>
<li><p><input type="radio" disabled="" /> <code>np.array([])</code></p></li>
<li><p><input type="radio" disabled="" /> <code>''</code></p></li>
</ul>
<ol start="2" type="1">
<li><p>What goes in blank (b)?</p></li>
<li><p>What goes in blank (c)?</p></li>
</ol>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_2" aria-expanded="true" aria-controls="collapse2_2">
Click to view the solution.
</button>
</h2>
<div id="collapse2_2" class="accordion-collapse collapse collapse" aria-labelledby="heading2_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answers:</strong> 1, <code>np.arange(1, 50)</code>, <code>most_sim_player = player</code></p>
<p>Let’s try and understand the code provided to us. It appears that we’re looping over the names of all other players, each time computing the TVD between Kelsey Plum’s shot distribution and that player’s shot distribution. If the TVD calculated in an iteration of the <code>for</code>-loop (<code>player_tvd</code>) is less than the previous lowest TVD (<code>lowest_tvd_so_far</code>), the current player (<code>player</code>) is now the most “similar” to Kelsey Plum, and so we store their TVD and name (in <code>most_sim_player</code>).</p>
<p>Before the <code>for</code>-loop, we haven’t looked at any other players, so we don’t have values to store in <code>most_sim_player</code> and <code>lowest_tvd_so_far</code>. On the first iteration of the <code>for</code>-loop, both of these values need to be updated to reflect Kelsey Plum’s similarity with the first player in <code>other_players</code> – this is because, if we’ve only looked at one player, that player is the most similar to Kelsey Plum. <code>most_sim_player</code> is already initialized as an empty string, and we will specify how to “update” <code>most_sim_player</code> in blank (c). What we need to do here is pick a value of <code>lowest_tvd_so_far</code> that we can <strong>guarantee</strong> will be updated on the first iteration of the <code>for</code>-loop. Recall, TVDs range from 0 to 1, with 0 meaning “most similar” and 1 meaning “most different”. This means that no matter what, the TVD between Kelsey Plum’s distribution and the first player’s distribution will be less than 1<em>, and so if we initialize <code>lowest_tvd_so_far</code> to 1 before the <code>for</code>-loop, we know it will be updated on the first iteration. - </em>It’s possible that the TVD between Kelsey Plum’s shot distribution and the first other player’s shot distribution is equal to 1, rather than being less than 1. If that were to happen, our code would still generate the correct answer, but <code>lowest_tvd_so_far</code> and <code>most_sim_player</code> wouldn’t be updated on the first iteration. Rather, they’d be updated on the first iteration where <code>player_tvd</code> is strictly less than 1. (We’d expect that the TVDs between all pairs of players are neither exactly 0 nor exactly 1, so this is not a practical issue.) To avoid this issue entirely, we could change <code>if player_tvd &lt; lowest_tvd_so_far</code> to <code>if player_tvd &lt;= lowest_tvd_so_far</code>, which would make sure that even if the first TVD is 1, both <code>lowest_tvd_so_far</code> and <code>most_sim_player</code> are updated on the first iteration. - Note that we could have initialized <code>lowest_tvd_so_far</code> to a value larger than 1 as well. Suppose we initialized it to 55 (an arbitrary positive integer). On the first iteration of the <code>for</code>-loop, <code>player_tvd</code> will be less than 55, and so <code>lowest_tvd_so_far</code> will be updated.</p>
<p>Then, we need <code>other_players</code> to be an array containing the names of all players other than Kelsey Plum, whose name is stored at position 0 in <code>breakdown.columns</code>. We are told that there are 50 players total, i.e. that there are 50 columns in <code>breakdown</code>. We want to <code>take</code> the elements in <code>breakdown.columns</code> at positions 1, 2, 3, …, 49 (the last element), and the call to <code>np.arange</code> that generates this sequence of positions is <code>np.arange(1, 50)</code>. (Remember, <code>np.arange(a, b)</code> does not include the second integer!)</p>
<p>In blank (c), as mentioned in the explanation for blank (a), we need to update the value of <code>most_sim_player</code>. (Note that we only arrive at this line if <code>player_tvd</code> is the lowest pairwise TVD we’ve seen so far.) All this requires is <code>most_sim_player = player</code>, since <code>player</code> contains the name of the player who we are looking at in the current iteration of the <code>for</code>-loop.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-2.3">Problem 2.3</h3>
<p>Let’s again consider the shot distributions of Kelsey Plum and Cheney Ogwumike.</p>
<center><img src='../assets/images/wi22-final/tvd.png' width=50%></center>
<p>We define the <strong>maximum squared distance</strong> (MSD) between two categorical distributions as the <strong>largest squared difference between the proportions of any category</strong>.</p>
<p>What is the MSD between Kelsey Plum’s shot distribution and Chiney Ogwumike’s shot distribution? Give your answer as a <strong>proportion</strong> between 0 and 1 (not a percentage) rounded to three decimal places.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_3" aria-expanded="true" aria-controls="collapse2_3">
Click to view the solution.
</button>
</h2>
<div id="collapse2_3" class="accordion-collapse collapse collapse" aria-labelledby="heading2_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> 0.023</p>
<p>Recall, in the solution to the first subpart of this problem, we calculated the absolute differences between the proportions of each category.</p>
<ul>
<li>Free Throws: <span class="math inline">|0.05 - 0.2| = 0.15</span></li>
<li>Threes: <span class="math inline">|0.35 - 0.2| = 0.15</span></li>
<li>Midrange: <span class="math inline">|0.35 - 0.3| = 0.05</span></li>
<li>Layups: <span class="math inline">|0.25 - 0.3| = 0.05</span></li>
</ul>
<p>The squared difference between the proportions of each category are computed by squaring the results in the list above (e.g. for Free Throws we’d have <span class="math inline">(0.05 - 0.2)^2 = 0.15^2</span>). To find the maximum squared difference, then, all we need to do is find the largest of <span class="math inline">0.15^2</span>, <span class="math inline">0.15^2</span>, <span class="math inline">0.05^2</span>, and <span class="math inline">0.05^2</span>. Since <span class="math inline">0.15 &gt; 0.05</span>, we have that the maximum squared distance is <span class="math inline">0.15^2 = 0.0225</span>, which rounds to <span class="math inline">0.023</span>.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-2.4">Problem 2.4</h3>
<p>For your convenience, we show the first few columns of <code>breakdown</code> again below.</p>
<center><img src='../assets/images/wi22-final/head-to-head.png' width=30%></center>
<p>In basketball:</p>
<ul>
<li>layups are worth 2 points,</li>
<li>midrange shots are worth 2 points,</li>
<li>threes are worth 3 points, and</li>
<li>free throws are worth 1 point</li>
</ul>
<p>Suppose that Kelsey Plum is guaranteed to shoot exactly 10 shots a game. The type of each shot is drawn from the <code>'Kelsey Plum'</code> column of <code>breakdown</code> (meaning that, for example, there is a 30% chance each shot is a layup).</p>
<p>Fill in the blanks below to complete the definition of the function <code>simulate_points</code>, which simulates the number of points Kelsey Plum scores in a single game. (<code>simulate_points</code> should return a single number.)</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> simulate_points():</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    shots <span class="op">=</span> np.random.multinomial(__(a)__, breakdown.get(<span class="st">&#39;Kelsey Plum&#39;</span>))</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    possible_points <span class="op">=</span> np.array([<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>])</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> __(b)__</span></code></pre></div>
<ol type="1">
<li>What goes in blank (a)?</li>
<li>What goes in blank (b)?</li>
</ol>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_4" aria-expanded="true" aria-controls="collapse2_4">
Click to view the solution.
</button>
</h2>
<div id="collapse2_4" class="accordion-collapse collapse collapse" aria-labelledby="heading2_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answers:</strong> <code>10</code>, <code>(shots * possible_points).sum()</code></p>
<p>To simulate the number of points Kelsey Plum scores in a single game, we need to: 1. Simulate the number of shots she takes of each type (layups, midranges, threes, free throws). 2. Using the simulated distribution in step 1, find the total number of points she scores – specifically, add 2 for every layup, 2 for every midrange, 3 for every three, and 1 for every free throw.</p>
<p>To simulate the number of shots she takes of each type, we use <code>np.random.multinomial</code>. This is because each shot, independently of all other shots, has a 30% chance of being a layup, a 30% chance of being a midrange, and so on. What goes in blank (a) is the number of shots she is taking total; here, that is 10. <code>shots</code> will be an array of length 4 containing the number of shots of each type - for instance, <code>shots</code> may be <code>np.array([3, 4, 2, 1])</code>, which would mean she took 3 layups, 4 midranges, 2 threes, and 1 free throw.</p>
<p>Now that we have <code>shots</code>, we need to factor in how many points each type of shot is worth. This can be accomplished by multiplying <code>shots</code> with <code>possible_points</code>, which was already defined for us. Using the example where <code>shots</code> is <code>np.array([3, 4, 2, 1])</code>, <code>shots * possible_points</code> evaluates to <code>np.array([6, 8, 6, 1])</code>, which would mean she scored 6 points from layups, 8 points from midranges, and so on. Then, to find the total number of points she scored, we need to compute the sum of this array, either using the <code>np.sum</code> function or <code>.sum()</code> method. As such, the two correct answers for blank (b) are <code>(shots * possible_points).sum()</code> and <code>np.sum(shots * possible_points)</code>.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-2.5">Problem 2.5</h3>
<p>True or False: If we call <code>simulate_points()</code> 10,000 times and plot a histogram of the results, the distribution will look roughly normal.</p>
<ol type="1">
<li>True</li>
<li>False</li>
</ol>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_5">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_5" aria-expanded="true" aria-controls="collapse2_5">
Click to view the solution.
</button>
</h2>
<div id="collapse2_5" class="accordion-collapse collapse collapse" aria-labelledby="heading2_5" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> True</p>
<p>The answer is True because of the Central Limit Theorem. Recall, the CLT states that no matter what the population distribution looks like, if you take many repeated samples with replacement, the distribution of the sample means and sample sums will be roughly normal. <code>simulate_points()</code> returns the sum of a sample of size 10 drawn with replacement from a population, and so if we generate many sample sums, the distribution of those sample sums will be roughly normal.</p>
<p>The distribution we are drawing from is the one below.</p>
<table>
<thead>
<tr class="header">
<th>Type</th>
<th>Points</th>
<th>Probability</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Layups</td>
<td>2</td>
<td>0.3</td>
</tr>
<tr class="even">
<td>Midrange</td>
<td>2</td>
<td>0.3</td>
</tr>
<tr class="odd">
<td>Threes</td>
<td>3</td>
<td>0.2</td>
</tr>
<tr class="even">
<td>Free Throws</td>
<td>1</td>
<td>0.2</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<p><span class="math display"> </span></p>
</body>
</html>
