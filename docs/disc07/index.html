<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Discussion 7: Hypothesis Testing, Total Variation Distance, and Permutation Testing</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../assets/theme.css" />
  <script defer=""
  src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Discussion 7: Hypothesis Testing, Total Variation
Distance, and Permutation Testing</h1>
</header>
<p><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<!-- add after bootstrap.min.css -->
<link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css"/>
<!-- add after bootstrap.min.js or bootstrap.bundle.min.js -->
<script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script></p>
<!-- for difficulty gauges-->
<script src="https://cdn.plot.ly/plotly-2.16.1.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B947E6J6H4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B947E6J6H4');
</script>
<p><a href="../index.html">← return to practice.dsc10.com</a></p>
<hr />
<p>The problems in this worksheet are taken from past exams. Work on
them <strong>on paper</strong>, since the exams you take in this course
will also be on paper. <br><br>We encourage you to complete this
worksheet in a live discussion section. Solutions will be made available
after all discussion sections have concluded. You don’t need to submit
your answers anywhere.<br><br><b>Note: We do not plan to cover all
problems here in the live discussion section</b>; the problems we don’t
cover can be used for extra practice.</p>
<hr />
<h2 id="problem-1">Problem 1</h2>
<p>Arya was curious how many UCSD students used Hulu over Thanksgiving
break. He surveys 250 students and finds that 130 of them did use Hulu
over break and 120 did not.</p>
<p>Using this data, Arya decides to test following hypotheses:</p>
<ul>
<li><p><strong>Null Hypothesis</strong>: Over Thanksgiving break, an
equal number of UCSD students did use Hulu and did not use
Hulu.</p></li>
<li><p><strong>Alternative Hypothesis</strong>: Over Thanksgiving break,
<strong>more</strong> UCSD students did use Hulu than did not use
Hulu.</p></li>
</ul>
<p><br></p>
<h3 id="problem-1.1">Problem 1.1</h3>
<p>Which of the following could be used as a test statistic for the
hypothesis test?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> The proportion of students who did use Hulu minus the proportion of
students who did not use Hulu.</p></li>
<li><p><input type="radio" disabled="" /> The absolute value of the proportion of students who did use Hulu
minus the proportion of students who did not use Hulu.</p></li>
<li><p><input type="radio" disabled="" /> The proportion of students who did use Hulu plus the proportion of
students who did not use Hulu.</p></li>
<li><p><input type="radio" disabled="" /> The absolute value of the proportion of students who did use Hulu
plus the proportion of students who did not use Hulu.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_1" aria-expanded="true" aria-controls="collapse1_1">
Click to view the solution.
</button>
</h2>
<div id="collapse1_1" class="accordion-collapse collapse collapse"
aria-labelledby="heading1_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: The proportion of students who did use Hulu
minus the proportion of students who did not use Hulu.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 81%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.2">Problem 1.2</h3>
<p>For the test statistic that you chose in part (a), what is the
observed value of the statistic? Give your answer either as an exact
decimal or a simplified fraction.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_2" aria-expanded="true" aria-controls="collapse1_2">
Click to view the solution.
</button>
</h2>
<div id="collapse1_2" class="accordion-collapse collapse collapse"
aria-labelledby="heading1_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: 0.04</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 90%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-1.3">Problem 1.3</h3>
<p>If the p-value of the hypothesis test is 0.053, what can we conclude,
at the standard 0.05 significance level?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> We reject the null hypothesis.</p></li>
<li><p><input type="radio" disabled="" /> We fail to reject the null hypothesis.</p></li>
<li><p><input type="radio" disabled="" /> We accept the null hypothesis.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1_3" aria-expanded="true" aria-controls="collapse1_3">
Click to view the solution.
</button>
</h2>
<div id="collapse1_3" class="accordion-collapse collapse collapse"
aria-labelledby="heading1_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: We fail to reject the null hypothesis.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 87%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-2">Problem 2</h2>
<p>At the San Diego Model Railroad Museum, there are different admission
prices for children, adults, and seniors. Over a period of time, as
tickets are sold, employees keep track of how many of each type of
ticket are sold. These ticket counts (in the order child, adult, senior)
are stored as follows.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>admissions_data <span class="op">=</span> np.array([<span class="dv">550</span>, <span class="dv">1550</span>, <span class="dv">400</span>])</span></code></pre></div>
<p><br></p>
<h3 id="problem-2.1">Problem 2.1</h3>
<p>Complete the code below so that it creates an array
<code>admissions_proportions</code> with the proportions of tickets sold
to each group (in the order child, adult, senior).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> as_proportion(data):</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> __(a)__</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>admissions_proportions <span class="op">=</span> as_proportion(admissions_data)</span></code></pre></div>
<p>What goes in blank (a)?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_1" aria-expanded="true" aria-controls="collapse2_1">
Click to view the solution.
</button>
</h2>
<div id="collapse2_1" class="accordion-collapse collapse collapse"
aria-labelledby="heading2_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> <code>data/data.sum()</code></p>
<p>To calculate proportion for each group, we divide each value in the
array (tickets sold to each group) by the sum of all values (total
tickets sold). Remember values in an array can be processed as a
whole.</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 95%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-2.2">Problem 2.2</h3>
<p>The museum employees have a model in mind for the proportions in
which they sell tickets to children, adults, and seniors. This model is
stored as follows.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> np.array([<span class="fl">0.25</span>, <span class="fl">0.6</span>, <span class="fl">0.15</span>])</span></code></pre></div>
<p>We want to conduct a hypothesis test to determine whether the
admissions data we have is consistent with this model. Which of the
following is the null hypothesis for this test?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Child, adult, and senior tickets might plausibly be purchased in
proportions 0.25, 0.6, and 0.15.</p></li>
<li><p><input type="radio" disabled="" /> Child, adult, and senior tickets are purchased in proportions 0.25,
0.6, and 0.15.</p></li>
<li><p><input type="radio" disabled="" /> Child, adult, and senior tickets might plausibly be purchased in
proportions other than 0.25, 0.6, and 0.15.</p></li>
<li><p><input type="radio" disabled="" /> Child, adult, and senior tickets, are purchased in proportions other
than 0.25, 0.6, and 0.15.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_2" aria-expanded="true" aria-controls="collapse2_2">
Click to view the solution.
</button>
</h2>
<div id="collapse2_2" class="accordion-collapse collapse collapse"
aria-labelledby="heading2_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Child, adult, and senior tickets are
purchased in proportions 0.25, 0.6, and 0.15. (Option 2)</p>
<p>Recall, null hypothesis is the hypothesis that there is no
significant difference between specified populations, any observed
difference being due to sampling or experimental error. So, we assume
the distribution is the same as the model.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 88%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-2.3">Problem 2.3</h3>
<p>Which of the following test statistics could we use to test our
hypotheses? Select all that could work.</p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> sum of differences in proportions</p></li>
<li><p><input type="checkbox" disabled="" /> sum of squared differences in proportions</p></li>
<li><p><input type="checkbox" disabled="" /> mean of differences in proportions</p></li>
<li><p><input type="checkbox" disabled="" /> mean of squared differences in proportions</p></li>
<li><p><input type="checkbox" disabled="" /> none of the above</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_3" aria-expanded="true" aria-controls="collapse2_3">
Click to view the solution.
</button>
</h2>
<div id="collapse2_3" class="accordion-collapse collapse collapse"
aria-labelledby="heading2_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> sum of squared differences in proportions,
mean of squared differences in proportions (Option 2, 4)</p>
<p>We need to use squared difference to avoid the case that large
positive and negative difference cancel out in the process of
calculating sum or mean, resulting in small sum of difference or mean of
difference that does not reflect the actual deviation. So, we eliminate
Option 1 and 3.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 77%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-2.4">Problem 2.4</h3>
<p>Below, we’ll perform the hypothesis test with a different test
statistic, the mean of the absolute differences in proportions.</p>
<p>Recall that the ticket counts we observed for children, adults, and
seniors are stored in the array
<code>admissions_data  = np.array([550, 1550, 400])</code>, and that our
model is <code>model = np.array([0.25, 0.6, 0.15])</code>.</p>
<p>For our hypothesis test to determine whether the admissions data is
consistent with our model, what is the observed value of the test
statistic? Input your answer as a decimal between 0 and 1. Round to
three decimal places. (Suppose that the value you calculated is assigned
to the variable <code>observed_stat</code>, which you will use in later
questions.)</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_4" aria-expanded="true" aria-controls="collapse2_4">
Click to view the solution.
</button>
</h2>
<div id="collapse2_4" class="accordion-collapse collapse collapse"
aria-labelledby="heading2_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> 0.02</p>
<p>We first calculate the proportion for each value in
<code>admissions_data</code> <span class="math display">\frac{550}{550+1550+400} = 0.22</span> <span class="math display">\frac{1550}{550+1550+400} = 0.62</span> <span class="math display">\frac{400}{550+1550+400} = 0.16</span> So, we have
the distribution of the <code>admissions_data</code></p>
<p>Then, we calculate the observed value of the test statistic (the mean
of the absolute differences in proportions) <span class="math display">\frac{|0.22-0.25|+|0.62-0.6|+|0.16-0.15|}{number\
of\ goups}</span> <span class="math display">=\frac{0.03+0.02+0.01}{3} =
0.02</span></p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 82%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-2.5">Problem 2.5</h3>
<p>Now, we want to simulate the test statistic 10,000 times under the
assumptions of the null hypothesis. Fill in the blanks below to complete
this simulation and calculate the p-value for our hypothesis test.
Assume that the variables <code>admissions_data</code>,
<code>admissions_proportions</code>, <code>model</code>, and
<code>observed_stat</code> are already defined as specified earlier in
the question.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>simulated_stats <span class="op">=</span> np.array([]) </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(<span class="dv">10000</span>):</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    simulated_proportions <span class="op">=</span> as_proportions(np.random.multinomial(__(a)__, __(b)__))</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    simulated_stat <span class="op">=</span> __(c)__</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    simulated_stats <span class="op">=</span> np.append(simulated_stats, simulated_stat)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>p_value <span class="op">=</span> __(d)__</span></code></pre></div>
<p>What goes in blank (a)? What goes in blank (b)? What goes in blank
(c)? What goes in blank (d)?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_5">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_5" aria-expanded="true" aria-controls="collapse2_5">
Click to view the solution.
</button>
</h2>
<div id="collapse2_5" class="accordion-collapse collapse collapse"
aria-labelledby="heading2_5" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> (a) <code>admissions_data.sum()</code> (b)
<code>model</code> (c)
<code>np.abs(simulated_proportions - model).mean()</code> (d)
<code>np.count_nonzero(simulated_stats &gt;= observed_stat) / 10000</code></p>
<p>Recall, in <code>np.random.multinomial(n, [p_1, ..., p_k])</code>,
<code>n</code> is the number of experiments, and
<code>[p_1, ..., p_k]</code> is a sequence of probability. The method
returns an array of length k in which each element contains the number
of occurrences of an event, where the probability of the ith event is
<code>p_i</code>.</p>
<p>We want our <code>simulated_proportion</code> to have the same data
size as <code>admissions_data</code>, so we use
<code>admissions_data.sum()</code> in (a).</p>
<p>Since our null hypothesis is based on <code>model</code>, we simulate
based on distribution in <code>model</code>, so we have
<code>model</code> in (b).</p>
<p>In (c), we compute the mean of the absolute differences in
proportions. <code>np.abs(simulated_proportions - model)</code> gives us
a series of absolute differences, and <code>.mean()</code> computes the
mean of the absolute differences.</p>
<p>In (d), we calculate the <code>p_value</code>. Recall, the
<code>p_value</code> is the chance, under the null hypothesis, that the
test statistic is equal to the value that was observed in the data or is
even further in the direction of the alternative.
<code>np.count_nonzero(simulated_stats &gt;= observed_stat)</code> gives
us the number of <code>simulated_stats</code> greater than or equal to
the <code>observed_stat</code> in the 10000 times simulations, so we
need to divide it by <code>10000</code> to compute the proportion of
<code>simulated_stats</code> greater than or equal to the
<code>observed_stat</code>, and this gives us the
<code>p_value</code>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 79%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-2.6">Problem 2.6</h3>
<p>True or False: the p-value represents the probability that the null
hypothesis is true.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> True</p></li>
<li><p><input type="radio" disabled="" /> False</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_6">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_6" aria-expanded="true" aria-controls="collapse2_6">
Click to view the solution.
</button>
</h2>
<div id="collapse2_6" class="accordion-collapse collapse collapse"
aria-labelledby="heading2_6" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> False</p>
<p>Recall, the p-value is the chance, under the null hypothesis, that
the test statistic is equal to the value that was observed in the data
or is even further in the direction of the alternative. It only gives us
the strength of evidence in favor of the null hypothesis, which is
different from “the probability that the null hypothesis is true”.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 64%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-2.7">Problem 2.7</h3>
<p>The new statistic that we used for this hypothesis test, the mean of
the absolute differences in proportions, is in fact closely related to
the total variation distance. Given two arrays of length three,
<code>array_1</code> and <code>array_2</code>, suppose we compute the
mean of the absolute differences in proportions between
<code>array_1</code> and <code>array_2</code> and store the result as
<code>madp</code>. What value would we have to multiply
<code>madp</code> by to obtain the total variation distance
<code>array_1</code> and <code>array_2</code>? Input your answer below,
rounding to three decimal places.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2_7">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2_7" aria-expanded="true" aria-controls="collapse2_7">
Click to view the solution.
</button>
</h2>
<div id="collapse2_7" class="accordion-collapse collapse collapse"
aria-labelledby="heading2_7" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> 1.5</p>
<p>Recall, the total variation distance (TVD) is the sum of the absolute
differences in proportions, divided by 2. When we compute the mean of
the absolute differences in proportions, we are computing the sum of the
absolute differences in proportions, divided by the number of groups
(which is 3). Thus, to get TVD, we first multiply our current statistics
(the mean of the absolute differences in proportions) by 3, we get the
sum of the absolute differences in proportions. Then according to the
definition of TVD, we divide this value by 2. Thus, we have <span class="math inline">\text{current statistics}\cdot 3 / 2 = \text{current
statistics}\cdot 1.5</span>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 65%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-3">Problem 3</h2>
<p>For this question, let’s think of the data in <code>app_data</code>
as a random sample of all IKEA purchases and use it to test the
following hypotheses.</p>
<p><strong>Null Hypothesis</strong>: IKEA sells an equal amount of beds
(category <code>'bed'</code>) and outdoor furniture (category
<code>'outdoor'</code>).</p>
<p><strong>Alternative Hypothesis</strong>: IKEA sells more beds than
outdoor furniture.</p>
<p>The DataFrame <code>app_data</code> contains 5000 rows, which form
our sample. Of these 5000 products,</p>
<ul>
<li>1000 are beds,</li>
<li>1500 are outdoor furniture, and</li>
<li>2500 are in another category.</li>
</ul>
<p><br></p>
<h3 id="problem-3.1">Problem 3.1</h3>
<p>Which of the following <strong>could</strong> be used as the test
statistic for this hypothesis test? Select all that apply.</p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> Among 2500 beds and outdoor furniture items, the absolute difference
between the proportion of beds and the proportion of outdoor
furniture.</p></li>
<li><p><input type="checkbox" disabled="" /> Among 2500 beds and outdoor furniture items, the proportion of
beds.</p></li>
<li><p><input type="checkbox" disabled="" /> Among 2500 beds and outdoor furniture items, the number of beds.</p></li>
<li><p><input type="checkbox" disabled="" /> Among 2500 beds and outdoor furniture items, the number of beds plus
the number of outdoor furniture items.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3_1" aria-expanded="true" aria-controls="collapse3_1">
Click to view the solution.
</button>
</h2>
<div id="collapse3_1" class="accordion-collapse collapse collapse"
aria-labelledby="heading3_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Among 2500 beds and outdoor furniture
items, the proportion of beds. <br/> Among 2500 beds and outdoor
furniture items, the number of beds.</p>
<p>Our test statistic needs to be able to distinguish between the two
hypotheses. The first option does not do this, because it includes an
absolute value. If the absolute difference between the proportion of
beds and the proportion of outdoor furniture were large, it could be
because IKEA sells more beds than outdoor furniture, but it could also
be because IKEA sells more outdoor furniture than beds.</p>
<p>The second option is a valid test statistic, because if the
proportion of beds is large, that suggests that the alternative
hypothesis may be true.</p>
<p>Similarly, the third option works because if the number of beds (out
of 2500) is large, that suggests that the alternative hypothesis may be
true.</p>
<p>The fourth option is invalid because out of 2500 beds and outdoor
furniture items, the number of beds plus the number of outdoor furniture
items is always 2500. So the value of this statistic is constant
regardless of whether the alternative hypothesis is true, which means it
does not help you distinguish between the two hypotheses.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 78%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-3.2">Problem 3.2</h3>
<p>Let’s do a hypothesis test with the following test statistic: among
2500 beds and outdoor furniture items, the proportion of outdoor
furniture minus the proportion of beds.</p>
<p>Complete the code below to calculate the observed value of the test
statistic and save the result as <code>obs_diff</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>    outdoor <span class="op">=</span> (app_data.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;outdoor&#39;</span>) </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    bed <span class="op">=</span> (app_data.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;bed&#39;</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    obs_diff <span class="op">=</span> ( ___(a)___ <span class="op">-</span> ___(b)___ ) <span class="op">/</span> ___(c)___</span></code></pre></div>
<p>The table below contains several Python expressions. Choose the
correct expression to fill in each of the three blanks. Three
expressions will be used, and two will be unused.</p>
<center><img src='../assets/images/sp22-final/q8-table.jpg' width=50%></center>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3_2" aria-expanded="true" aria-controls="collapse3_2">
Click to view the solution.
</button>
</h2>
<div id="collapse3_2" class="accordion-collapse collapse collapse"
aria-labelledby="heading3_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Reading the table from top to bottom, the
five expressions should be used in the following blanks: None, (b), (a),
(c), None.</p>
<p>The correct way to define <code>obs_diff</code> is</p>
<div id="cb1" class="sourceCode">
<pre class="sourceCode py"><code class="sourceCode python"><span id="cb1-1"><a aria-hidden="true" href="#cb1-1" tabindex="-1"></a>    outdoor <span class="op">=</span> (app_data.get(<span class="st">'category'</span>)<span class="op">==</span><span class="st">'outdoor'</span>) </span>
<span id="cb1-2"><a aria-hidden="true" href="#cb1-2" tabindex="-1"></a>    bed <span class="op">=</span> (app_data.get(<span class="st">'category'</span>)<span class="op">==</span><span class="st">'bed'</span>)</span>
<span id="cb1-3"><a aria-hidden="true" href="#cb1-3" tabindex="-1"></a>    obs_diff <span class="op">=</span> (app_data[outdoor].shape[<span class="dv">0</span>] <span class="op">-</span> app_data[bed].shape[<span class="dv">0</span>]) <span class="op">/</span> app_data[outdoor <span class="op">|</span> bed].shape[<span class="dv">0</span>]</span></code></pre>
</div>
<p>The first provided line of code defines a boolean Series called
<code>outdoor</code> with a value of <code>True</code> corresponding to
each outdoor furniture item in <code>app_data</code>. Using this as the
condition in a query results in a DataFrame of outdoor furniture items,
and using <code>.shape[0]</code> on this DataFrame gives the number of
outdoor furniture items. So <code>app_data[outdoor].shape[0]</code>
represents the number of outdoor furniture items in
<code>app_data</code>. Similarly, <code>app_data[bed].shape[0]</code>
represents the number of beds in <code>app_data</code>. Likewise,
<code>app_data[outdoor | bed].shape[0]</code> represents the total
number of outdoor furniture items and beds in <code>app_data</code>.
Notice that we need to use an <em>or</em> condition (<code>|</code>) to
get a DataFrame that contains both outdoor furniture and beds.</p>
<p>We are told that the test statistic should be the proportion of
outdoor furniture minus the proportion of beds. Translating this
directly into code, this means the test statistic should be calculated
as</p>
<div id="cb2" class="sourceCode">
<pre class="sourceCode py"><code class="sourceCode python"><span id="cb2-1"><a aria-hidden="true" href="#cb2-1" tabindex="-1"></a>    obs_diff <span class="op">=</span> app_data[outdoor].shape[<span class="dv">0</span>]<span class="op">/</span>app_data[outdoor <span class="op">|</span> bed].shape[<span class="dv">0</span>] <span class="op">-</span> app_data[bed].shape[<span class="dv">0</span>]) <span class="op">/</span> app_data[outdoor <span class="op">|</span> bed].shape[<span class="dv">0</span>]</span></code></pre>
</div>
<p>Since this is a difference of two fractions with the same
denominator, we can equivalently subtract the numerators first, then
divide by the common denominator, using the mathematical fact <span class="math display">\frac{a}{c} - \frac{b}{c} =
\frac{a-b}{c}.</span></p>
<p>This yields the answer</p>
<div id="cb3" class="sourceCode">
<pre class="sourceCode py"><code class="sourceCode python"><span id="cb3-1"><a aria-hidden="true" href="#cb3-1" tabindex="-1"></a>    obs_diff <span class="op">=</span> (app_data[outdoor].shape[<span class="dv">0</span>] <span class="op">-</span> app_data[bed].shape[<span class="dv">0</span>]) <span class="op">/</span> app_data[outdoor <span class="op">|</span> bed].shape[<span class="dv">0</span>]</span></code></pre>
</div>
<p>Notice that this is the <em>observed</em> value of the test statistic
because it’s based on the real-life data in the <code>app_data</code>
DataFrame, not simulated data.</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 90%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-3.3">Problem 3.3</h3>
<p>Which of the following is a valid way to generate one value of the
test statistic according to the null model? Select all that apply.</p>
<p>Way 1:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>multi <span class="op">=</span> np.random.multinomial(<span class="dv">2500</span>, [<span class="fl">0.5</span>,<span class="fl">0.5</span>]) </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>(multi[<span class="dv">0</span>] <span class="op">-</span> multi[<span class="dv">1</span>])<span class="op">/</span><span class="dv">2500</span></span></code></pre></div>
<p>Way 2:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>outdoor <span class="op">=</span> np.random.multinomial(<span class="dv">2500</span>, [<span class="fl">0.5</span>,<span class="fl">0.5</span>])[<span class="dv">0</span>]<span class="op">/</span><span class="dv">2500</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>bed <span class="op">=</span> np.random.multinomial(<span class="dv">2500</span>, [<span class="fl">0.5</span>,<span class="fl">0.5</span>])[<span class="dv">1</span>]<span class="op">/</span><span class="dv">2500</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>outdoor <span class="op">-</span> bed </span></code></pre></div>
<p>Way 3:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>choice <span class="op">=</span> np.random.choice([<span class="dv">0</span>, <span class="dv">1</span>], <span class="dv">2500</span>, replace<span class="op">=</span><span class="va">True</span>) </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>choice_sum <span class="op">=</span> choice.<span class="bu">sum</span>( ) </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>(choice_sum <span class="op">-</span> (<span class="dv">2500</span> <span class="op">-</span> choice_sum))<span class="op">/</span><span class="dv">2500</span></span></code></pre></div>
<p>Way 4:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>choice <span class="op">=</span> np.random.choice([<span class="st">&#39;bed&#39;</span>, <span class="st">&#39;outdoor&#39;</span>], <span class="dv">2500</span>, replace<span class="op">=</span><span class="va">True</span>) </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>bed <span class="op">=</span> np.count_nonzero(choice<span class="op">==</span><span class="st">&#39;bed&#39;</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>outdoor <span class="op">=</span> np.count_nonzero(choice<span class="op">==</span><span class="st">&#39;outdoor&#39;</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>outdoor<span class="op">/</span><span class="dv">2500</span> <span class="op">-</span> bed<span class="op">/</span><span class="dv">2500</span></span></code></pre></div>
<p>Way 5:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>outdoor <span class="op">=</span> (app_data.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;outdoor&#39;</span>) </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>bed <span class="op">=</span> (app_data.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;bed&#39;</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>samp <span class="op">=</span> app_data[outdoor<span class="op">|</span>bed].sample(<span class="dv">2500</span>, replace<span class="op">=</span><span class="va">True</span>) </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>samp[samp.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;outdoor&#39;</span>].shape[<span class="dv">0</span>]<span class="op">/</span><span class="dv">2500</span> <span class="op">-</span>  samp[samp.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;bed&#39;</span>].shape[<span class="dv">0</span>]<span class="op">/</span><span class="dv">2500</span>)</span></code></pre></div>
<p>Way 6:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>outdoor <span class="op">=</span> (app_data.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;outdoor&#39;</span>) </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>bed <span class="op">=</span> (app_data.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;bed&#39;</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>samp <span class="op">=</span> (app_data[outdoor<span class="op">|</span>bed].groupby(<span class="st">&#39;category&#39;</span>).count( ).reset_index( ).sample(<span class="dv">2500</span>, replace<span class="op">=</span><span class="va">True</span>))    </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>samp[samp.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;outdoor&#39;</span>].shape[<span class="dv">0</span>]<span class="op">/</span><span class="dv">2500</span> <span class="op">-</span> samp[samp.get(<span class="st">&#39;category&#39;</span>)<span class="op">==</span><span class="st">&#39;bed&#39;</span>].shape[<span class="dv">0</span>]<span class="op">/</span><span class="dv">2500</span></span></code></pre></div>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> Way 1</p></li>
<li><p><input type="checkbox" disabled="" /> Way 2</p></li>
<li><p><input type="checkbox" disabled="" /> Way 3</p></li>
<li><p><input type="checkbox" disabled="" /> Way 4</p></li>
<li><p><input type="checkbox" disabled="" /> Way 5</p></li>
<li><p><input type="checkbox" disabled="" /> Way 6</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3_3" aria-expanded="true" aria-controls="collapse3_3">
Click to view the solution.
</button>
</h2>
<div id="collapse3_3" class="accordion-collapse collapse collapse"
aria-labelledby="heading3_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Way 1, Way 3, Way 4, Way 6</p>
<p>Let’s consider each way in order.</p>
<p>Way 1 is a correct solution. This code begins by defining a variable
<code>multi</code> which will evaluate to an array with two elements
representing the number of items in each of the two categories, after
2500 items are drawn randomly from the two categories, with each
category being equally likely. In this case, our categories are beds and
outdoor furniture, and the null hypothesis says that each category is
equally likely, so this describes our scenario accurately. We can
interpret <code>multi[0]</code> as the number of outdoor furniture items
and <code>multi[1]</code> as the number of beds when we draw 2500 of
these items with equal probability. Using the same mathematical fact
from the solution to Problem 8.2, we can calculate the difference in
proportions as the difference in number divided by the total, so it is
correct to calculate the test statistic as
<code>(multi[0] - multi[1])/2500</code>.</p>
<p>Way 2 is an incorrect solution. Way 2 is based on a similar idea as
Way 1, except it calls <code>np.random.multinomial</code> twice, which
corresponds to two separate random processes of selecting 2500 items,
each of which is equally likely to be a bed or an outdoor furniture
item. However, is not guaranteed that the number of outdoor furniture
items in the first random selection plus the number of beds in the
second random selection totals 2500. Way 2 calculates the proportion of
outdoor furniture items in one random selection minus the proportion of
beds in another. What we want to do instead is calculate the difference
between the proportion of outdoor furniture and beds in a single random
draw.</p>
<p>Way 3 is a correct solution. Way 3 does the random selection of items
in a different way, using <code>np.random.choice</code>. Way 3 creates a
variable called <code>choice</code> which is an array of 2500 values.
Each value is chosen from the list <code>[0,1]</code> with each of the
two list elements being equally likely to be chosen. Of course, since we
are choosing 2500 items from a list of size 2, we must allow
replacements. We can interpret the elements of <code>choice</code> by
thinking of each 1 as an outdoor furniture item and each 0 as a bed. By
doing so, this random selection process matches up with the assumptions
of the null hypothesis. Then the sum of the elements of
<code>choice</code> represents the total number of outdoor furniture
items, which the code saves as the variable <code>choice_sum</code>.
Since there are 2500 beds and outdoor furniture items in total,
<code>2500 - choice_sum</code> represents the total number of beds.
Therefore, the test statistic here is correctly calculated as the number
of outdoor furniture items minus the number of beds, all divided by the
total number of items, which is 2500.</p>
<p>Way 4 is a correct solution. Way 4 is similar to Way 3, except
instead of using 0s and 1s, it uses the strings <code>'bed'</code> and
<code>'outdoor'</code> in the <code>choice</code> array, so the
interpretation is even more direct. Another difference is the way the
number of beds and number of outdoor furniture items is calculated. It
uses <code>np.count_nonzero</code> instead of sum, which wouldn’t make
sense with strings. This solution calculates the proportion of outdoor
furniture minus the proportion of beds directly.</p>
<p>Way 5 is an incorrect solution. As described in the solution to
Problem 8.2, <code>app_data[outdoor|bed]</code> is a DataFrame
containing just the outdoor furniture items and the beds from
<code>app_data</code>. Based on the given information, we know
<code>app_data[outdoor|bed]</code> has 2500 rows, 1000 of which
correspond to beds and 1500 of which correspond to furniture items. This
code defines a variable <code>samp</code> that comes from sampling this
DataFrame 2500 times with replacement. This means that each row of
<code>samp</code> is equally likely to be any of the 2500 rows of
<code>app_data[outdoor|bed]</code>. The fraction of these rows that are
beds is <span class="math inline">1000/2500 = 2/5</span> and the
fraction of these rows that are outdoor furniture items is <span class="math inline">1500/2500 = 3/5</span>. This means the random
process of selecting rows randomly such that each row is equally likely
does not make each item equally likely to be a bed or outdoor furniture
item. Therefore, this approach does not align with the assumptions of
the null hypothesis.</p>
<p>Way 6 is a correct solution. Way 6 essentially modifies Way 5 to make
beds and outdoor furniture items equally likely to be selected in the
random sample. As in Way 5, the code involves the DataFrame
<code>app_data[outdoor|bed]</code> which contains 1000 beds and 1500
outdoor furniture items. Then this DataFrame is grouped by
<code>'category'</code> which results in a DataFrame indexed by
<code>'category'</code>, which will have only two rows, since there are
only two values of <code>'category'</code>, either
<code>'outdoor'</code> or <code>'bed'</code>. The aggregation function
<code>.count()</code> is irrelevant here. When the index is reset,
<code>'category'</code> becomes a column. Now, randomly sampling from
this two-row grouped DataFrame such that each row is equally likely to
be selected <em>does</em> correspond to choosing items such that each
item is equally likely to be a bed or outdoor furniture item. The last
line simply calculates the proportion of outdoor furniture items minus
the proportion of beds in our random sample drawn according to the null
model.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 59%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-3.4">Problem 3.4</h3>
<p>Suppose we generate 10,000 simulated values of the test statistic
according to the null model and store them in an array called
<code>simulated_diffs</code>. Complete the code below to calculate the
p-value for the hypothesis test.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>    np.count_nonzero(simulated_diffs _________ obs_diff)<span class="op">/</span><span class="dv">10000</span></span></code></pre></div>
<p>What goes in the blank?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>&lt;</code></p></li>
<li><p><input type="radio" disabled="" /> <code>&lt;=</code></p></li>
<li><p><input type="radio" disabled="" /> <code>&gt;</code></p></li>
<li><p><input type="radio" disabled="" /> <code>&gt;=</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3_4" aria-expanded="true" aria-controls="collapse3_4">
Click to view the solution.
</button>
</h2>
<div id="collapse3_4" class="accordion-collapse collapse collapse"
aria-labelledby="heading3_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> <code>&lt;=</code></p>
<p>To answer this question, we need to know whether small values or
large values of the test statistic indicate the alternative hypothesis.
The alternative hypothesis is that IKEA sells more beds than outdoor
furniture. Since we’re calculating the proportion of outdoor furniture
minus the proportion of beds, this difference will be small (negative)
if the alternative hypothesis is true. Larger (positive) values of the
test statistic mean that IKEA sells more outdoor furniture than beds. A
value near 0 means they sell beds and outdoor furniture equally.</p>
<p>The p-value is defined as the proportion of simulated test statistics
that are equal to the observed value or more extreme, where extreme
means in the direction of the alternative. In this case, since small
values of the test statistic indicate the alternative hypothesis, the
correct answer is <code>&lt;=</code>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 43%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-4">Problem 4</h2>
<p>Let’s suppose there are 4 different types of shots a basketball
player can take – layups, midrange shots, threes, and free throws.</p>
<p>The DataFrame <code>breakdown</code> has 4 rows and 50 columns – one
row for each of the 4 shot types mentioned above, and one column for
each of 50 different players. Each column of <code>breakdown</code>
describes the distribution of shot types for a single player.</p>
<p>The first few columns of <code>breakdown</code> are shown below.</p>
<center><img src='../assets/images/wi22-final/head-to-head.png' width=30%></center>
<p>For instance, 30% of Kelsey Plum’s shots are layups, 30% of her shots
are midrange shots, 20% of her shots are threes, and 20% of her shots
are free throws.</p>
<p><br></p>
<h3 id="problem-4.1">Problem 4.1</h3>
<p>Below, we’ve drawn an overlaid bar chart showing the shot
distributions of Kelsey Plum and Chiney Ogwumike, a player on the Los
Angeles Sparks.</p>
<center><img src='../assets/images/wi22-final/tvd.png' width=50%></center>
<p><br></p>
<p>What is the <strong>total variation distance</strong> (TVD) between
Kelsey Plum’s shot distribution and Chiney Ogwumike’s shot distribution?
Give your answer as a <strong>proportion</strong> between 0 and 1 (not a
percentage) rounded to three decimal places.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4_1" aria-expanded="true" aria-controls="collapse4_1">
Click to view the solution.
</button>
</h2>
<div id="collapse4_1" class="accordion-collapse collapse collapse"
aria-labelledby="heading4_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> 0.2</p>
<p>Recall, the TVD is the sum of the absolute differences in
proportions, divided by 2. The absolute differences in proportions for
each category are as follows:</p>
<ul>
<li>Free Throws: <span class="math inline">|0.05 - 0.2| =
0.15</span></li>
<li>Threes: <span class="math inline">|0.35 - 0.2| = 0.15</span></li>
<li>Midrange: <span class="math inline">|0.35 - 0.3| = 0.05</span></li>
<li>Layups: <span class="math inline">|0.25 - 0.3| = 0.05</span></li>
</ul>
<p>Then, we have</p>
<p><span class="math display">\text{TVD} = \frac{1}{2} (0.15 + 0.15 +
0.05 + 0.05) = 0.2</span></p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 84%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-4.2">Problem 4.2</h3>
<p>Recall, <code>breakdown</code> has information for 50 different
players. We want to find the player whose shot distribution is the
<strong>most similar to Kelsey Plum</strong>, i.e. has the lowest TVD
with Kelsey Plum’s shot distribution.</p>
<p>Fill in the blanks below so that <code>most_sim_player</code>
evaluates to the name of the player with the most similar shot
distribution to Kelsey Plum. Assume that the column named
<code>'Kelsey Plum'</code> is the first column in <code>breakdown</code>
(and again that <code>breakdown</code> has 50 columns total).</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>most_sim_player <span class="op">=</span> <span class="st">&#39;&#39;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>lowest_tvd_so_far <span class="op">=</span> __(a)__</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>other_players <span class="op">=</span> np.array(breakdown.columns).take(__(b)__)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> player <span class="kw">in</span> other_players:</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    player_tvd <span class="op">=</span> tvd(breakdown.get(<span class="st">&#39;Kelsey Plum&#39;</span>),</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>                     breakdown.get(player))</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> player_tvd <span class="op">&lt;</span> lowest_tvd_so_far:</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>        lowest_tvd_so_far <span class="op">=</span> player_tvd</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>        __(c)__</span></code></pre></div>
<ol type="1">
<li>What goes in blank (a)?</li>
</ol>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> -1</p></li>
<li><p><input type="radio" disabled="" /> -0.5</p></li>
<li><p><input type="radio" disabled="" /> 0</p></li>
<li><p><input type="radio" disabled="" /> 0.5</p></li>
<li><p><input type="radio" disabled="" /> 1</p></li>
<li><p><input type="radio" disabled="" /> <code>np.array([])</code></p></li>
<li><p><input type="radio" disabled="" /> <code>''</code></p></li>
</ul>
<ol start="2" type="1">
<li><p>What goes in blank (b)?</p></li>
<li><p>What goes in blank (c)?</p></li>
</ol>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4_2" aria-expanded="true" aria-controls="collapse4_2">
Click to view the solution.
</button>
</h2>
<div id="collapse4_2" class="accordion-collapse collapse collapse"
aria-labelledby="heading4_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answers:</strong> 1, <code>np.arange(1, 50)</code>,
<code>most_sim_player = player</code></p>
<p>Let’s try and understand the code provided to us. It appears that
we’re looping over the names of all other players, each time computing
the TVD between Kelsey Plum’s shot distribution and that player’s shot
distribution. If the TVD calculated in an iteration of the
<code>for</code>-loop (<code>player_tvd</code>) is less than the
previous lowest TVD (<code>lowest_tvd_so_far</code>), the current player
(<code>player</code>) is now the most “similar” to Kelsey Plum, and so
we store their TVD and name (in <code>most_sim_player</code>).</p>
<p>Before the <code>for</code>-loop, we haven’t looked at any other
players, so we don’t have values to store in
<code>most_sim_player</code> and <code>lowest_tvd_so_far</code>. On the
first iteration of the <code>for</code>-loop, both of these values need
to be updated to reflect Kelsey Plum’s similarity with the first player
in <code>other_players</code>. This is because, if we’ve only looked at
one player, that player is the most similar to Kelsey Plum.
<code>most_sim_player</code> is already initialized as an empty string,
and we will specify how to “update” <code>most_sim_player</code> in
blank (c). For blank (a), we need to pick a value of
<code>lowest_tvd_so_far</code> that we can <strong>guarantee</strong>
will be updated on the first iteration of the <code>for</code>-loop.
Recall, TVDs range from 0 to 1, with 0 meaning “most similar” and 1
meaning “most different”. This means that no matter what, the TVD
between Kelsey Plum’s distribution and the first player’s distribution
will be less than 1*, and so if we initialize
<code>lowest_tvd_so_far</code> to 1 before the <code>for</code>-loop, we
know it will be updated on the first iteration.</p>
<ul>
<li>It’s possible that the TVD between Kelsey Plum’s shot distribution
and the first other player’s shot distribution is equal to 1, rather
than being less than 1. If that were to happen, our code would still
generate the correct answer, but <code>lowest_tvd_so_far</code> and
<code>most_sim_player</code> wouldn’t be updated on the first iteration.
Rather, they’d be updated on the first iteration where
<code>player_tvd</code> is strictly less than 1. (We’d expect that the
TVDs between all pairs of players are neither exactly 0 nor exactly 1,
so this is not a practical issue.) To avoid this issue entirely, we
could change <code>if player_tvd &lt; lowest_tvd_so_far</code> to
<code>if player_tvd &lt;= lowest_tvd_so_far</code>, which would make
sure that even if the first TVD is 1, both
<code>lowest_tvd_so_far</code> and <code>most_sim_player</code> are
updated on the first iteration.</li>
<li>Note that we could have initialized <code>lowest_tvd_so_far</code>
to a value larger than 1 as well. Suppose we initialized it to 55 (an
arbitrary positive integer). On the first iteration of the
<code>for</code>-loop, <code>player_tvd</code> will be less than 55, and
so <code>lowest_tvd_so_far</code> will be updated.</li>
</ul>
<p>Then, we need <code>other_players</code> to be an array containing
the names of all players other than Kelsey Plum, whose name is stored at
position 0 in <code>breakdown.columns</code>. We are told that there are
50 players total, i.e. that there are 50 columns in
<code>breakdown</code>. We want to <code>take</code> the elements in
<code>breakdown.columns</code> at positions 1, 2, 3, …, 49 (the last
element), and the call to <code>np.arange</code> that generates this
sequence of positions is <code>np.arange(1, 50)</code>. (Remember,
<code>np.arange(a, b)</code> does not include the second integer!)</p>
<p>In blank (c), as mentioned in the explanation for blank (a), we need
to update the value of <code>most_sim_player</code>. (Note that we only
arrive at this line if <code>player_tvd</code> is the lowest pairwise
TVD we’ve seen so far.) All this requires is
<code>most_sim_player = player</code>, since <code>player</code>
contains the name of the player who we are looking at in the current
iteration of the <code>for</code>-loop.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 70%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-5">Problem 5</h2>
<p>You survey 100 DSC majors and 140 CSE majors to ask them which video
streaming service they use most. The resulting distributions are given
in the table below. Note that each column sums to 1.</p>
<div class="center">
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Service</strong></th>
<th style="text-align: center;"><strong>DSC Majors</strong></th>
<th style="text-align: center;"><strong>CSE Majors</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Netflix</td>
<td style="text-align: center;">0.4</td>
<td style="text-align: center;">0.35</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hulu</td>
<td style="text-align: center;">0.25</td>
<td style="text-align: center;">0.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Disney+</td>
<td style="text-align: center;">0.1</td>
<td style="text-align: center;">0.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Amazon Prime Video</td>
<td style="text-align: center;">0.15</td>
<td style="text-align: center;">0.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Other</td>
<td style="text-align: center;">0.1</td>
<td style="text-align: center;">0.05</td>
</tr>
</tbody>
</table>
</div>
<p>For example, 20% of CSE Majors said that Hulu is their most used
video streaming service. Note that if a student doesn’t use video
streaming services, their response is counted as Other.</p>
<p><br></p>
<h3 id="problem-5.1">Problem 5.1</h3>
<p>What is the total variation distance (TVD) between the distribution
for DSC majors and the distribution for CSE majors? Give your answer as
an exact decimal.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_1" aria-expanded="true" aria-controls="collapse5_1">
Click to view the solution.
</button>
</h2>
<div id="collapse5_1" class="accordion-collapse collapse collapse"
aria-labelledby="heading5_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: 0.15</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 89%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-5.2">Problem 5.2</h3>
<p>Suppose we only break down video streaming services into four
categories: Netflix, Hulu, Disney+, and Other (which now includes Amazon
Prime Video). Now we recalculate the TVD between the two distributions.
How does the TVD now compare to your answer to part (a)?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> less than (a)</p></li>
<li><p><input type="radio" disabled="" /> equal to (a)</p></li>
<li><p><input type="radio" disabled="" /> greater than (a)</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_2" aria-expanded="true" aria-controls="collapse5_2">
Click to view the solution.
</button>
</h2>
<div id="collapse5_2" class="accordion-collapse collapse collapse"
aria-labelledby="heading5_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: less than (a)</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 93%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-6">Problem 6</h2>
<p>In some cities, the number of sunshine hours per month is relatively
consistent throughout the year. São Paulo, Brazil is one such city; in
all months of the year, the number of sunshine hours per month is
somewhere between 139 and 173. New York City’s, on the other hand,
ranges from 139 to 268.</p>
<p>Gina and Abel, both San Diego natives, are interested in assessing
how “consistent" the number of sunshine hours per month in San Diego
appear to be. Specifically, they’d like to test the following
hypotheses:</p>
<ul>
<li><p><strong>Null Hypothesis</strong>: The number of sunshine hours
per month in San Diego is drawn from the uniform distribution, <span
class="math inline">\left[\frac{1}{12}, \frac{1}{12}, ...,
\frac{1}{12}\right]</span>. (In other words, the number of sunshine
hours per month in San Diego is equal in all 12 months of the
year.)</p></li>
<li><p><strong>Alternative Hypothesis</strong>: The number of sunshine
hours per month in San Diego is not drawn from the uniform
distribution.</p></li>
</ul>
<p>As their test statistic, Gina and Abel choose the total variation
distance. To simulate samples under the null, they will sample from a
categorical distribution with 12 categories — January, February, and so
on, through December — each of which have an equal probability of being
chosen.</p>
<p><br></p>
<h3 id="problem-6.1">Problem 6.1</h3>
<p>In order to run their hypothesis test, Gina and Abel need a way to
calculate their test statistic. Below is an incomplete implementation of
a function that computes the TVD between two arrays of length 12, each
of which represent a categorical distribution.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> calculate_tvd(dist1, dist2):</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> np.mean(np.<span class="bu">abs</span>(dist1 <span class="op">-</span> dist2)) <span class="op">*</span> ____</span></code></pre></div>
<p>Fill in the blank so that <code>calculate_tvd</code> works as
intended.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>1 / 6</code></p></li>
<li><p><input type="radio" disabled="" /> <code>1 / 3</code></p></li>
<li><p><input type="radio" disabled="" /> <code>1 / 2</code></p></li>
<li><p><input type="radio" disabled="" /> <code>2</code></p></li>
<li><p><input type="radio" disabled="" /> <code>3</code></p></li>
<li><p><input type="radio" disabled="" /> <code>6</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading6_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6_1" aria-expanded="true" aria-controls="collapse6_1">
Click to view the solution.
</button>
</h2>
<div id="collapse6_1" class="accordion-collapse collapse collapse"
aria-labelledby="heading6_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: <code>6</code></p>
<p>The TVD is the sum of the absolute differences in proportions,
divided by 2. In the code to the left of the blank, we’ve computed the
mean of the absolute differences in proportions, which is the same as
the sum of the absolute differences in proportions, divided by 12 (since
<code>len(dist1)</code> is <code>12</code>). To correct the fact that we
divided by 12, we multiply by 6, so that we’re only dividing by 2.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 17%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<p><strong>Moving forward, assume that <code>calculate_tvd</code> works
correctly.</strong></p>
<p>Now, complete the implementation of the function
<code>uniform_test</code>, which takes in an array
<code>observed_counts</code> of length 12 containing the number of
sunshine hours each month in a city and returns the p-value for the
hypothesis test stated at the start of the question.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> uniform_test(observed_counts):</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>        <span class="co"># The values in observed_counts are counts, not proportions!</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>        total_count <span class="op">=</span> observed_counts.<span class="bu">sum</span>()</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        uniform_dist <span class="op">=</span> __(b)__</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>        tvds <span class="op">=</span> np.array([])</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> np.arange(<span class="dv">10000</span>):</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>            simulated <span class="op">=</span> __(c)__</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>            tvd <span class="op">=</span> calculate_tvd(simulated, __(d)__)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>            tvds <span class="op">=</span> np.append(tvds, tvd)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> np.mean(tvds __(e)__ calculate_tvd(uniform_dist, __(f)__))</span></code></pre></div>
<p><br></p>
<h3 id="problem-6.2">Problem 6.2</h3>
<p>What goes in blank (b)? <em>(Hint: The function
<code>np.ones(k)</code> returns an array of length <code>k</code> in
which all elements are <code>1</code>.)</em></p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading6_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6_2" aria-expanded="true" aria-controls="collapse6_2">
Click to view the solution.
</button>
</h2>
<div id="collapse6_2" class="accordion-collapse collapse collapse"
aria-labelledby="heading6_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: <code>np.ones(12) / 12</code></p>
<p><code>uniform_dist</code> needs to be the same as the uniform
distribution provided in the null hypothesis, <span class="math inline">\left[\frac{1}{12}, \frac{1}{12}, ...,
\frac{1}{12}\right]</span>.</p>
<p>In code, this is an array of length 12 in which each element is equal
to <span class="math inline">1 / 12</span>. <code>np.ones(12)</code>
creates an array of length 12 in which each value is <code>1</code>; for
each value to be <code>1 / 12</code>, we divide <code>np.ones(12)</code>
by <code>12</code>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 66%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<p><br></p>
<h3 id="problem-6.3">Problem 6.3</h3>
<p>What goes in blank (c)?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>np.random.multinomial(12, uniform_dist)</code></p></li>
<li><p><input type="radio" disabled="" /> <code>np.random.multinomial(12, uniform_dist) / 12</code></p></li>
<li><p><input type="radio" disabled="" /> <code>np.random.multinomial(12, uniform_dist) / total_count</code></p></li>
<li><p><input type="radio" disabled="" /> <code>np.random.multinomial(total_count, uniform_dist)</code></p></li>
<li><p><input type="radio" disabled="" /> <code>np.random.multinomial(total_count, uniform_dist) / 12</code></p></li>
<li><p><input type="radio" disabled="" /> <code>np.random.multinomial(total_count, uniform_dist) / total_count</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading6_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6_3" aria-expanded="true" aria-controls="collapse6_3">
Click to view the solution.
</button>
</h2>
<div id="collapse6_3" class="accordion-collapse collapse collapse"
aria-labelledby="heading6_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>:
<code>np.random.multinomial(total_count, uniform_dist) / total_count</code></p>
<p>The idea here is to repeatedly generate an array of proportions that
results from distributing <code>total_count</code> hours across the 12
months in a way that each month is equally likely to be chosen. Each
time we generate such an array, we’ll determine its TVD from the uniform
distribution; doing this repeatedly gives us an empirical distribution
of the TVD under the assumption the null hypothesis is true.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 21%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<p><br></p>
<h3 id="problem-6.4">Problem 6.4</h3>
<p>What goes in blank (d)?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading6_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6_4" aria-expanded="true" aria-controls="collapse6_4">
Click to view the solution.
</button>
</h2>
<div id="collapse6_4" class="accordion-collapse collapse collapse"
aria-labelledby="heading6_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: <code>uniform_dist</code></p>
<p>As mentioned above:</p>
<blockquote>
<p>Each time we generate such an array, we’ll determine its TVD from the
<strong>uniform distribution</strong>; doing this repeatedly gives us an
empirical distribution of the TVD under the assumption the null
hypothesis is true.</p>
</blockquote>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 54%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<p><br></p>
<h3 id="problem-6.5">Problem 6.5</h3>
<p>What goes in blank (e)?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>&gt;</code></p></li>
<li><p><input type="radio" disabled="" /> <code>&gt;=</code></p></li>
<li><p><input type="radio" disabled="" /> <code>&lt;</code></p></li>
<li><p><input type="radio" disabled="" /> <code>&lt;=</code></p></li>
<li><p><input type="radio" disabled="" /> <code>==</code></p></li>
<li><p><input type="radio" disabled="" /> <code>!=</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading6_5">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6_5" aria-expanded="true" aria-controls="collapse6_5">
Click to view the solution.
</button>
</h2>
<div id="collapse6_5" class="accordion-collapse collapse collapse"
aria-labelledby="heading6_5" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: <code>&gt;=</code></p>
<p>The purpose of the last line of code is to compute the p-value for
the hypothesis test. Recall, the p-value of a hypothesis test is the
proportion of simulated test statistics that are as or more extreme than
the observed test statistic, under the assumption the null hypothesis is
true. In this context, “as extreme or more extreme” means the simulated
TVD is <strong>greater than or equal to</strong> the observed TVD (since
larger TVDs mean “more different”).</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 77%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-6.6">Problem 6.6</h3>
<p>What goes in blank (f)?</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading6_6">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6_6" aria-expanded="true" aria-controls="collapse6_6">
Click to view the solution.
</button>
</h2>
<div id="collapse6_6" class="accordion-collapse collapse collapse"
aria-labelledby="heading6_6" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: <code>observed_counts / total_count</code>
or <code>observed_counts / observed_counts.sum()</code></p>
<p>Blank (f) needs to contain the observed distribution of sunshine
hours (as an array of proportions) that we compare against the uniform
distribution to calculate the observed TVD. This observed TVD is then
compared with the distribution of simulated TVDs to calculate the
p-value. The observed counts are converted to proportions by dividing by
the total count so that the observed distribution is on the same scale
as the simulated and expected uniform distributions, which are also in
proportions.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 27%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-7">Problem 7</h2>
<p>For this question, we will use data from the 2021 Women’s National
Basketball Association (WNBA) season for the next several problems. In
basketball, players score points by shooting the ball into a hoop. The
team that scores the most points wins the game.</p>
<p>Kelsey Plum, a WNBA player, attended La Jolla Country Day School,
which is adjacent to UCSD’s campus. Her current team is the Las Vegas
Aces (three-letter code <code>'LVA'</code>). <strong>In 2021, the Las
Vegas Aces played 31 games, and Kelsey Plum played in all
31.</strong></p>
<p>The DataFrame <code>plum</code> contains her stats for all games the
Las Vegas Aces played in 2021. The first few rows of <code>plum</code>
are shown below (though the full DataFrame has 31 rows, not 5):</p>
<center><img src='../assets/images/wi22-final/plum.png' width=40%></center>
<p>Each row in <code>plum</code> corresponds to a single game. For each
game, we have:</p>
<ul>
<li><code>'Date'</code> (<code>str</code>), the date on which the game
was played</li>
<li><code>'Opp'</code> (<code>str</code>), the three-letter code of the
opponent team</li>
<li><code>'Home'</code> (<code>bool</code>), <code>True</code> if the
game was played in Las Vegas (“home”) and <code>False</code> if it was
played at the opponent’s arena (“away”)</li>
<li><code>'Won'</code> (<code>bool</code>), <code>True</code> if the Las
Vegas Aces won the game and <code>False</code> if they lost</li>
<li><code>'PTS'</code> (<code>int</code>), the number of points Kelsey
Plum scored in the game</li>
<li><code>'AST'</code> (<code>int</code>), the number of assists
(passes) Kelsey Plum made in the game</li>
<li><code>'TOV'</code> (<code>int</code>), the number of turnovers
Kelsey Plum made in the game (a turnover is when you lose the ball –
turnovers are bad!) <br><br></li>
</ul>
<p>Consider the definition of the function
<code>diff_in_group_means</code>:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> diff_in_group_means(df, group_col, num_col):</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> df.groupby(group_col).mean().get(num_col)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> s.loc[<span class="va">False</span>] <span class="op">-</span> s.loc[<span class="va">True</span>]</span></code></pre></div>
<p><br></p>
<h3 id="problem-7.1">Problem 7.1</h3>
<p>It turns out that Kelsey Plum averages 0.61 more assists in games
that she wins (“winning games”) than in games that she loses (“losing
games”). Fill in the blanks below so that <code>observed_diff</code>
evaluates to -0.61.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>observed_diff <span class="op">=</span> diff_in_group_means(plum, __(a)__, __(b)__)</span></code></pre></div>
<ol type="1">
<li><p>What goes in blank (a)?</p></li>
<li><p>What goes in blank (b)?</p></li>
</ol>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading7_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse7_1" aria-expanded="true" aria-controls="collapse7_1">
Click to view the solution.
</button>
</h2>
<div id="collapse7_1" class="accordion-collapse collapse collapse"
aria-labelledby="heading7_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answers:</strong> <code>'Won'</code>, <code>'AST'</code></p>
<p>To compute the number of assists Kelsey Plum averages in winning and
losing games, we need to group by <code>'Won'</code>. Once doing so, and
using the <code>.mean()</code> aggregation method, we need to access
elements in the <code>'AST'</code> column.</p>
<p>The second argument to <code>diff_in_group_means</code>,
<code>group_col</code>, is the column we’re grouping by, and so blank
(a) must be filled by <code>'Won'</code>. Then, the second argument,
<code>num_col</code>, must be <code>'AST'</code>.</p>
<p>Note that after extracting the Series containing the average number
of assists in wins and losses, we are returning the value with the index
<code>False</code> (“loss”) minus the value with the index
<code>True</code> (“win”). So, throughout this problem, keep in mind
that we are computing “losses minus wins”. Since our observation was
that she averaged 0.61 more assists in wins than in losses, it makes
sense that <code>diff_in_group_means(plum, 'Won', 'AST')</code> is -0.61
(rather than +0.61).</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 94%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-7.2">Problem 7.2</h3>
<p>After observing that Kelsey Plum averages more assists in winning
games than in losing games, we become interested in conducting a
permutation test for the following hypotheses:</p>
<ul>
<li><strong>Null Hypothesis:</strong> The number of assists Kelsey Plum
makes in winning games and in losing games come from the same
distribution.</li>
<li><strong>Alternative Hypothesis:</strong> The number of assists
Kelsey Plum makes in winning games is higher on average than the number
of assists that she makes in losing games.</li>
</ul>
<p>To conduct our permutation test, we place the following code in a
<code>for</code>-loop.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>won <span class="op">=</span> plum.get(<span class="st">&#39;Won&#39;</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>ast <span class="op">=</span> plum.get(<span class="st">&#39;AST&#39;</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>shuffled <span class="op">=</span> plum.assign(Won_shuffled<span class="op">=</span>np.random.permutation(won)) <span class="op">\</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>               .assign(AST_shuffled<span class="op">=</span>np.random.permutation(ast))</span></code></pre></div>
<p>Which of the following options <strong>does not</strong> compute a
valid simulated test statistic for this permutation test?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>diff_in_group_means(shuffled, 'Won', 'AST')</code></p></li>
<li><p><input type="radio" disabled="" /> <code>diff_in_group_means(shuffled, 'Won', 'AST_shuffled')</code></p></li>
<li><p><input type="radio" disabled="" /> <code>diff_in_group_means(shuffled, 'Won_shuffled, 'AST')</code></p></li>
<li><p><input type="radio" disabled="" /> <code>diff_in_group_means(shuffled, 'Won_shuffled, 'AST_shuffled')</code></p></li>
<li><p><input type="radio" disabled="" /> More than one of these options do not compute a valid simulated test
statistic for this permutation test</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading7_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse7_2" aria-expanded="true" aria-controls="collapse7_2">
Click to view the solution.
</button>
</h2>
<div id="collapse7_2" class="accordion-collapse collapse collapse"
aria-labelledby="heading7_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong>
<code>diff_in_group_means(shuffled, 'Won', 'AST')</code></p>
<p>As we saw in the previous subpart,
<code>diff_in_group_means(shuffled, 'Won', 'AST')</code> computes the
observed test statistic, which is -0.61. There is no randomness involved
in the observed test statistic; each time we run the line
<code>diff_in_group_means(shuffled, 'Won', 'AST')</code> we will see the
same result, so this cannot be used for simulation.</p>
<p>To perform a permutation test here, we need to simulate under the
null by randomly assigning assist counts to groups; here, the groups are
“win” and “loss”.</p>
<ul>
<li><strong>Option 2:</strong> Here, assist counts are shuffled and the
group names are kept in the same order. The end result is a random
pairing of assists to groups.</li>
<li><strong>Option 3:</strong> Here, the group names are shuffled and
the assist counts are kept in the same order. The end result is a random
pairing of assist counts to groups.</li>
<li><strong>Option 4:</strong> Here, both the group names and assist
counts are shuffled, but the end result is still the same as in the
previous two options.</li>
</ul>
<p>As such, Options 2 through 4 are all valid, and Option 1 is the only
invalid one.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 68%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-7.3">Problem 7.3</h3>
<p>Suppose we generate 10,000 simulated test statistics, using one of
the valid options from part 1. The empirical distribution of test
statistics, with a red line at <code>observed_diff</code>, is shown
below.</p>
<center><img src='../assets/images/wi22-final/quarter-hist.png' width=50%></center>
<p>Roughly one-quarter of the area of the histogram above is to the left
of the red line. What is the correct interpretation of this result?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> There is roughly a one quarter probability that Kelsey Plum’s number
of assists in winning games and in losing games come from the same
distribution.</p></li>
<li><p><input type="radio" disabled="" /> The significance level of this hypothesis test is roughly a
quarter.</p></li>
<li><p><input type="radio" disabled="" /> Under the assumption that Kelsey Plum’s number of assists in winning
games and in losing games come from the same distribution, and that she
wins 22 of the 31 games she plays, the chance of her averaging
<strong>at least</strong> 0.61 more assists in wins than losses is
roughly a quarter.</p></li>
<li><p><input type="radio" disabled="" /> Under the assumption that Kelsey Plum’s number of assists in winning
games and in losing games come from the same distribution, and that she
wins 22 of the 31 games she plays, the chance of her averaging 0.61 more
assists in wins than losses is roughly a quarter.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading7_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse7_3" aria-expanded="true" aria-controls="collapse7_3">
Click to view the solution.
</button>
</h2>
<div id="collapse7_3" class="accordion-collapse collapse collapse"
aria-labelledby="heading7_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> Under the assumption that Kelsey Plum’s
number of assists in winning games and in losing games come from the
same distribution, and that she wins 22 of the 31 games she plays, the
chance of her averaging <strong>at least</strong> 0.61 more assists in
wins than losses is roughly a quarter. (Option 3)</p>
<p>First, we should note that the area to the left of the red line (a
quarter) is the p-value of our hypothesis test. Generally, the p-value
is the probability of observing an outcome as or more extreme than the
observed, under the assumption that the null hypothesis is true. The
direction to look in depends on the alternate hypothesis; here, since
our alternative hypothesis is that the number of assists Kelsey Plum
makes in winning games is higher on average than in losing games, a
“more extreme” outcome is where the assists in winning games are higher
than in losing games, i.e. where <span class="math inline">\text{(assists in wins)} - \text{(assists in
losses)}</span> is positive or where <span class="math inline">\text{(assists in losses)} - \text{(assists in
wins)}</span> is negative. As mentioned in the solution to the first
subpart, our test statistic is <span class="math inline">\text{(assists
in losses)} - \text{(assists in wins)}</span>, so a more extreme outcome
is one where this is negative, i.e. to the left of the observed
statistic.</p>
<p>Let’s first rule out the first two options.</p>
<ul>
<li><strong>Option 1:</strong> This option states that the probability
that the null hypothesis (the number of assists she makes in winning and
losing games comes from the same distribution) is true is roughly a
quarter. However, the p-value <strong>is not</strong> the probability
that the null hypothesis is true.</li>
<li><strong>Option 2:</strong> The significance level is the formal name
for the p-value “cutoff” that we specify in our hypothesis test. There
is no cutoff mentioned in the problem. The <em>observed</em>
significance level is another name for the p-value, but Option 2 did not
contain the word <em>observed</em>.</li>
</ul>
<p>Now, the only difference between Options 3 and 4 is the inclusion of
“at least” in Option 3. Remember, to compute a p-value we must compute
the probability of observing something as <strong>or more</strong>
extreme than the observed, under the null. The “or more” corresponds to
“at least” in Option 3. As such, Option 3 is the correct choice.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 70%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-8">Problem 8</h2>
<p>An IKEA fan created an app where people can log the amount of time it
took them to assemble their IKEA furniture. The DataFrame
<code>app_data</code> has a row for each product build that was logged
on the app. The column <code>'product'</code> contains the name of the
product, and the column <code>'minutes'</code> contains integer values
representing the number of minutes it took to assemble each product.
<br><br></p>
<p>You are browsing the IKEA showroom, deciding whether to purchase the
BILLY bookcase or the LOMMARP bookcase. You are concerned about the
amount of time it will take to assemble your new bookcase, so you look
up the assembly times reported in <code>app_data</code>. Thinking of the
data in <code>app_data</code> as a random sample of all IKEA purchases,
you want to perform a permutation test to test the following
hypotheses.</p>
<p><strong>Null Hypothesis</strong>: The assembly time for the BILLY
bookcase and the assembly time for the LOMMARP bookcase come from the
same distribution.</p>
<p><strong>Alternative Hypothesis</strong>: The assembly time for the
BILLY bookcase and the assembly time for the LOMMARP bookcase come from
different distributions.</p>
<p><br></p>
<h3 id="problem-8.1">Problem 8.1</h3>
<p>Suppose we query <code>app_data</code> to keep only the BILLY
bookcases, then average the <code>'minutes'</code> column. In addition,
we separately query <code>app_data</code> to keep only the LOMMARP
bookcases, then average the <code>'minutes'</code> column. If the null
hypothesis is true, which of the following statements about these two
averages is correct?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> These two averages are the same.</p></li>
<li><p><input type="radio" disabled="" /> Any difference between these two averages is due to random
chance.</p></li>
<li><p><input type="radio" disabled="" /> Any difference between these two averages cannot be ascribed to
random chance alone.</p></li>
<li><p><input type="radio" disabled="" /> The difference between these averages is statistically
significant.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_1" aria-expanded="true" aria-controls="collapse8_1">
Click to view the solution.
</button>
</h2>
<div id="collapse8_1" class="accordion-collapse collapse collapse"
aria-labelledby="heading8_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Any difference between these two averages
is due to random chance.</p>
<p>If the null hypothesis is true, this means that the time recorded in
<code>app_data</code> for each BILLY bookcase is a random number that
comes from some distribution, and the time recorded in
<code>app_data</code> for each LOMMARP bookcase is a random number that
comes from <em>the same</em> distribution. Each assembly time is a
random number, so even if the null hypothesis is true, if we take one
person who assembles a BILLY bookcase and one person who assembles a
LOMMARP bookcase, there is no guarantee that their assembly times will
match. Their assembly times might match, or they might be different,
because assembly time is random. Randomness is the only reason that
their assembly times might be different, as the null hypothesis says
there is no systematic difference in assembly times between the two
bookcases. Specifically, it’s not the case that one typically takes
longer to assemble than the other.</p>
<p>With those points in mind, let’s go through the answer choices.</p>
<p>The first answer choice is incorrect. Just because two sets of
numbers are drawn from the same distribution, the numbers themselves
might be different due to randomness, and the averages might also be
different. Maybe just by chance, the people who assembled the BILLY
bookcases and recorded their times in <code>app_data</code> were slower
on average than the people who assembled LOMMARP bookcases. If the null
hypothesis is true, this difference in average assembly time should be
small, but it very likely exists to some degree.</p>
<p>The second answer choice is correct. If the null hypothesis is true,
the only reason for the difference is random chance alone.</p>
<p>The third answer choice is incorrect for the same reason that the
second answer choice is correct. If the null hypothesis is true, any
difference must be explained by random chance.</p>
<p>The fourth answer choice is incorrect. If there is a difference
between the averages, it should be very small and not statistically
significant. In other words, if we did a hypothesis test and the null
hypothesis was true, we should fail to reject the null.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 77%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-8.2">Problem 8.2</h3>
<p>For the permutation test, we’ll use as our test statistic the average
assembly time for BILLY bookcases minus the average assembly time for
LOMMARP bookcases, in minutes.</p>
<p>Complete the code below to generate one simulated value of the test
statistic in a new way, without using
<code>np.random.permutation</code>.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>billy <span class="op">=</span> (app_data.get(<span class="st">&#39;product&#39;</span>) <span class="op">==</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;BILLY Bookcase, white, 31 1/2x11x79 1/2&#39;</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>lommarp <span class="op">=</span> (app_data.get(<span class="st">&#39;product&#39;</span>) <span class="op">==</span> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>          <span class="st">&#39;LOMMARP Bookcase, dark blue-green, 25 5/8x78 3/8&#39;</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>billy_lommarp <span class="op">=</span> app_data[billy<span class="op">|</span>lommarp]</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>billy_mean <span class="op">=</span> np.random.choice(billy_lommarp.get(<span class="st">&#39;minutes&#39;</span>), billy.<span class="bu">sum</span>(), replace<span class="op">=</span><span class="va">False</span>).mean()</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>lommarp_mean <span class="op">=</span> _________</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>billy_mean <span class="op">-</span> lommarp_mean</span></code></pre></div>
<p>What goes in the blank?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>billy_lommarp[lommarp].get('minutes').mean()</code></p></li>
<li><p><input type="radio" disabled="" /> <code>np.random.choice(billy_lommarp.get('minutes'), lommarp.sum(), replace=False).mean()</code></p></li>
<li><p><input type="radio" disabled="" /> <code>billy_lommarp.get('minutes').mean() - billy_mean</code></p></li>
<li><p><input type="radio" disabled="" /> <code>(billy_lommarp.get('minutes').sum() - billy_mean * billy.sum())/lommarp.sum()</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_2" aria-expanded="true" aria-controls="collapse8_2">
Click to view the solution.
</button>
</h2>
<div id="collapse8_2" class="accordion-collapse collapse collapse"
aria-labelledby="heading8_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong>
<code>(billy_lommarp.get('minutes').sum() - billy_mean * billy.sum())/lommarp.sum()</code></p>
<p>The first line of code creates a boolean Series with a True value for
every BILLY bookcase, and the second line of code creates the analogous
Series for the LOMMARP bookcase. The third line queries to define a
DataFrame called <code>billy_lommarp</code> containing all products that
are BILLY or LOMMARP bookcases. In other words, this DataFrame contains
a mix of BILLY and LOMMARP bookcases.</p>
<p>From this point, the way we would normally proceed in a permutation
test would be to use <code>np.random.permutation</code> to shuffle one
of the two relevant columns (either <code>'product'</code> or
<code>'minutes'</code>) to create a random pairing of assembly times
with products. Then we would calculate the average of all assembly times
that were randomly assigned to the label BILLY. Similarly, we’d
calculate the average of all assembly times that were randomly assigned
to the label LOMMARP. Then we’d subtract these averages to get one
simulated value of the test statistic. To run the permutation test, we’d
have to repeat this process many times.</p>
<p>In this problem, we need to generate a simulated value of the test
statistic, without randomly shuffling one of the columns. The code
starts us off by defining a variable called <code>billy_mean</code> that
comes from using <code>np.random.choice</code>. There’s a lot going on
here, so let’s break it down. Remember that the first argument to
<code>np.random.choice</code> is a sequence of values to choose from,
and the second is the number of random choices to make. And we set
<code>replace=False</code>, so that no element that has already been
chosen can be chosen again. Here, we’re making our random choices from
the <code>'minutes'</code> column of <code>billy_lommarp</code>. The
number of choices to make from this collection of values is
<code>billy.sum()</code>, which is the sum of all values in the
<code>billy</code> Series defined in the first line of code. The
<code>billy</code> Series contains True/False values, but in Python,
True counts as 1 and False counts as 0, so <code>billy.sum()</code>
evaluates to the number of True entries in <code>billy</code>, which is
the number of BILLY bookcases recorded in <code>app_data</code>. It
helps to think of the random process like this:</p>
<ol type="1">
<li>Collect all the assembly times of any BILLY or LOMMARP bookcase in a
large bag.</li>
<li>Pull out a random assembly time from this bag.</li>
<li>Repeat step 2, drawing as many times as there are BILLY bookcases,
without replacement.</li>
</ol>
<p>If we think of the random times we draw as being labeled BILLY, then
the remaining assembly times still leftover in the bag represent the
assembly times randomly labeled LOMMARP. In other words, this is a
random association of assembly times to labels (BILLY or LOMMARP), which
is the same thing we usually accomplish by shuffling in a permutation
test.</p>
<p>From here, we can proceed the same way as usual. First, we need to
calculate the average of all assembly times that were randomly assigned
to the label BILLY. This is done for us and stored in
<code>billy_mean</code>. We also need to calculate the average of all
assembly times that were randomly assigned the label LOMMARP. We’ll call
that <code>lommarp_mean</code>. Thinking of picking times out of a large
bag, this is the average of all the assembly times left in the bag. The
problem is there is no easy way to access the assembly times that were
not picked. We can take advantage of the fact that we can easily
calculate the total assembly time of all BILLY and LOMMARP bookcases
together with <code>billy_lommarp.get('minutes').sum()</code>. Then if
we subtract the total assembly time of all bookcases randomly labeled
BILLY, we’ll be left with the total assembly time of all bookcases
randomly labeled LOMMARP. That is,
<code>billy_lommarp.get('minutes').sum() - billy_mean * billy.sum()</code>
represents the total assembly time of all bookcases randomly labeled
LOMMARP. The count of the number of LOMMARP bookcases is given by
<code>lommarp.sum()</code> so the average is
<code>(billy_lommarp.get('minutes').sum() - billy_mean * billy.sum())/lommarp.sum()</code>.</p>
<p>A common wrong answer for this question was the second answer choice,
<code>np.random.choice(billy_lommarp.get('minutes'), lommarp.sum(), replace=False).mean()</code>.
This mimics the structure of how <code>billy_mean</code> was defined so
it’s a natural guess. However, this corresponds to the following random
process, which doesn’t associate each assembly with a unique label
(BILLY or LOMMARP):</p>
<ol type="1">
<li>Collect all the assembly times of any BILLY or LOMMARP bookcase in a
large bag.</li>
<li>Pull out a random assembly time from this bag.</li>
<li>Repeat, drawing as many times as there are BILLY bookcases, without
replacement.</li>
<li>Collect all the assembly times of any BILLY or LOMMARP bookcase in a
large bag.</li>
<li>Pull out a random assembly time from this bag.</li>
<li>Repeat step 5, drawing as many times as there are LOMMARP bookcases,
without replacement.</li>
</ol>
<p>We could easily get the same assembly time once for BILLY and once
for LOMMARP, while other assembly times could get picked for neither.
This process doesn’t split the data into two random groups as
desired.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 12%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-9">Problem 9</h2>
<p>The DataFrame <code>apps</code> contains application data for a
random sample of 1,000 applicants for a particular credit card from the
1990s. The columns are:</p>
<ul>
<li><p><code>"status" (str)</code>: Whether the credit card application
was approved: <code>"approved"</code> or <code>"denied"</code> values
only.</p></li>
<li><p><code>"age" (float)</code>: The applicant’s age, in years, to the
nearest twelfth of a year.</p></li>
<li><p><code>"income" (float)</code>: The applicant’s annual income, in
tens of thousands of dollars.</p></li>
<li><p><code>"homeowner" (str)</code>: Whether the credit card applicant
owns their own home: <code>"yes"</code> or <code>"no"</code> values
only.</p></li>
<li><p><code>"dependents" (int)</code>: The number of dependents, or
individuals that rely on the applicant as a primary source of income,
such as children.</p></li>
</ul>
<p>The first few rows of <code>apps</code> are shown below, though
remember that <code>apps</code> has 1,000 rows.</p>
<center><img src='../assets/images/fa22-final/apps.jpg' width=45%></center>
<p><br> <br><br></p>
<p>In <code>apps</code>, our sample of 1,000 credit card applications,
applicants who were approved for the credit card have fewer dependents,
on average, than applicants who were denied. The mean number of
dependents for approved applicants is 0.98, versus 1.07 for denied
applicants.</p>
<p>To test whether this difference is purely due to random chance, or
whether the distributions of the number of dependents for approved and
denied applicants are truly different in the population of all credit
card applications, we decide to perform a permutation test.</p>
<p>Consider the incomplete code block below.</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> shuffle_status(df):</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    shuffled_status <span class="op">=</span> np.random.permutation(df.get(<span class="st">&quot;status&quot;</span>))</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df.assign(status<span class="op">=</span>shuffled_status).get([<span class="st">&quot;status&quot;</span>, <span class="st">&quot;dependents&quot;</span>])</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_stat(df):</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> df.groupby(<span class="st">&quot;status&quot;</span>).mean().get(<span class="st">&quot;dependents&quot;</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    approved <span class="op">=</span> grouped.loc[<span class="st">&quot;approved&quot;</span>]</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    denied <span class="op">=</span> grouped.loc[<span class="st">&quot;denied&quot;</span>]</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> __(a)__</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> np.array([])</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(<span class="dv">10000</span>):</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>    shuffled_apps <span class="op">=</span> shuffle_status(apps)</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    stat <span class="op">=</span> test_stat(shuffled_apps)</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> np.append(stats, stat)</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>p_value <span class="op">=</span> np.count_nonzero(__(b)__) <span class="op">/</span> <span class="dv">10000</span></span></code></pre></div>
<p>Below are six options for filling in blanks (a) and (b) in the code
above.</p>
<center>
<table class="table" style="width:50%">
  <thead>
    <tr>
      <th scope="col"></th>
      <th scope="col">Blank (a)</th>
      <th scope="col">Blank (b)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">Option 1</th>
      <td><code>denied - approved</code></td>
      <td><code>stats >= test_stat(apps)</code></td>
    </tr>
    <tr>
      <th scope="row">Option 2</th>
      <td><code>denied - approved</code></td>
      <td><code>stats <= test_stat(apps)</code></td>
    </tr>
    <tr>
      <th scope="row">Option 3</th>
      <td><code>approved - denied</code></td>
      <td><code>stats >= test_stat(apps)</code></td>
    </tr>
    <tr>
      <th scope="row">Option 4</th>
      <td><code>np.abs(denied - approved)</code></td>
      <td><code>stats >= test_stat(apps)</code></td>
    </tr>
    <tr>
      <th scope="row">Option 5</th>
      <td><code>np.abs(denied - approved)</code></td>
      <td><code>stats <= test_stat(apps)</code></td>
    </tr>
    <tr>
      <th scope="row">Option 6</th>
      <td><code>np.abs(approved - denied)</code></td>
      <td><code>stats >= test_stat(apps)</code></td>
    </tr>
  </tbody>
</table>
</center>
<p>The correct way to fill in the blanks depends on how we choose our
null and alternative hypotheses.</p>
<p><br></p>
<h3 id="problem-9.1">Problem 9.1</h3>
<p>Suppose we choose the following pair of hypotheses.</p>
<ul>
<li><p><strong>Null Hypothesis</strong>: In the population, the number
of dependents of approved and denied applicants come from the same
distribution.</p></li>
<li><p><strong>Alternative Hypothesis</strong>: In the population, the
number of dependents of approved applicants and denied applicants do not
come from the same distribution.</p></li>
</ul>
<p>Which of the six presented options could correctly fill in blanks (a)
and (b) for this pair of hypotheses? Select all that apply.</p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> Option 1</p></li>
<li><p><input type="checkbox" disabled="" /> Option 2</p></li>
<li><p><input type="checkbox" disabled="" /> Option 3</p></li>
<li><p><input type="checkbox" disabled="" /> Option 4</p></li>
<li><p><input type="checkbox" disabled="" /> Option 5</p></li>
<li><p><input type="checkbox" disabled="" /> Option 6</p></li>
<li><p><input type="checkbox" disabled="" /> None of the above.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading9_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse9_1" aria-expanded="true" aria-controls="collapse9_1">
Click to view the solution.
</button>
</h2>
<div id="collapse9_1" class="accordion-collapse collapse collapse"
aria-labelledby="heading9_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Option 4, Option 6</p>
<p>For blank (a), we want to choose a test statistic that helps us
distinguish between the null and alternative hypotheses. The alternative
hypothesis says that <code>denied</code> and <code>approved</code>
should be different, but it doesn’t say which should be larger. Options
1 through 3 therefore won’t work, because high values and low values of
these statistics both point to the alternative hypothesis, and moderate
values point to the null hypothesis. Options 4 through 6 all work
because large values point to the alternative hypothesis, and small
values close to 0 suggest that the null hypothesis should be true.</p>
<p>For blank (b), we want to calculate the p-value in such a way that it
represents the proportion of trials for which the simulated test
statistic was equal to the observed statistic or further in the
direction of the alternative. For all of Options 4 through 6, large
values of the test statistic indicate the alternative, so we need to
calculate the p-value with a <code>&gt;=</code> sign, as in Options 4
and 6.</p>
<p>While Option 3 filled in blank (a) correctly, it did not fill in
blank (b) correctly. Options 4 and 6 fill in both blanks correctly.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 78%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-9.2">Problem 9.2</h3>
<p>Now, suppose we choose the following pair of hypotheses.</p>
<ul>
<li><p><strong>Null Hypothesis</strong>: In the population, the number
of dependents of approved and denied applicants come from the same
distribution.</p></li>
<li><p><strong>Alternative Hypothesis</strong>: In the population, the
number of dependents of approved applicants is smaller on average than
the number of dependents of denied applicants.</p></li>
</ul>
<p>Which of the six presented options could correctly fill in blanks (a)
and (b) for this pair of hypotheses? Select all that apply.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading9_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse9_2" aria-expanded="true" aria-controls="collapse9_2">
Click to view the solution.
</button>
</h2>
<div id="collapse9_2" class="accordion-collapse collapse collapse"
aria-labelledby="heading9_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> Option 1</p>
<p>As in the previous part, we need to fill blank (a) with a test
statistic such that large values point towards one of the hypotheses and
small values point towards the other. Here, the alterntive hypothesis
suggests that <code>approved</code> should be less than
<code>denied</code>, so we can’t use Options 4 through 6 because these
can only detect whether <code>approved</code> and <code>denied</code>
are not different, not which is larger. Any of Options 1 through 3
should work, however. For Options 1 and 2, large values point towards
the alternative, and for Option 3, small values point towards the
alternative. This means we need to calculate the p-value in blank (b)
with a <code>&gt;=</code> symbol for the test statistic from Options 1
and 2, and a <code>&lt;=</code> symbol for the test statistic from
Option 3. Only Options 1 fills in blank (b) correctly based on the test
statistic used in blank (a).</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 83%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-9.3">Problem 9.3</h3>
<p>Option 6 from the start of this question is repeated below.</p>
<center>
<table class="table" style="width:50%">
  <thead>
    <tr>
      <th scope="col"></th>
      <th scope="col">Blank (a)</th>
      <th scope="col">Blank (b)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">Option 6</th>
      <td><code>np.abs(approved - denied)</code></td>
      <td><code>stats >= test_stat(apps)</code></td>
    </tr>
  </tbody>
</table>
</center>
<p>We want to create a new option, Option 7, that replicates the
behavior of Option 6, but with blank (a) filled in as shown:</p>
<center>
<table class="table" style="width:50%">
  <thead>
    <tr>
      <th scope="col"></th>
      <th scope="col">Blank (a)</th>
      <th scope="col">Blank (b)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">Option 7</th>
      <td><code>approved - denied</code></td>
      <td></td>
    </tr>
  </tbody>
</table>
</center>
<p>Which expression below could go in blank (b) so that Option 7 is
equivalent to Option 6?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>np.abs(stats) &gt;= test_stat(apps)</code></p></li>
<li><p><input type="radio" disabled="" /> <code>stats &gt;= np.abs(test_stat(apps))</code></p></li>
<li><p><input type="radio" disabled="" /> <code>np.abs(stats) &gt;= np.abs(test_stat(apps))</code></p></li>
<li><p><input type="radio" disabled="" /> <code>np.abs(stats &gt;= test_stat(apps))</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading9_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse9_3" aria-expanded="true" aria-controls="collapse9_3">
Click to view the solution.
</button>
</h2>
<div id="collapse9_3" class="accordion-collapse collapse collapse"
aria-labelledby="heading9_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong>
<code>np.abs(stats) &gt;= np.abs(test_stat(apps))</code></p>
<p>First, we need to understand how Option 6 works. Option 6 produces
large values of the test statistic when <code>approved</code> is very
different from <code>denied</code>, then calculates the p-value as the
proportion of trials for which the simulated test statistic was larger
than the observed statistic. In other words, Option 6 calculates the
proportion of trials in which <code>approved</code> and
<code>denied</code> are more different in a pair of random samples than
they are in the original samples.</p>
<p>For Option 7, the test statistic for a pair of random samples may
come out very large or very small when <code>approved</code> is very
different from <code>denied</code>. Similarly, the observed statistic
may come out very large or very small when <code>approved</code> and
<code>denied</code> are very different in the original samples. We want
to find the proportion of trials in which <code>approved</code> and
<code>denied</code> are more different in a pair of random samples than
they are in the original samples, which means we want the proportion of
trials in which the absolute value of <code>approved - denied</code> in
a pair of random samples is larger than the absolute value of
<code>approved - denied</code> in the original samples.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 56%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<p><br></p>
<h3 id="problem-9.4">Problem 9.4</h3>
<p>In our implementation of this permutation test, we followed the
procedure outlined in lecture to draw new pairs of samples under the
null hypothesis and compute test statistics — that is, we randomly
assigned each row to a group (approved or denied) by shuffling one of
the columns in <code>apps</code>, then computed the test statistic on
this random pair of samples.</p>
<p>Let’s now explore an alternative solution to drawing pairs of samples
under the null hypothesis and computing test statistics. Here’s the
approach:</p>
<ol type="1">
<li>Shuffle, i.e. re-order, the rows of the DataFrame.</li>
<li>Use the values at the top of the resulting <code>"dependents"</code>
column as the new “denied” sample, and the values at the at the bottom
of the resulting <code>"dependents"</code> column as the new “approved”
sample. Note that we don’t necessarily split the DataFrame exactly in
half — the sizes of these new samples depend on the number of “denied”
and “approved” values in the original DataFrame!</li>
</ol>
<p>Once we generate our pair of random samples in this way, we’ll
compute the test statistic on the random pair, as usual. Here, we’ll use
as our test statistic the difference between the mean number of
dependents for denied and approved applicants, in the order
<strong>denied minus approved</strong>.</p>
<p><strong>Fill in the blanks to complete the simulation
below.</strong></p>
<p><em>Hint:</em> <code>np.random.permutation</code> shouldn’t appear
anywhere in your code.</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> shuffle_all(df):</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>        <span class="co">&#39;&#39;&#39;Returns a DataFrame with the same rows as df, but reordered.&#39;&#39;&#39;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> __(a)__</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> fast_stat(df):</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>        <span class="co"># This function does not and should not contain any randomness.</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>        denied <span class="op">=</span> np.count_nonzero(df.get(<span class="st">&quot;status&quot;</span>) <span class="op">==</span> <span class="st">&quot;denied&quot;</span>)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>        mean_denied <span class="op">=</span> __(b)__.get(<span class="st">&quot;dependents&quot;</span>).mean()</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>        mean_approved <span class="op">=</span> __(c)__.get(<span class="st">&quot;dependents&quot;</span>).mean()</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> mean_denied <span class="op">-</span> mean_approved</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> np.array([])</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> np.arange(<span class="dv">10000</span>):</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>        stat <span class="op">=</span> fast_stat(shuffle_all(apps))</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>        stats <span class="op">=</span> np.append(stats, stat)</span></code></pre></div>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading9_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse9_4" aria-expanded="true" aria-controls="collapse9_4">
Click to view the solution.
</button>
</h2>
<div id="collapse9_4" class="accordion-collapse collapse collapse"
aria-labelledby="heading9_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer: </strong> The blanks should be filled in as
follows:</p>
<ul>
<li><ol type="a">
<li><code>df.sample(df.shape[0])</code></li>
</ol></li>
<li><ol start="2" type="a">
<li><code>df.take(np.arange(denied))</code></li>
</ol></li>
<li><ol start="3" type="a">
<li><code>df.take(np.arange(denied, df.shape[0]))</code></li>
</ol></li>
</ul>
<p>For blank (a), we are told to return a DataFrame with the same rows
but in a different order. We can use the <code>.sample</code> method for
this question. We want each row of the input DataFrame <code>df</code>
to appear once, so we should sample without replacement, and we should
have has many rows in the output as in <code>df</code>, so our sample
should be of size <code>df.shape[0]</code>. Since sampling without
replacement is the default behavior of <code>.sample</code>, it is
optional to specify <code>replace=False</code>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 59%. <br/><br/></p>
<p>For blank (b), we need to implement the strategy outlined, where
after we shuffle the DataFrame, we use the values at the top of the
DataFrame as our new “denied sample. In a permutation test, the two
random groups we create should have the same sizes as the two original
groups we are given. In this case, the size of the”denied” group in our
original data is stored in the variable <code>denied</code>. So we need
the rows in positions 0, 1, 2, …, <code>denied - 1</code>, which we can
get using <code>df.take(np.arange(denied))</code>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 39%. <br/><br/></p>
<p>For blank (c), we need to get all remaining applicants, who form the
new “approved” sample. We can <code>.take</code> the rows corresponding
to the ones we didn’t put into the “denied” group. That is, the first
applicant who will be put into this group is at position
<code>denied</code>, and we’ll take all applicants from there onwards.
We should therefore fill in blank (c) with
<code>df.take(np.arange(denied, df.shape[0]))</code>.</p>
<p>For example, if <code>apps</code> had only 10 rows, 7 of them
corresponding to denied applications, we would shuffle the rows of
<code>apps</code>, then take rows 0, 1, 2, 3, 4, 5, 6 as our new
“denied” sample and rows 7, 8, 9 as our new “approved” sample.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 38%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-10">Problem 10</h2>
<p>Researchers from the San Diego Zoo, located within Balboa Park,
collected physical measurements of three species of penguins (Adelie,
Chinstrap, or Gentoo) in a region of Antarctica. One piece of
information they tracked for each of 330 penguins was its mass in grams.
The average penguin mass is 4200 grams, and the standard deviation is
840 grams.</p>
<p>We’re interested in investigating the differences between the masses
of Adelie penguins and Chinstrap penguins. Specifically, our null
hypothesis is that their masses are drawn from the same population
distribution, and any observed differences are due to chance only.</p>
<p>Below, we have a snippet of working code for this hypothesis test,
for a specific test statistic. Assume that <code>adelie_chinstrap</code>
is a DataFrame of only Adelie and Chinstrap penguins, with just two
columns – <code>'species'</code> and <code>'mass'</code>.</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> np.array([])</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>num_reps <span class="op">=</span> <span class="dv">500</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(num_reps):</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) starts ---</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    shuffled <span class="op">=</span> np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;species&#39;</span>))</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) ends ---</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) starts ---</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    with_shuffled <span class="op">=</span> adelie_chinstrap.assign(species<span class="op">=</span>shuffled)</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) ends ---</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> with_shuffled.groupby(<span class="st">&#39;species&#39;</span>).mean()</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) starts ---</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">0</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">1</span>]</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) ends ---</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> np.append(stats, stat)</span></code></pre></div>
<p><br></p>
<h3 id="problem-10.1">Problem 10.1</h3>
<p>Which of the following statements best describe the procedure
above?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This is a standard hypothesis test, and our test statistic is the
total variation distance between the distribution of Adelie masses and
Chinstrap masses</p></li>
<li><p><input type="radio" disabled="" /> This is a standard hypothesis test, and our test statistic is the
difference between the expected proportion of Adelie penguins and the
proportion of Adelie penguins in our resample</p></li>
<li><p><input type="radio" disabled="" /> This is a permutation test, and our test statistic is the total
variation distance between the distribution of Adelie masses and
Chinstrap masses</p></li>
<li><p><input type="radio" disabled="" /> This is a permutation test, and our test statistic is the difference
in the mean Adelie mass and mean Chinstrap mass</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading10_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10_1" aria-expanded="true" aria-controls="collapse10_1">
Click to view the solution.
</button>
</h2>
<div id="collapse10_1" class="accordion-collapse collapse collapse"
aria-labelledby="heading10_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> This is a permutation test, and our test
statistic is the difference in the mean Adelie mass and mean Chinstrap
mass (Option 4)</p>
<p>Recall, a permutation test helps us decide whether two random samples
come from the same distribution. This test matches our goal of testing
whether the masses of Adelie penguins and Chinstrap penguins are drawn
from the same population distribution. The code above are also doing
steps of a permutation test. In part (a), it shuffles
<code>'species'</code> and stores the shuffled series to
<code>shuffled</code>. In part (b), it assign the shuffled series of
values to <code>'species'</code> column. Then, it uses
<code>grouped = with_shuffled.groupby('species').mean()</code> to
calculate the mean of each species. In part (c), it computes the
difference between mean mass of the two species by first getting the
<code>'mass'</code> column and then accessing mean mass of each group
(Adelie and Chinstrap) with positional index <code>0</code> and
<code>1</code>.</p>
<hr/>
<h5>Difficulty: ⭐️</h5>
<p>
</p>
<p>The average score on this problem was 98%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-10.2">Problem 10.2</h3>
<p>For your convenience, we copy the code for the hypothesis test
below.</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> np.array([])</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>num_reps <span class="op">=</span> <span class="dv">500</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(num_reps):</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) starts ---</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    shuffled <span class="op">=</span> np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;species&#39;</span>))</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) ends ---</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) starts ---</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    with_shuffled <span class="op">=</span> adelie_chinstrap.assign(species<span class="op">=</span>shuffled)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) ends ---</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> with_shuffled.groupby(<span class="st">&#39;species&#39;</span>).mean()</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) starts ---</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">0</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">1</span>]</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) ends ---</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> np.append(stats, stat)</span></code></pre></div>
<p>What would happen if we removed <code>line (a)</code>, and replaced
<code>line (b)</code> with</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>with_shuffled <span class="op">=</span> adelie_chinstrap.sample(adelie_chinstrap.shape[<span class="dv">0</span>], replace<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<p>Select the best answer.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This would still run a valid hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as all values in the
<code>stats</code> array would be exactly the same</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, even though there would
be several different values in the <code>stats</code> array</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as it would incorporate
information about Gentoo penguins</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading10_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10_2" aria-expanded="true" aria-controls="collapse10_2">
Click to view the solution.
</button>
</h2>
<div id="collapse10_2" class="accordion-collapse collapse collapse"
aria-labelledby="heading10_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> This would not run a valid hypothesis test,
as all values in the <code>stats</code> array would be exactly the same
(Option 2)</p>
<p>Recall, <code>DataFrame.sample(n, replace = False)</code> (or
<code>DataFrame.sample(n)</code> since <code>replace = False</code> is
by default) returns a DataFrame by randomly sampling <code>n</code> rows
from the DataFrame, without replacement. Since our <code>n</code> is
<code>adelie_chinstrap.shape[0]</code>, and we are sampling without
replacement, we will get the exactly same Dataframe (though the order of
rows may be different but the <code>stats</code> array would be exactly
the same).</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 87%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-10.3">Problem 10.3</h3>
<p>For your convenience, we copy the code for the hypothesis test
below.</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> np.array([])</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>num_reps <span class="op">=</span> <span class="dv">500</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(num_reps):</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) starts ---</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    shuffled <span class="op">=</span> np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;species&#39;</span>))</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) ends ---</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) starts ---</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    with_shuffled <span class="op">=</span> adelie_chinstrap.assign(species<span class="op">=</span>shuffled)</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) ends ---</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> with_shuffled.groupby(<span class="st">&#39;species&#39;</span>).mean()</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) starts ---</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">0</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">1</span>]</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) ends ---</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> np.append(stats, stat)</span></code></pre></div>
<p>What would happen if we removed <code>line (a)</code>, and replaced
<code>line (b)</code> with</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>with_shuffled <span class="op">=</span> adelie_chinstrap.sample(adelie_chinstrap.shape[<span class="dv">0</span>], replace<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<p>Select the best answer.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This would still run a valid hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as all values in the
<code>stats</code> array would be exactly the same</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, even though there would
be several different values in the <code>stats</code> array</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as it would incorporate
information about Gentoo penguins</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading10_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10_3" aria-expanded="true" aria-controls="collapse10_3">
Click to view the solution.
</button>
</h2>
<div id="collapse10_3" class="accordion-collapse collapse collapse"
aria-labelledby="heading10_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> This would not run a valid hypothesis test,
even though there would be several different values in the
<code>stats</code> array (Option 3)</p>
<p>Recall, <code>DataFrame.sample(n, replace = True)</code> returns a
new DataFrame by randomly sampling <code>n</code> rows from the
DataFrame, with replacement. Since we are sampling with replacement, we
will have a DataFrame which produces a <code>stats</code> array with
some different values. However, recall, the key idea behind a
permutation test is to shuffle the group labels. So, the above code does
not meet this key requirement since we only want to shuffle the
<code>"species"</code> column without changing the size of the two
species. However, the code may change the size of the two species.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 66%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-10.4">Problem 10.4</h3>
<p>For your convenience, we copy the code for the hypothesis test
below.</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> np.array([])</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>num_reps <span class="op">=</span> <span class="dv">500</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(num_reps):</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) starts ---</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    shuffled <span class="op">=</span> np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;species&#39;</span>))</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) ends ---</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) starts ---</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    with_shuffled <span class="op">=</span> adelie_chinstrap.assign(species<span class="op">=</span>shuffled)</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) ends ---</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> with_shuffled.groupby(<span class="st">&#39;species&#39;</span>).mean()</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) starts ---</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>    stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">0</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">1</span>]</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) ends ---</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> np.append(stats, stat)</span></code></pre></div>
<p>What would happen if we replaced <code>line (a)</code> with</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>with_shuffled <span class="op">=</span> adelie_chinstrap.assign(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    species<span class="op">=</span>np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;species&#39;</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>and replaced line (b) with</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>with_shuffled <span class="op">=</span> with_shuffled.assign(</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    mass<span class="op">=</span>np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;mass&#39;</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Select the best answer.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This would still run a valid hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as all values in the
<code>stats</code> array would be exactly the same</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, even though there would
be several different values in the <code>stats</code> array</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as it would incorporate
information about Gentoo penguins</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading10_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10_4" aria-expanded="true" aria-controls="collapse10_4">
Click to view the solution.
</button>
</h2>
<div id="collapse10_4" class="accordion-collapse collapse collapse"
aria-labelledby="heading10_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> This would still run a valid hypothesis test
(Option 1)</p>
<p>Our goal for the permutation test is to randomly assign birth weights
to groups, without changing group sizes. The above code shuffles
<code>'species'</code> and <code>'mass'</code> columns and assigns them
back to the DataFrame. This fulfills our goal.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 81%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-10.5">Problem 10.5</h3>
<p>Suppose we run the code for the hypothesis test and see the following
empirical distribution for the test statistic. In red is the observed
statistic.</p>
<center><img src='../assets/images/fa21-final/measuring_up_his.png' width=40%></center>
<p>Suppose our alternative hypothesis is that Chinstrap penguins weigh
more on average than Adelie penguins. Which of the following is closest
to the p-value for our hypothesis test?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <span class="math inline">0</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{1}{4}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{1}{3}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{2}{3}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{3}{4}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">1</span></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading10_5">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10_5" aria-expanded="true" aria-controls="collapse10_5">
Click to view the solution.
</button>
</h2>
<div id="collapse10_5" class="accordion-collapse collapse collapse"
aria-labelledby="heading10_5" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer:</strong> <span class="math inline">\frac{1}{3}</span></p>
<p>Recall, the p-value is the chance, under the null hypothesis, that
the test statistic is equal to the value that was observed in the data
or is even further in the direction of the alternative. Thus, we compute
the proportion of the test statistic that is equal or less than the
observed statistic. (It is less than because less than corresponds to
the alternative hypothesis “Chinstrap penguins weigh more on average
than Adelie penguins”. Recall, when computing the statistic, we use
Adelie’s mean mass minus Chinstrap’s mean mass. If Chinstrap’s mean mass
is larger, the statistic will be negative, the direction of less than
the observed statistic).</p>
<p>Thus, we look at the proportion of area less than or on the red line
(which represents observed statistic), it is around <span class="math inline">\frac{1}{3}</span>.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 80%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-11">Problem 11</h2>
<p>Choose the best tool to answer each of the following questions. Note
the following:</p>
<ul>
<li>By “hypothesis testing”, we mean “standard” hypothesis testing,
i.e. hypothesis testing that <strong>doesn’t</strong> involve
permutation testing or bootstrapping.</li>
<li>By “bootstrapping”, we mean bootstrapping that
<strong>doesn’t</strong> involve hypothesis testing.</li>
</ul>
<p><br></p>
<h3 id="problem-11.1">Problem 11.1</h3>
<p>Are incomes of applicants with 2 or fewer dependents drawn randomly
from the distribution of incomes of all applicants?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis Testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation Testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading11_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse11_1" aria-expanded="true" aria-controls="collapse11_1">
Click to view the solution.
</button>
</h2>
<div id="collapse11_1" class="accordion-collapse collapse collapse"
aria-labelledby="heading11_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Anwser:</strong> Hypothesis Testing</p>
<p>This is a question of whether a certain set of incomes (corresponding
to applicants with 2 or fewer dependents) are drawn randomly from a
certain population (incomes of all applicants). We need to use
hypothesis testing to determine whether this model for how samples are
drawn from a population seems plausible.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 47%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-11.2">Problem 11.2</h3>
<p>What is the median income of credit card applicants with 2 or fewer
dependents?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis Testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation Testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading11_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse11_2" aria-expanded="true" aria-controls="collapse11_2">
Click to view the solution.
</button>
</h2>
<div id="collapse11_2" class="accordion-collapse collapse collapse"
aria-labelledby="heading11_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Anwser:</strong> Bootstrapping</p>
<p>The question is looking for an estimate a specific parameter (the
median income of applicants with 2 or fewer dependents), so we know
boostrapping is the best tool.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 88%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-11.3">Problem 11.3</h3>
<p>Are credit card applications approved through a random process in
which 50% of applications are approved?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis Testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation Testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading11_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse11_3" aria-expanded="true" aria-controls="collapse11_3">
Click to view the solution.
</button>
</h2>
<div id="collapse11_3" class="accordion-collapse collapse collapse"
aria-labelledby="heading11_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Anwser:</strong> Hypothesis Testing</p>
<p>The question asks about the validity of a model in which applications
are approved randomly such that each application has a 50% chance of
being approved. To determine whether this model is plausible, we should
use a standard hypothesis test to simulate this random process many
times and see if the data generated according to this model is
consistent with our observed data.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 74%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-11.4">Problem 11.4</h3>
<p>Is the median income of applicants with 2 or fewer dependents less
than the median income of applicants with 3 or more dependents?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis Testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation Testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading11_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse11_4" aria-expanded="true" aria-controls="collapse11_4">
Click to view the solution.
</button>
</h2>
<div id="collapse11_4" class="accordion-collapse collapse collapse"
aria-labelledby="heading11_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Anwser:</strong> Permutation Testing</p>
<p>Recall, a permutation test helps us decide whether two random samples
come from the same distribution. This question is about whether two
random samples for different groups of applicants have the same
distribution of incomes or whether they don’t because one group’s median
incomes is less than the other.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 57%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-11.5">Problem 11.5</h3>
<p>What is the difference in median income of applicants with 2 or fewer
dependents and applicants with 3 or more dependents?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Hypothesis Testing</p></li>
<li><p><input type="radio" disabled="" /> Permutation Testing</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading11_5">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse11_5" aria-expanded="true" aria-controls="collapse11_5">
Click to view the solution.
</button>
</h2>
<div id="collapse11_5" class="accordion-collapse collapse collapse"
aria-labelledby="heading11_5" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Anwser:</strong> Bootstrapping</p>
<p>The question at hand is looking for a specific parameter value (the
difference in median incomes for two different subsets of the
applicants). Since this is a question of estimating an unknown
parameter, bootstrapping is the best tool.</p>
<hr/>
<h5>Difficulty: ⭐️⭐️⭐️</h5>
<p>
</p>
<p>The average score on this problem was 63%.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="section"><span class="math display"> </span></h2>
<h4
id="feedback-find-an-error-still-confused-have-a-suggestion-let-us-know-here.">👋
Feedback: Find an error? Still confused? Have a suggestion?
<a href="https://forms.gle/WZ71FchnXU1K154d7">Let us know
here</u></a>.</h4>
<hr />
</body>
</html>
