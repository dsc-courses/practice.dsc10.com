<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Discussion 7: Permutation Testing and Bootstrapping</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../assets/theme.css" />
  <script defer=""
  src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Discussion 7: Permutation Testing and
Bootstrapping</h1>
</header>
<p><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<!-- add after bootstrap.min.css -->
<link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css"/>
<!-- add after bootstrap.min.js or bootstrap.bundle.min.js -->
<script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script></p>
<!-- for difficulty gauges-->
<script src="https://cdn.plot.ly/plotly-2.16.1.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B947E6J6H4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B947E6J6H4');
</script>
<p><a href="../index.html">← return to practice.dsc10.com</a></p>
<hr />
<p>The problems in this worksheet are taken from past exams. Work on
them <strong>on paper</strong>, since the exams you take in this course
will also be on paper. <br><br>We encourage you to complete this
worksheet in a live discussion section. Solutions will be made available
after all discussion sections have concluded. You don’t need to submit
your answers anywhere.<br><br><b>Note: We do not plan to cover all
problems here in the live discussion section</b>; the problems we don’t
cover can be used for extra practice.</p>
<hr />
<h2 id="problem-1">Problem 1</h2>
<p>Researchers from the San Diego Zoo, located within Balboa Park,
collected physical measurements of three species of penguins (Adelie,
Chinstrap, or Gentoo) in a region of Antarctica. One piece of
information they tracked for each of 330 penguins was its mass in grams.
The average penguin mass is 4200 grams, and the standard deviation is
840 grams.</p>
<p>We’re interested in investigating the differences between the masses
of Adelie penguins and Chinstrap penguins. Specifically, our null
hypothesis is that their masses are drawn from the same population
distribution, and any observed differences are due to chance only.</p>
<p>Below, we have a snippet of working code for this hypothesis test,
for a specific test statistic. Assume that <code>adelie_chinstrap</code>
is a DataFrame of only Adelie and Chinstrap penguins, with just two
columns – <code>'species'</code> and <code>'mass'</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> np.array([])</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>num_reps <span class="op">=</span> <span class="dv">500</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(num_reps):</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) starts ---</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    shuffled <span class="op">=</span> np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;species&#39;</span>))</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) ends ---</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) starts ---</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    with_shuffled <span class="op">=</span> adelie_chinstrap.assign(species<span class="op">=</span>shuffled)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) ends ---</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> with_shuffled.groupby(<span class="st">&#39;species&#39;</span>).mean()</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) starts ---</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">0</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">1</span>]</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) ends ---</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> np.append(stats, stat)</span></code></pre></div>
<p><br></p>
<h3 id="problem-1.1">Problem 1.1</h3>
<p>Which of the following statements best describe the procedure
above?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This is a standard hypothesis test, and our test statistic is the
total variation distance between the distribution of Adelie masses and
Chinstrap masses</p></li>
<li><p><input type="radio" disabled="" /> This is a standard hypothesis test, and our test statistic is the
difference between the expected proportion of Adelie penguins and the
proportion of Adelie penguins in our resample</p></li>
<li><p><input type="radio" disabled="" /> This is a permutation test, and our test statistic is the total
variation distance between the distribution of Adelie masses and
Chinstrap masses</p></li>
<li><p><input type="radio" disabled="" /> This is a permutation test, and our test statistic is the difference
in the mean Adelie mass and mean Chinstrap mass</p></li>
</ul>
<p><br></p>
<h3 id="problem-1.2">Problem 1.2</h3>
<p>Currently, line (c) (marked with a comment) uses .iloc. Which of the
following options compute the exact same statistic as line (c) currently
does?</p>
<p>Option 1:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).loc[<span class="st">&#39;Adelie&#39;</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).loc[<span class="st">&#39;Chinstrap&#39;</span>]</span></code></pre></div>
<p>Option 2:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).loc[<span class="st">&#39;Chinstrap&#39;</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).loc[<span class="st">&#39;Adelie&#39;</span>]</span></code></pre></div>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Option 1 only</p></li>
<li><p><input type="radio" disabled="" /> Option 2 only</p></li>
<li><p><input type="radio" disabled="" /> Both options</p></li>
<li><p><input type="radio" disabled="" /> Neither option</p></li>
</ul>
<p><br></p>
<h3 id="problem-1.3">Problem 1.3</h3>
<p>Is it possible to re-write <code>line (c)</code> in a way that uses
<code>.iloc[0]</code> twice, without any other uses of <code>.loc</code>
or <code>.iloc</code>?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Yes, it’s possible</p></li>
<li><p><input type="radio" disabled="" /> No, it’s not possible</p></li>
</ul>
<p><br></p>
<h3 id="problem-1.4">Problem 1.4</h3>
<p>For your convenience, we copy the code for the hypothesis test
below.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> np.array([])</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>num_reps <span class="op">=</span> <span class="dv">500</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(num_reps):</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) starts ---</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    shuffled <span class="op">=</span> np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;species&#39;</span>))</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) ends ---</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) starts ---</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    with_shuffled <span class="op">=</span> adelie_chinstrap.assign(species<span class="op">=</span>shuffled)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) ends ---</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> with_shuffled.groupby(<span class="st">&#39;species&#39;</span>).mean()</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) starts ---</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">0</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">1</span>]</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) ends ---</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> np.append(stats, stat)</span></code></pre></div>
<p>What would happen if we removed <code>line (a)</code>, and replaced
<code>line (b)</code> with</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>with_shuffled <span class="op">=</span> adelie_chinstrap.sample(adelie_chinstrap.shape[<span class="dv">0</span>], replace<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<p>Select the best answer.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This would still run a valid hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as all values in the
<code>stats</code> array would be exactly the same</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, even though there would
be several different values in the <code>stats</code> array</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as it would incorporate
information about Gentoo penguins</p></li>
</ul>
<p><br></p>
<h3 id="problem-1.5">Problem 1.5</h3>
<p>For your convenience, we copy the code for the hypothesis test
below.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> np.array([])</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>num_reps <span class="op">=</span> <span class="dv">500</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(num_reps):</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) starts ---</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    shuffled <span class="op">=</span> np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;species&#39;</span>))</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) ends ---</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) starts ---</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    with_shuffled <span class="op">=</span> adelie_chinstrap.assign(species<span class="op">=</span>shuffled)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) ends ---</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> with_shuffled.groupby(<span class="st">&#39;species&#39;</span>).mean()</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) starts ---</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">0</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">1</span>]</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) ends ---</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> np.append(stats, stat)</span></code></pre></div>
<p>What would happen if we removed <code>line (a)</code>, and replaced
<code>line (b)</code> with</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>with_shuffled <span class="op">=</span> adelie_chinstrap.sample(adelie_chinstrap.shape[<span class="dv">0</span>], replace<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<p>Select the best answer.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This would still run a valid hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as all values in the
<code>stats</code> array would be exactly the same</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, even though there would
be several different values in the <code>stats</code> array</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as it would incorporate
information about Gentoo penguins</p></li>
</ul>
<p><br></p>
<h3 id="problem-1.6">Problem 1.6</h3>
<p>For your convenience, we copy the code for the hypothesis test
below.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> np.array([])</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>num_reps <span class="op">=</span> <span class="dv">500</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(num_reps):</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) starts ---</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    shuffled <span class="op">=</span> np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;species&#39;</span>))</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (a) ends ---</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) starts ---</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    with_shuffled <span class="op">=</span> adelie_chinstrap.assign(species<span class="op">=</span>shuffled)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (b) ends ---</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> with_shuffled.groupby(<span class="st">&#39;species&#39;</span>).mean()</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) starts ---</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    stat <span class="op">=</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">0</span>] <span class="op">-</span> grouped.get(<span class="st">&#39;mass&#39;</span>).iloc[<span class="dv">1</span>]</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- line (c) ends ---</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> np.append(stats, stat)</span></code></pre></div>
<p>What would happen if we replaced <code>line (a)</code> with</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>with_shuffled <span class="op">=</span> adelie_chinstrap.assign(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    species<span class="op">=</span>np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;species&#39;</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>and replaced line (b) with</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>with_shuffled <span class="op">=</span> with_shuffled.assign(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    mass<span class="op">=</span>np.random.permutation(adelie_chinstrap.get(<span class="st">&#39;mass&#39;</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Select the best answer.</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> This would still run a valid hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as all values in the
<code>stats</code> array would be exactly the same</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, even though there would
be several different values in the <code>stats</code> array</p></li>
<li><p><input type="radio" disabled="" /> This would not run a valid hypothesis test, as it would incorporate
information about Gentoo penguins</p></li>
</ul>
<p><br></p>
<h3 id="problem-1.7">Problem 1.7</h3>
<p>Suppose we run the code for the hypothesis test and see the following
empirical distribution for the test statistic. In red is the observed
statistic.</p>
<center><img src='../assets/images/fa21-final/measuring_up_his.png' width=40%></center>
<p>Suppose our alternative hypothesis is that Chinstrap penguins weigh
more on average than Adelie penguins. Which of the following is closest
to the p-value for our hypothesis test?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <span class="math inline">0</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{1}{4}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{1}{3}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{2}{3}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{3}{4}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">1</span></p></li>
</ul>
<p><br></p>
<hr />
<h2 id="problem-2">Problem 2</h2>
<p>Let’s suppose there are 4 different types of shots a basketball
player can take – layups, midrange shots, threes, and free throws.</p>
<p>The DataFrame <code>breakdown</code> has 4 rows and 50 columns – one
row for each of the 4 shot types mentioned above, and one column for
each of 50 different players. Each column of <code>breakdown</code>
describes the distribution of shot types for a single player.</p>
<p>The first few columns of <code>breakdown</code> are shown below.</p>
<center><img src='../assets/images/wi22-final/head-to-head.png' width=30%></center>
<p>For instance, 30% of Kelsey Plum’s shots are layups, 30% of her shots
are midrange shots, 20% of her shots are threes, and 20% of her shots
are free throws.</p>
<p><br></p>
<h3 id="problem-2.1">Problem 2.1</h3>
<p>Below, we’ve drawn an overlaid bar chart showing the shot
distributions of Kelsey Plum and Chiney Ogwumike, a player on the Los
Angeles Sparks.</p>
<center><img src='../assets/images/wi22-final/tvd.png' width=50%></center>
<p><br></p>
<p>What is the <strong>total variation distance</strong> (TVD) between
Kelsey Plum’s shot distribution and Chiney Ogwumike’s shot distribution?
Give your answer as a <strong>proportion</strong> between 0 and 1 (not a
percentage) rounded to three decimal places.</p>
<p><br></p>
<h3 id="problem-2.2">Problem 2.2</h3>
<p>Recall, <code>breakdown</code> has information for 50 different
players. We want to find the player whose shot distribution is the
<strong>most similar to Kelsey Plum</strong>, i.e. has the lowest TVD
with Kelsey Plum’s shot distribution.</p>
<p>Fill in the blanks below so that <code>most_sim_player</code>
evaluates to the name of the player with the most similar shot
distribution to Kelsey Plum. Assume that the column named
<code>'Kelsey Plum'</code> is the first column in <code>breakdown</code>
(and again that <code>breakdown</code> has 50 columns total).</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>most_sim_player <span class="op">=</span> <span class="st">&#39;&#39;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>lowest_tvd_so_far <span class="op">=</span> __(a)__</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>other_players <span class="op">=</span> np.array(breakdown.columns).take(__(b)__)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> player <span class="kw">in</span> other_players:</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    player_tvd <span class="op">=</span> tvd(breakdown.get(<span class="st">&#39;Kelsey Plum&#39;</span>),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>                     breakdown.get(player))</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> player_tvd <span class="op">&lt;</span> lowest_tvd_so_far:</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>        lowest_tvd_so_far <span class="op">=</span> player_tvd</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>        __(c)__</span></code></pre></div>
<ol type="1">
<li>What goes in blank (a)?</li>
</ol>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> -1</p></li>
<li><p><input type="radio" disabled="" /> -0.5</p></li>
<li><p><input type="radio" disabled="" /> 0</p></li>
<li><p><input type="radio" disabled="" /> 0.5</p></li>
<li><p><input type="radio" disabled="" /> 1</p></li>
<li><p><input type="radio" disabled="" /> <code>np.array([])</code></p></li>
<li><p><input type="radio" disabled="" /> <code>''</code></p></li>
</ul>
<ol start="2" type="1">
<li><p>What goes in blank (b)?</p></li>
<li><p>What goes in blank (c)?</p></li>
</ol>
<p><br></p>
<h3 id="problem-2.3">Problem 2.3</h3>
<p>Let’s again consider the shot distributions of Kelsey Plum and Cheney
Ogwumike.</p>
<center><img src='../assets/images/wi22-final/tvd.png' width=50%></center>
<p>We define the <strong>maximum squared distance</strong> (MSD) between
two categorical distributions as the <strong>largest squared difference
between the proportions of any category</strong>.</p>
<p>What is the MSD between Kelsey Plum’s shot distribution and Chiney
Ogwumike’s shot distribution? Give your answer as a
<strong>proportion</strong> between 0 and 1 (not a percentage) rounded
to three decimal places.</p>
<p><br></p>
<h3 id="problem-2.4">Problem 2.4</h3>
<p>For your convenience, we show the first few columns of
<code>breakdown</code> again below.</p>
<center><img src='../assets/images/wi22-final/head-to-head.png' width=30%></center>
<p>In basketball:</p>
<ul>
<li>layups are worth 2 points,</li>
<li>midrange shots are worth 2 points,</li>
<li>threes are worth 3 points, and</li>
<li>free throws are worth 1 point</li>
</ul>
<p>Suppose that Kelsey Plum is guaranteed to shoot exactly 10 shots a
game. The type of each shot is drawn from the <code>'Kelsey Plum'</code>
column of <code>breakdown</code> (meaning that, for example, there is a
30% chance each shot is a layup).</p>
<p>Fill in the blanks below to complete the definition of the function
<code>simulate_points</code>, which simulates the number of points
Kelsey Plum scores in a single game. (<code>simulate_points</code>
should return a single number.)</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> simulate_points():</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    shots <span class="op">=</span> np.random.multinomial(__(a)__, breakdown.get(<span class="st">&#39;Kelsey Plum&#39;</span>))</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    possible_points <span class="op">=</span> np.array([<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>])</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> __(b)__</span></code></pre></div>
<ol type="1">
<li>What goes in blank (a)?</li>
<li>What goes in blank (b)?</li>
</ol>
<p><br></p>
<hr />
<h2 id="problem-3">Problem 3</h2>
<p>For this question we will use data from the 2021 Women’s National
Basketball Association (WNBA) season for the next several problems. In
basketball, players score points by shooting the ball into a hoop. The
team that scores the most points wins the game.</p>
<p>We have access to the <code>season</code> DataFrame, which contains
statistics on all players in the WNBA in the 2021 season. The first few
rows of <code>season</code> are shown below.</p>
<center><img src='../assets/images/wi22-final/seasons.png' width=40%></center>
<p>Each row in <code>season</code> corresponds to a single player. For
each player, we have: - <code>'Player'</code> (<code>str</code>), their
name - <code>'Team'</code> (<code>str</code>), the three-letter code of
the team they play on - <code>'G'</code> (<code>int</code>), the number
of games they played in the 2021 season - <code>'PPG'</code>
(<code>float</code>), the number of points they scored per game played -
<code>'APG'</code> (<code>float</code>), the number of assists (passes)
they made per game played - <code>'TPG'</code> (<code>float</code>), the
number of turnovers they made per game played</p>
<p>Note that all of the numerical columns in <code>season</code> must
contain values that are greater than or equal to 0. <br><br></p>
<p>Suppose we only have access to the DataFrame
<code>small_season</code>, which is a random sample of <strong>size
36</strong> from <code>season</code>. We’re interested in learning about
the true mean points per game of all players in <code>season</code>
given just the information in <code>small_season</code>.</p>
<p>To start, we want to bootstrap <code>small_season</code> 10,000 times
and compute the mean of the resample each time. We want to store these
10,000 bootstrapped means in the array <code>boot_means</code>.</p>
<p>Here is a broken implementation of this procedure.</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>boot_means <span class="op">=</span> np.array([])                                           </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(<span class="dv">10000</span>):                                          </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    resample <span class="op">=</span> small_season.sample(season.shape[<span class="dv">0</span>], replace<span class="op">=</span><span class="va">False</span>)  <span class="co"># Line 1</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    resample_mean <span class="op">=</span> small_season.get(<span class="st">&#39;PPG&#39;</span>).mean()                  <span class="co"># Line 2</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    np.append(boot_means, new_mean)                                 <span class="co"># Line 3</span></span></code></pre></div>
<p>For each of the 3 lines of code above (marked by comments), specify
what is incorrect about the line by selecting one or more of the
corresponding options below. Or, select “Line _ is correct as-is” if you
believe there’s nothing that needs to be changed about the line in order
for the above code to run properly.</p>
<p><br></p>
<h3 id="problem-3.1">Problem 3.1</h3>
<p>What is incorrect about Line 1? Select all that apply.</p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> Currently the procedure samples from <code>small_season</code>, when
it should be sampling from <code>season</code></p></li>
<li><p><input type="checkbox" disabled="" /> The sample size is <code>season.shape[0]</code>, when it should be
<code>small_season.shape[0]</code></p></li>
<li><p><input type="checkbox" disabled="" /> Sampling is currently being done without replacement, when it should
be done with replacement</p></li>
<li><p><input type="checkbox" disabled="" /> Line 1 is correct as-is</p></li>
</ul>
<p><br></p>
<h3 id="problem-3.2">Problem 3.2</h3>
<p>What is incorrect about Line 2? Select all that apply.</p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> Currently it is taking the mean of the <code>'PPG'</code> column in
<code>small_season</code>, when it should be taking the mean of the
<code>'PPG'</code> column in <code>season</code></p></li>
<li><p><input type="checkbox" disabled="" /> Currently it is taking the mean of the <code>'PPG'</code> column in
<code>small_season</code>, when it should be taking the mean of the
<code>'PPG'</code> column in <code>resample</code></p></li>
<li><p><input type="checkbox" disabled="" /> <code>.mean()</code> is not a valid Series method, and should be
replaced with a call to the function <code>np.mean</code></p></li>
<li><p><input type="checkbox" disabled="" /> Line 2 is correct as-is</p></li>
</ul>
<p><br></p>
<h3 id="problem-3.3">Problem 3.3</h3>
<p>What is incorrect about Line 3? Select all that apply.</p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> The result of calling <code>np.append</code> is not being reassigned
to <code>boot_means</code>, so <code>boot_means</code> will be an empty
array after running this procedure</p></li>
<li><p><input type="checkbox" disabled="" /> The indentation level of the line is incorrect –
<code>np.append</code> should be outside of the <code>for</code>-loop
(and aligned with <code>for i</code>)</p></li>
<li><p><input type="checkbox" disabled="" /> <code>new_mean</code> is not a defined variable name, and should be
replaced with <code>resample_mean</code></p></li>
<li><p><input type="checkbox" disabled="" /> Line 3 is correct as-is</p></li>
</ul>
<p><br></p>
<hr />
<h2 id="problem-4">Problem 4</h2>
<p>IKEA is a Swedish furniture company that designs and sells
ready-to-assemble furniture and other home furnishings.</p>
<center><img src='../assets/images/sp22-final/wordless_instructions.png' width=40%></center>
<p>An IKEA fan created an app where people can log the amount of time it
took them to assemble their IKEA furniture. The DataFrame
<code>app_data</code> has a row for each product build that was logged
on the app. The columns are:</p>
<ul>
<li><code>'product'</code> (<code>str</code>): the name of the product,
which includes the product line as the first word, followed by a
description of the product</li>
<li><code>'category'</code> (<code>str</code>): a categorical
description of the type of product</li>
<li><code>'assembly_time'</code> (<code>str</code>): the amount of time
to assemble the product, formatted as <code>'x hr, y min'</code> where
<code>x</code> and <code>y</code> represent integers, possibly zero</li>
</ul>
<p>The first few rows of <code>app_data</code> are shown below, though
<code>app_data</code> has many more rows than pictured (5000 rows
total).</p>
<center><img src='../assets/images/sp22-final/appdatadf.png' height=180></center>
<p>&nbsp;</p>
<p>Assume that we have already run <code>import babypandas as bpd</code>
and <code>import numpy as np</code>.<br />
<br><br></p>
<p>We want to use <code>app_data</code> to estimate the average amount
of time it takes to build an IKEA bed (any product in the ‘bed’
category). Which of the following strategies would be an appropriate way
to estimate this quantity? Select all that apply.</p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> Query to keep only the beds. Then resample with replacement many
times. For each resample, take the mean of the <code>'minutes'</code>
column. Compute a 95% confidence interval based on those means.</p></li>
<li><p><input type="checkbox" disabled="" /> Query to keep only the beds. Group by <code>'product'</code> using
the mean aggregation function. Then resample with replacement many
times. For each resample, take the mean of the <code>'minutes'</code>
column. Compute a 95% confidence interval based on those means.</p></li>
<li><p><input type="checkbox" disabled="" /> Resample with replacement many times. For each resample, first query
to keep only the beds and then take the mean of the
<code>'minutes'</code> column. Compute a 95% confidence interval based
on those means.</p></li>
<li><p><input type="checkbox" disabled="" /> Resample with replacement many times. For each resample, first query
to keep only the beds. Then group by <code>'product'</code> using the
mean aggregation function, and finally take the mean of the
<code>'minutes'</code> column. Compute a 95% confidence interval based
on those means.</p></li>
</ul>
<hr />
<h2 id="problem-5">Problem 5</h2>
<p><strong>True or False</strong>: Suppose that from a sample, you
compute a 95% bootstrapped confidence interval for a population
parameter to be the interval [L, R]. Then the average of L and R is the
mean of the original sample.</p>
<hr />
<h2 id="problem-6">Problem 6</h2>
<p>Suppose Tiffany has a random sample of dogs. Select the most
appropriate technique to answer each of the following questions using
Tiffany’s dog sample.</p>
<p><br></p>
<h3 id="problem-6.1">Problem 6.1</h3>
<p>Do small dogs typically live longer than medium and large dogs?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Standard hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> Permutation test</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<p><br></p>
<h3 id="problem-6.2">Problem 6.2</h3>
<p>Does Tiffany’s sample have an even distribution of dog kinds?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Standard hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> Permutation test</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<p><br></p>
<h3 id="problem-6.3">Problem 6.3</h3>
<p>What’s the median weight for herding dogs?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Standard hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> Permutation test</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<p><br></p>
<h3 id="problem-6.4">Problem 6.4</h3>
<p>Do dogs live longer than 12 years on average?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Standard hypothesis test</p></li>
<li><p><input type="radio" disabled="" /> Permutation test</p></li>
<li><p><input type="radio" disabled="" /> Bootstrapping</p></li>
</ul>
<p><br></p>
<hr />
<h2 id="section"><span class="math display"> </span></h2>
<h4
id="feedback-find-an-error-still-confused-have-a-suggestion-let-us-know-here.">👋
Feedback: Find an error? Still confused? Have a suggestion?
<a href="https://forms.gle/WZ71FchnXU1K154d7">Let us know
here</u></a>.</h4>
<hr />
</body>
</html>
